---
import { Icon } from '@ag-website-shared/components/icon/Icon';
import { fetchYouTubeThumbnail } from '@ag-website-shared/utils/fetchYoutubeThumbnail';
import styles from './VideoSection.module.scss';

/**
 * Show a YouTube thumbnail that links to the video
 */
interface Props {
    id: string;
    title: string;
    playlist?: string;
    showHeader?: boolean;
}

const { id, title = 'Video', playlist, showHeader } = Astro.props as Props;
const link = `https://www.youtube.com/watch?v=${id}${playlist ? `&list=${playlist}` : ''}`;
const imageSrc = await fetchYouTubeThumbnail(id);
---

<div class={styles.videoSection}>
    <div class:list={{ [styles.header]: showHeader }}><slot /></div>
    <a href={link} target="_blank">
        <div class={styles.ytContainer}>
            <img src={imageSrc} alt={`${title} thumbnail`} class={styles.ytThumbnail} />
            <Icon name="youtube" svgClasses={styles.ytIcon} />
        </div>
    </a>
</div>
