var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(l,e,t)=>e in l?__defProp(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,__spreadValues=(l,e)=>{for(var t in e||(e={}))__hasOwnProp.call(e,t)&&__defNormalProp(l,t,e[t]);if(__getOwnPropSymbols)for(var t of __getOwnPropSymbols(e))__propIsEnum.call(e,t)&&__defNormalProp(l,t,e[t]);return l},__export=(l,e)=>{for(var t in e)__defProp(l,t,{get:e[t],enumerable:!0})},__copyProps=(l,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of __getOwnPropNames(e))!__hasOwnProp.call(l,i)&&i!==t&&__defProp(l,i,{get:()=>e[i],enumerable:!(s=__getOwnPropDesc(e,i))||s.enumerable});return l},__toCommonJS=l=>__copyProps(__defProp({},"__esModule",{value:!0}),l),__decorateClass=(l,e,t,s)=>{for(var i=s>1?void 0:s?__getOwnPropDesc(e,t):e,r=l.length-1,o;r>=0;r--)(o=l[r])&&(i=(s?o(e,t,i):o(i))||i);return s&&i&&__defProp(e,t,i),i},main_exports={};__export(main_exports,{FiltersToolPanelModule:()=>FiltersToolPanelModule}),module.exports=__toCommonJS(main_exports);var import_core6=require("@ag-grid-community/core"),import_core7=require("@ag-grid-enterprise/core"),import_core=require("@ag-grid-community/core"),FiltersToolPanelHeaderPanel=class extends import_core.Component{preConstruct(){this.setTemplate(`<div class="ag-filter-toolpanel-search" role="presentation">
                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>
                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>
            </div>`)}postConstruct(){const l=this.localeService.getLocaleTextFunc();this.eFilterTextField.setAutoComplete(!1).setInputAriaLabel(l("ariaFilterColumnsInput","Filter Columns Input")).onValueChange(this.onSearchTextChanged.bind(this)),this.createExpandIcons(),this.setExpandState(0),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,import_core.Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))}init(l){this.params=l,this.columnModel.isReady()&&this.showOrHideOptions()}createExpandIcons(){this.eExpand.appendChild(this.eExpandChecked=import_core._.createIconNoSpan("columnSelectOpen",this.gos)),this.eExpand.appendChild(this.eExpandUnchecked=import_core._.createIconNoSpan("columnSelectClosed",this.gos)),this.eExpand.appendChild(this.eExpandIndeterminate=import_core._.createIconNoSpan("columnSelectIndeterminate",this.gos))}showOrHideOptions(){const l=!this.params.suppressFilterSearch,e=!this.params.suppressExpandAll,t=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(t("searchOoo","Search..."));const s=r=>r.getOriginalParent()&&r.isFilterAllowed(),i=this.columnModel.getAllGridColumns().some(s);import_core._.setDisplayed(this.eFilterTextField.getGui(),l),import_core._.setDisplayed(this.eExpand,e&&i)}onSearchTextChanged(){this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=import_core._.debounce(()=>{this.dispatchEvent({type:"searchChanged",searchText:this.eFilterTextField.getValue()})},300)),this.onSearchTextChangedDebounced()}onExpandClicked(){const l=this.currentExpandState===0?{type:"collapseAll"}:{type:"expandAll"};this.dispatchEvent(l)}setExpandState(l){this.currentExpandState=l,import_core._.setDisplayed(this.eExpandChecked,this.currentExpandState===0),import_core._.setDisplayed(this.eExpandUnchecked,this.currentExpandState===1),import_core._.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===2)}};__decorateClass([(0,import_core.Autowired)("columnModel")],FiltersToolPanelHeaderPanel.prototype,"columnModel",2),__decorateClass([(0,import_core.RefSelector)("eExpand")],FiltersToolPanelHeaderPanel.prototype,"eExpand",2),__decorateClass([(0,import_core.RefSelector)("eFilterTextField")],FiltersToolPanelHeaderPanel.prototype,"eFilterTextField",2),__decorateClass([import_core.PreConstruct],FiltersToolPanelHeaderPanel.prototype,"preConstruct",1),__decorateClass([import_core.PostConstruct],FiltersToolPanelHeaderPanel.prototype,"postConstruct",1);var import_core4=require("@ag-grid-community/core"),import_core2=require("@ag-grid-community/core"),_ToolPanelFilterComp=class m extends import_core2.Component{constructor(e,t){super(m.TEMPLATE),this.expandedCallback=t,this.expanded=!1,this.hideHeader=e}postConstruct(){this.eExpandChecked=import_core2._.createIconNoSpan("columnSelectOpen",this.gos),this.eExpandUnchecked=import_core2._.createIconNoSpan("columnSelectClosed",this.gos),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)}setColumn(e){this.column=e,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eventService,import_core2.Events.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),import_core2._.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),import_core2._.setDisplayed(this.eExpandChecked,!1),this.hideHeader?(import_core2._.setDisplayed(this.eFilterToolPanelHeader,!1),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,import_core2.Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))}onKeyDown(e){const{key:t}=e,{ENTER:s,SPACE:i,LEFT:r,RIGHT:o}=import_core2.KeyCode;t!==s&&t!==i&&t!==r&&t!==o||(e.preventDefault(),t===s||t===i?this.toggleExpanded():t===import_core2.KeyCode.LEFT?this.collapse():this.expand())}getColumn(){return this.column}getColumnFilterName(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)}addCssClassToTitleBar(e){this.eFilterToolPanelHeader.classList.add(e)}addInIcon(e,t,s){if(t==null)return;const i=import_core2._.createIconNoSpan(e,this.gos,s);t.appendChild(i)}isFilterActive(){return this.filterManager.isFilterActive(this.column)}onFilterChanged(){import_core2._.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),this.dispatchEvent({type:import_core2.Column.EVENT_FILTER_CHANGED})}toggleExpanded(){this.expanded?this.collapse():this.expand()}expand(){this.expanded||(this.expanded=!0,import_core2._.setAriaExpanded(this.eFilterToolPanelHeader,!0),import_core2._.setDisplayed(this.eExpandChecked,!0),import_core2._.setDisplayed(this.eExpandUnchecked,!1),this.addFilterElement(),this.expandedCallback())}addFilterElement(e){var t;const s=import_core2._.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),i=this.createManagedBean(new import_core2.FilterWrapperComp(this.column,"TOOLBAR"));this.filterWrapperComp=i,i.hasFilter()&&((t=i.getFilter())==null||t.then(r=>{this.underlyingFilter=r,r&&(s.appendChild(i.getGui()),this.agFilterToolPanelBody.appendChild(s),i.afterGuiAttached({container:"toolPanel",suppressFocus:e}))}))}collapse(){var e;this.expanded&&(this.expanded=!1,import_core2._.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),import_core2._.setDisplayed(this.eExpandChecked,!1),import_core2._.setDisplayed(this.eExpandUnchecked,!0),(e=this.filterWrapperComp)==null||e.afterGuiDetached(),this.destroyBean(this.filterWrapperComp),this.expandedCallback())}removeFilterElement(){import_core2._.clearElement(this.agFilterToolPanelBody)}isExpanded(){return this.expanded}refreshFilter(e){var t;if(!this.expanded)return;const s=this.underlyingFilter;s&&(e?typeof s.refreshVirtualList=="function"&&s.refreshVirtualList():(t=s.afterGuiDetached)==null||t.call(s))}onFilterOpened(e){e.source==="COLUMN_MENU"&&e.column===this.column&&this.expanded&&this.collapse()}};_ToolPanelFilterComp.TEMPLATE=`
        <div class="ag-filter-toolpanel-instance">
            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">
                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>
                <span ref="eFilterName" class="ag-header-cell-text"></span>
                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>
            </div>
            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>
        </div>`,__decorateClass([(0,import_core2.RefSelector)("eFilterToolPanelHeader")],_ToolPanelFilterComp.prototype,"eFilterToolPanelHeader",2),__decorateClass([(0,import_core2.RefSelector)("eFilterName")],_ToolPanelFilterComp.prototype,"eFilterName",2),__decorateClass([(0,import_core2.RefSelector)("agFilterToolPanelBody")],_ToolPanelFilterComp.prototype,"agFilterToolPanelBody",2),__decorateClass([(0,import_core2.RefSelector)("eFilterIcon")],_ToolPanelFilterComp.prototype,"eFilterIcon",2),__decorateClass([(0,import_core2.RefSelector)("eExpand")],_ToolPanelFilterComp.prototype,"eExpand",2),__decorateClass([(0,import_core2.Autowired)("filterManager")],_ToolPanelFilterComp.prototype,"filterManager",2),__decorateClass([(0,import_core2.Autowired)("columnModel")],_ToolPanelFilterComp.prototype,"columnModel",2),__decorateClass([import_core2.PostConstruct],_ToolPanelFilterComp.prototype,"postConstruct",1);var ToolPanelFilterComp=_ToolPanelFilterComp,import_core3=require("@ag-grid-community/core"),_ToolPanelFilterGroupComp=class c extends import_core3.Component{constructor(e,t,s,i,r){super(),this.columnGroup=e,this.childFilterComps=t,this.depth=i,this.expandedCallback=s,this.showingColumn=r}preConstruct(){const e={cssIdentifier:"filter-toolpanel",direction:"vertical"};this.setTemplate(c.TEMPLATE,{filterGroupComp:e})}init(){this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass(`ag-filter-toolpanel-group-level-${this.depth}`),this.filterGroupComp.addCssClassToTitleBar(`ag-filter-toolpanel-group-level-${this.depth}-header`),this.childFilterComps.forEach(e=>{this.filterGroupComp.addItem(e),e.addCssClassToTitleBar(`ag-filter-toolpanel-group-level-${this.depth+1}-header`)}),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip(),this.addInIcon("filter")}setupTooltip(){if(!this.showingColumn)return;const e=this.gos.get("tooltipShowMode")==="whenTruncated";let t;e&&(t=()=>{const r=this.filterGroupComp.getGui().querySelector(".ag-group-title");return r?r.scrollWidth>r.clientWidth:!0});const s=()=>{const i=this.columnGroup.getColDef().headerTooltip;this.setTooltip({newTooltipText:i,location:"filterToolPanelColumnGroup",shouldDisplayTooltip:t})};s(),this.addManagedListener(this.eventService,import_core3.Events.EVENT_NEW_COLUMNS_LOADED,s)}getTooltipParams(){const e=super.getTooltipParams();return e.location="filterToolPanelColumnGroup",e}addCssClassToTitleBar(e){this.filterGroupComp.addCssClassToTitleBar(e)}refreshFilters(e){this.childFilterComps.forEach(t=>{t instanceof c?t.refreshFilters(e):t.refreshFilter(e)})}isColumnGroup(){return this.columnGroup instanceof import_core3.ProvidedColumnGroup}isExpanded(){return this.filterGroupComp.isExpanded()}getChildren(){return this.childFilterComps}getFilterGroupName(){return this.filterGroupName?this.filterGroupName:""}getFilterGroupId(){return this.columnGroup.getId()}hideGroupItem(e,t){this.filterGroupComp.hideItem(e,t)}hideGroup(e){this.setDisplayed(!e)}addInIcon(e){const t=import_core3._.createIconNoSpan(e,this.gos);t&&t.classList.add("ag-filter-toolpanel-group-instance-header-icon"),this.filterGroupComp.addTitleBarWidget(t)}forEachToolPanelFilterChild(e){this.childFilterComps.forEach(t=>{t instanceof ToolPanelFilterComp&&e(t)})}addExpandCollapseListeners(){const e=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(s=>s.expand()),t=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(s=>s.collapse());this.addManagedListener(this.filterGroupComp,import_core3.AgGroupComponent.EVENT_EXPANDED,e),this.addManagedListener(this.filterGroupComp,import_core3.AgGroupComponent.EVENT_COLLAPSED,t)}getColumns(){return this.columnGroup instanceof import_core3.ProvidedColumnGroup?this.columnGroup.getLeafColumns():[this.columnGroup]}addFilterChangedListeners(){this.getColumns().forEach(e=>{this.addManagedListener(e,import_core3.Column.EVENT_FILTER_CHANGED,()=>this.refreshFilterClass())}),this.columnGroup instanceof import_core3.ProvidedColumnGroup||this.addManagedListener(this.eventService,import_core3.Events.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))}refreshFilterClass(){const e=this.getColumns(),t=()=>e.some(s=>s.isFilterActive());this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",t())}onFilterOpened(e){e.source==="COLUMN_MENU"&&e.column===this.columnGroup&&this.isExpanded()&&this.collapse()}expand(){this.filterGroupComp.toggleGroupExpand(!0)}collapse(){this.filterGroupComp.toggleGroupExpand(!1)}setGroupTitle(){this.filterGroupName=this.columnGroup instanceof import_core3.ProvidedColumnGroup?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")}getColumnGroupName(e){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,e,"filterToolPanel")}getColumnName(e){return this.columnModel.getDisplayNameForColumn(e,"filterToolPanel",!1)}destroyFilters(){this.childFilterComps=this.destroyBeans(this.childFilterComps),import_core3._.clearElement(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}};_ToolPanelFilterGroupComp.TEMPLATE=`<div class="ag-filter-toolpanel-group-wrapper">
            <ag-group-component ref="filterGroupComp"></ag-group-component>
        </div>`,__decorateClass([(0,import_core3.RefSelector)("filterGroupComp")],_ToolPanelFilterGroupComp.prototype,"filterGroupComp",2),__decorateClass([(0,import_core3.Autowired)("columnModel")],_ToolPanelFilterGroupComp.prototype,"columnModel",2),__decorateClass([import_core3.PreConstruct],_ToolPanelFilterGroupComp.prototype,"preConstruct",1),__decorateClass([import_core3.PostConstruct],_ToolPanelFilterGroupComp.prototype,"init",1);var ToolPanelFilterGroupComp=_ToolPanelFilterGroupComp,_FiltersToolPanelListPanel=class C extends import_core4.Component{constructor(){super(C.TEMPLATE),this.initialised=!1,this.hasLoadedInitialState=!1,this.isInitialState=!1,this.filterGroupComps=[],this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending=!1}init(e){this.initialised=!0;const t=this.gos.addGridCommonParams({suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});import_core4._.mergeDeep(t,e),this.params=t,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,import_core4.Events.EVENT_COLUMN_MOVED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,import_core4.Events.EVENT_NEW_COLUMNS_LOADED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,import_core4.Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,s=>{s.key==="filters"&&this.refreshFilters(s.visible)}),this.addManagedListener(this.eventService,import_core4.Events.EVENT_DRAG_STARTED,()=>{this.suppressOnColumnsChanged=!0}),this.addManagedListener(this.eventService,import_core4.Events.EVENT_DRAG_STOPPED,()=>{this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending&&(this.onColumnsChangedPending=!1,this.onColumnsChanged())}),this.columnModel.isReady()&&this.onColumnsChanged()}onColumnsChanged(){if(this.suppressOnColumnsChanged){this.onColumnsChangedPending=!0;return}const e=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!e?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs(),this.refreshAriaLabel()}syncFilterLayout(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this)),this.refreshAriaLabel()}buildTreeFromProvidedColumnDefs(){const e=this.columnModel.getPrimaryColumnTree();this.recreateFilters(e)}setFiltersLayout(e){const t=this.toolPanelColDefService.createColumnTree(e);this.recreateFilters(t)}recreateFilters(e){const t=this.gos.getActiveDomElement();this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);const s=this.getExpansionState();this.destroyFilters(),this.filterGroupComps=this.recursivelyAddComps(e,0,s);const i=this.filterGroupComps.length;i&&(this.filterGroupComps.forEach(r=>this.appendChild(r)),this.setFirstAndLastVisible(0,i-1)),import_core4._.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent(),this.getGui().contains(t)&&t.focus(),this.isInitialState=!1,this.refreshAriaLabel()}recursivelyAddComps(e,t,s){return import_core4._.flatten(e.map(i=>{if(i instanceof import_core4.ProvidedColumnGroup)return import_core4._.flatten(this.recursivelyAddFilterGroupComps(i,t,s));const r=i;if(!this.shouldDisplayFilter(r))return[];const o=t===0,n=new ToolPanelFilterComp(o,()=>this.onFilterExpanded());if(this.createBean(n),n.setColumn(r),s.get(r.getId())&&n.expand(),t>0)return n;const a=this.createBean(new ToolPanelFilterGroupComp(r,[n],this.onGroupExpanded.bind(this),t,!0));return a.addCssClassToTitleBar("ag-filter-toolpanel-header"),s.get(a.getFilterGroupId())||a.collapse(),a}))}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),t=e("ariaFilterPanelList","Filter List"),s=e("filters","Filters"),p=this.getGui().querySelectorAll(".ag-filter-toolpanel-group-item:not(.ag-filter-toolpanel-group-wrapper, .ag-hidden)").length;import_core4._.setAriaLabel(this.getAriaElement(),`${t} ${p} ${s}`)}recursivelyAddFilterGroupComps(e,t,s){if(!this.filtersExistInChildren(e.getChildren()))return;const i=e.getColGroupDef();if(i&&i.suppressFiltersToolPanel)return[];const r=e.isPadding()?t:t+1,o=import_core4._.flatten(this.recursivelyAddComps(e.getChildren(),r,s));if(e.isPadding())return o;const n=new ToolPanelFilterGroupComp(e,o,this.onGroupExpanded.bind(this),t,!1);this.createBean(n),n.addCssClassToTitleBar("ag-filter-toolpanel-header");const a=s.get(n.getFilterGroupId());return(this.isInitialState&&!a||a===!1)&&n.collapse(),[n]}filtersExistInChildren(e){return e.some(t=>t instanceof import_core4.ProvidedColumnGroup?this.filtersExistInChildren(t.getChildren()):this.shouldDisplayFilter(t))}shouldDisplayFilter(e){const t=e.getColDef()&&e.getColDef().suppressFiltersToolPanel;return e.isFilterAllowed()&&!t}getExpansionState(){const e=new Map;if(this.isInitialState){const{expandedColIds:s,expandedGroupIds:i}=this.params.initialState;return s.forEach(r=>e.set(r,!0)),i.forEach(r=>e.set(r,!0)),e}const t=s=>{e.set(s.getFilterGroupId(),s.isExpanded()),s.getChildren().forEach(i=>{i instanceof ToolPanelFilterGroupComp?t(i):e.set(i.getColumn().getId(),i.isExpanded())})};return this.filterGroupComps.forEach(t),e}refresh(){}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}expandFilterGroups(e,t){const s=[],i=r=>{const o=r.getFilterGroupId();(!t||import_core4._.includes(t,o))&&(e&&r.isColumnGroup()?r.expand():r.collapse(),s.push(o)),r.getChildren().forEach(a=>{a instanceof ToolPanelFilterGroupComp&&i(a)})};if(this.filterGroupComps.forEach(i),this.onGroupExpanded(),t){const r=t.filter(o=>s.indexOf(o)<0);r.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",r)}}expandFilters(e,t){const s=[],i=r=>{if(r instanceof ToolPanelFilterGroupComp){let a=!1;return r.getChildren().forEach(p=>{i(p)&&(e?(r.expand(),a=!0):r.isColumnGroup()||r.collapse())}),a}const o=r.getColumn().getColId(),n=!t||import_core4._.includes(t,o);return n&&(e?r.expand():r.collapse(),s.push(o)),n};if(this.filterGroupComps.forEach(i),this.onGroupExpanded(),t){const r=t.filter(o=>s.indexOf(o)<0);r.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",r)}}onGroupExpanded(){this.fireExpandedEvent()}onFilterExpanded(){this.dispatchEvent({type:"filterExpanded"})}fireExpandedEvent(){let e=0,t=0;const s=r=>{r.isColumnGroup()&&(r.isExpanded()?e++:t++,r.getChildren().forEach(o=>{o instanceof ToolPanelFilterGroupComp&&s(o)}))};this.filterGroupComps.forEach(s);let i;e>0&&t>0?i=2:t>0?i=1:i=0,this.dispatchEvent({type:"groupExpanded",state:i})}performFilterSearch(e){this.searchFilterText=import_core4._.exists(e)?e.toLowerCase():null,this.searchFilters(this.searchFilterText)}searchFilters(e){const t=o=>!import_core4._.exists(e)||o.toLowerCase().indexOf(e)!==-1,s=(o,n)=>{if(!(o instanceof ToolPanelFilterGroupComp))return t(o.getColumnFilterName()||"");const a=o.getChildren(),p=t(o.getFilterGroupName()),h=n||p;if(h){o.hideGroup(!1);for(let d=0;d<a.length;d++)s(a[d],h),o.hideGroupItem(!1,d);return!0}let u=!1;return a.forEach((d,E)=>{const f=s(d,n);o.hideGroupItem(!f,E),f&&(u=!0)}),o.hideGroup(!u),u};let i,r;this.filterGroupComps.forEach((o,n)=>{s(o,!1),i===void 0?o.containsCssClass("ag-hidden")||(i=n,r=n):!o.containsCssClass("ag-hidden")&&r!==n&&(r=n)}),this.setFirstAndLastVisible(i,r),this.refreshAriaLabel()}setFirstAndLastVisible(e,t){this.filterGroupComps.forEach((s,i)=>{s.removeCssClass("ag-first-group-visible"),s.removeCssClass("ag-last-group-visible"),i===e&&s.addCssClass("ag-first-group-visible"),i===t&&s.addCssClass("ag-last-group-visible")})}refreshFilters(e){this.filterGroupComps.forEach(t=>t.refreshFilters(e))}getExpandedFiltersAndGroups(){const e=[],t=new Set,s=i=>{if(i instanceof ToolPanelFilterGroupComp){i.getChildren().forEach(o=>s(o));const r=i.getFilterGroupId();i.isExpanded()&&!t.has(r)&&e.push(r)}else i.isExpanded()&&t.add(i.getColumn().getColId())};return this.filterGroupComps.forEach(s),{expandedGroupIds:e,expandedColIds:Array.from(t)}}destroyFilters(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),import_core4._.clearElement(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}};_FiltersToolPanelListPanel.TEMPLATE='<div class="ag-filter-list-panel"></div>',__decorateClass([(0,import_core4.Autowired)("toolPanelColDefService")],_FiltersToolPanelListPanel.prototype,"toolPanelColDefService",2),__decorateClass([(0,import_core4.Autowired)("columnModel")],_FiltersToolPanelListPanel.prototype,"columnModel",2);var FiltersToolPanelListPanel=_FiltersToolPanelListPanel,import_core5=require("@ag-grid-community/core"),_FiltersToolPanel=class g extends import_core5.Component{constructor(){super(g.TEMPLATE),this.initialised=!1,this.listenerDestroyFuncs=[]}init(e){this.initialised&&(this.listenerDestroyFuncs.forEach(r=>r()),this.listenerDestroyFuncs=[]),this.initialised=!0;const t=this.gos.addGridCommonParams({suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});this.params=__spreadValues(__spreadValues({},t),e),this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params);const s=this.params.suppressExpandAll,i=this.params.suppressFilterSearch;s&&i&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"filterExpanded",this.onFilterExpanded.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}onExpandAll(){this.filtersToolPanelListPanel.expandFilterGroups(!0)}onCollapseAll(){this.filtersToolPanelListPanel.expandFilterGroups(!1)}onSearchChanged(e){this.filtersToolPanelListPanel.performFilterSearch(e.searchText)}setFilterLayout(e){this.filtersToolPanelListPanel.setFiltersLayout(e)}onFilterExpanded(){this.params.onStateUpdated()}onGroupExpanded(e){this.filtersToolPanelHeaderPanel.setExpandState(e.state),this.params.onStateUpdated()}expandFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!0,e)}collapseFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!1,e)}expandFilters(e){this.filtersToolPanelListPanel.expandFilters(!0,e)}collapseFilters(e){this.filtersToolPanelListPanel.expandFilters(!1,e)}syncLayoutWithGrid(){this.filtersToolPanelListPanel.syncFilterLayout()}refresh(e){return this.init(e),!0}getState(){return this.filtersToolPanelListPanel.getExpandedFiltersAndGroups()}destroy(){super.destroy()}};_FiltersToolPanel.TEMPLATE=`<div class="ag-filter-toolpanel">
            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>
            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>
         </div>`,__decorateClass([(0,import_core5.RefSelector)("filtersToolPanelHeaderPanel")],_FiltersToolPanel.prototype,"filtersToolPanelHeaderPanel",2),__decorateClass([(0,import_core5.RefSelector)("filtersToolPanelListPanel")],_FiltersToolPanel.prototype,"filtersToolPanelListPanel",2);var FiltersToolPanel=_FiltersToolPanel,import_side_bar=require("@ag-grid-enterprise/side-bar"),VERSION="31.3.4",FiltersToolPanelModule={version:VERSION,moduleName:import_core6.ModuleNames.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:FiltersToolPanelHeaderPanel},{componentName:"AgFiltersToolPanelList",componentClass:FiltersToolPanelListPanel}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:FiltersToolPanel}],dependantModules:[import_side_bar.SideBarModule,import_core7.EnterpriseCoreModule]};
