var Wr=Object.defineProperty,_i=Object.defineProperties,Gi=Object.getOwnPropertyDescriptor,Fi=Object.getOwnPropertyDescriptors,mt=Object.getOwnPropertySymbols,zr=Object.prototype.hasOwnProperty,Yr=Object.prototype.propertyIsEnumerable,Kr=(s,e,t)=>e in s?Wr(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,T=(s,e)=>{for(var t in e||(e={}))zr.call(e,t)&&Kr(s,t,e[t]);if(mt)for(var t of mt(e))Yr.call(e,t)&&Kr(s,t,e[t]);return s},A=(s,e)=>_i(s,Fi(e)),ae=(s,e)=>{var t={};for(var r in s)zr.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&mt)for(var r of mt(s))e.indexOf(r)<0&&Yr.call(s,r)&&(t[r]=s[r]);return t},p=(s,e,t,r)=>{for(var a=r>1?void 0:r?Gi(e,t):e,i=s.length-1,n;i>=0;i--)(n=s[i])&&(a=(r?n(e,t,a):n(a))||a);return r&&a&&Wr(e,t,a),a};import{ModuleNames as Vi}from"@ag-grid-community/core";import{EnterpriseCoreModule as Ni}from"@ag-grid-enterprise/core";import{RangeSelectionModule as Bi}from"@ag-grid-enterprise/range-selection";import{Autowired as Ui,Bean as Hi,BeanStub as Wi,Optional as zi,PreDestroy as Yi}from"@ag-grid-community/core";import{VERSION as Ki,_ModuleSupport as $i}from"ag-charts-community";import{_ as ie,AgDialog as $r,Autowired as Le,Component as Xi,Events as Xr,PostConstruct as ji,RefSelector as Re}from"@ag-grid-community/core";import{AgPanel as qi,AgPromise as Zi,Autowired as jr,Component as qr,Events as Ji,PostConstruct as Qi}from"@ag-grid-community/core";import{AgPromise as en,Autowired as Zr,Component as tn,PostConstruct as rn,TabbedLayout as sn}from"@ag-grid-community/core";import{_ as an,AutoScrollService as nn,Autowired as Jr,Component as on,PostConstruct as ln}from"@ag-grid-community/core";import{_ as cn,Autowired as hn,BeanStub as dn,Events as j,PostConstruct as un}from"@ag-grid-community/core";import{_ as Ct,Autowired as Qr,BeanStub as pn,CellRangeType as _e,PostConstruct as gn}from"@ag-grid-community/core";import{_ as ar,Autowired as Ge,BeanStub as mn,ModuleNames as Cn,ModuleRegistry as fn,Optional as vn}from"@ag-grid-community/core";var fe=class Ba extends mn{getData(e){if(e.crossFiltering){if(e.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gos.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gos.isRowModelType("serverSide")&&e.pivoting&&this.updatePivotKeysForSSRM();const r=this.extractRowsFromGridRowModel(e);return r.chartData=this.aggregateRowsByDimension(e,r.chartData),r}extractRowsFromGridRowModel(e){const{crossFiltering:t,startRow:r,endRow:a,valueCols:i,dimensionCols:n,grouping:o}=e;let l=[];const c={},h={},d={};let u={},g=[],m;if(t)u=this.getFilteredRowNodes(),g=this.getAllRowNodes(),m=g.length;else{const y=this.gridRowModel.getRowCount()-1;r===a&&r===0&&n.length===0&&i.length===0?m=0:m=(a>=0?Math.min(a,y):y)-r+1}m>0&&i.forEach(y=>{let v=[];const S=y.getColDef().pivotKeys;S&&(v=S.slice());const P=y.getColDef().headerName;P&&v.push(P),v.length>0&&(c[y.getId()]=v)});let f=0;for(let y=0;y<m;y++){const v=t?g[y]:this.gridRowModel.getRow(y+r);if(v.footer){f++;continue}const S={};n.forEach(P=>{const M=P.colId,b=this.columnModel.getGridColumn(M);if(b){const x=this.valueService.getValue(b,v);if(o){const D=x&&x.toString?String(x.toString()):"",k=Ba.getGroupLabels(v,D);S[M]={labels:k,toString:function(){return this.labels.filter(G=>!!G).reverse().join(" - ")}},v.group&&(h[k.toString()]=y-f);const O=k.slice(1,k.length).toString();O&&(d[O]=h[O])}else S[M]=x}else S[q.DEFAULT_CATEGORY]=y+1}),i.forEach(P=>{const M=P.getColId();if(t){const b=M+"-filtered-out",x=this.valueService.getValue(P,v),D=x!=null&&typeof x.toNumber=="function"?x.toNumber():x;u[v.id]?(S[M]=D,S[b]=e.aggFunc||e.isScatter?void 0:0):(S[M]=e.aggFunc||e.isScatter?void 0:0,S[b]=D)}else{let b=this.valueService.getValue(P,v);b&&b.hasOwnProperty("toString")&&(b=parseFloat(b.toString())),S[M]=b!=null&&typeof b.toNumber=="function"?b.toNumber():b}}),l.push(S)}let C;if(o){const y=ar.values(d),v=l;l=[],C=[];for(let S=0;S<v.length;S++)(ar.includes(y,S)?C:l).push(v[S])}return{chartData:l,columnNames:c,groupChartData:C}}aggregateRowsByDimension(e,t){const r=e.dimensionCols;if(!e.aggFunc||r.length===0)return t;const a=ar.last(r),i=a&&a.colId,n={},o=[];if(t.forEach(l=>{let c=n;r.forEach(h=>{const d=h.colId,u=l[d];if(d===i){let g=c[u];g||(g={__children:[]},r.forEach(m=>{const f=m.colId;g[f]=l[f]}),c[u]=g,o.push(g)),g.__children.push(l)}else c[u]||(c[u]={}),c=c[u]})}),fn.__assertRegistered(Cn.RowGroupingModule,"Charting Aggregation",this.context.getGridId())){const l=this.aggregationStage;o.forEach(c=>e.valueCols.forEach(h=>{if(e.crossFiltering)e.valueCols.forEach(d=>{const u=d.getColId(),g=c.__children.filter(v=>typeof v[u]<"u").map(v=>v[u]);let m=l.aggregateValues(g,e.aggFunc);c[d.getId()]=m&&typeof m.value<"u"?m.value:m;const f=`${u}-filtered-out`,C=c.__children.filter(v=>typeof v[f]<"u").map(v=>v[f]);let y=l.aggregateValues(C,e.aggFunc);c[f]=y&&typeof y.value<"u"?y.value:y});else{const d=c.__children.map(g=>g[h.getId()]);let u=l.aggregateValues(d,e.aggFunc);c[h.getId()]=u&&typeof u.value<"u"?u.value:u}}))}return o}updatePivotKeysForSSRM(){const e=this.columnModel.getSecondaryColumns();if(!e)return;const t=this.extractPivotKeySeparator(e);e.forEach(r=>{if(t==="")r.getColDef().pivotKeys=[];else{const a=r.getColId().split(t);r.getColDef().pivotKeys=a.slice(0,a.length-1)}})}extractPivotKeySeparator(e){if(e.length===0)return"";const t=(a,i)=>{const n=a.getGroupId();return a.getParent()?t(a.getParent(),n):i.split(n)[1][0]},r=e[0];return r.getParent()==null?"":t(r.getParent(),r.getColId())}static getGroupLabels(e,t){const r=[t];for(;e&&e.level!==0;)e=e.parent,e&&r.push(e.key);return r}getFilteredRowNodes(){const e={};return this.gridRowModel.forEachNodeAfterFilterAndSort(t=>{e[t.id]=t}),e}getAllRowNodes(){let e=[];return this.gridRowModel.forEachNode(t=>{e.push(t)}),this.sortRowNodes(e)}sortRowNodes(e){const t=this.sortController.getSortOptions();return!t||t.length==0?e:this.rowNodeSorter.doFullSort(e,t)}};p([Ge("rowModel")],fe.prototype,"gridRowModel",2),p([Ge("valueService")],fe.prototype,"valueService",2),p([Ge("columnModel")],fe.prototype,"columnModel",2),p([Ge("rowNodeSorter")],fe.prototype,"rowNodeSorter",2),p([Ge("sortController")],fe.prototype,"sortController",2),p([vn("aggregationStage")],fe.prototype,"aggregationStage",2);var yn=fe;import{Autowired as ir,Bean as Sn,BeanStub as Tn,Events as es,PostConstruct as Pn}from"@ag-grid-community/core";var ve=class extends Tn{constructor(){super(...arguments),this.valueColsWithoutSeriesType=new Set}postConstruct(){const s=()=>this.valueColsWithoutSeriesType.clear();this.addManagedListener(this.eventService,es.EVENT_NEW_COLUMNS_LOADED,s),this.addManagedListener(this.eventService,es.EVENT_ROW_DATA_UPDATED,s)}getColumn(s){return this.columnModel.getPrimaryColumn(s)}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getColDisplayName(s){return this.columnModel.getDisplayNameForColumn(s,"chart")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}getGroupDisplayColumns(){return this.columnModel.getGroupDisplayColumns()}isPivotMode(){return this.columnModel.isPivotMode()}isPivotActive(){return this.columnModel.isPivotActive()}getChartColumns(){const s=this.columnModel.getAllGridColumns(),e=new Set,t=new Set;return s.forEach(r=>{const a=r.getColDef(),i=a.chartDataType;if(i)switch(i){case"category":case"time":e.add(r);return;case"series":t.add(r);return;case"excluded":return;default:console.warn(`AG Grid: unexpected chartDataType value '${i}' supplied, instead use 'category', 'series' or 'excluded'`);break}if(a.colId==="ag-Grid-AutoColumn"){e.add(r);return}if(!r.isPrimary()){t.add(r);return}(this.isInferredValueCol(r)?t:e).add(r)}),{dimensionCols:e,valueCols:t}}isInferredValueCol(s){const e=s.getColId();if(e==="ag-Grid-AutoColumn")return!1;const t=this.rowPositionUtils.getRowNode({rowIndex:0,rowPinned:null});if(!t)return this.valueColsWithoutSeriesType.has(e);let r=this.valueService.getValue(s,t);r==null&&(r=this.extractLeafData(t,s)),r!=null&&typeof r.toNumber=="function"&&(r=r.toNumber());const a=typeof r=="number";return a&&this.valueColsWithoutSeriesType.add(e),a}extractLeafData(s,e){if(!s.allLeafChildren)return null;for(let t=0;t<s.allLeafChildren.length;t++){const r=s.allLeafChildren[t],a=this.valueService.getValue(e,r);if(a!=null)return a}return null}destroy(){this.valueColsWithoutSeriesType.clear(),super.destroy()}};p([ir("columnModel")],ve.prototype,"columnModel",2),p([ir("valueService")],ve.prototype,"valueService",2),p([ir("rowPositionUtils")],ve.prototype,"rowPositionUtils",2),p([Pn],ve.prototype,"postConstruct",1),ve=p([Sn("chartColumnService")],ve);import{BeanStub as bn,PostConstruct as An}from"@ag-grid-community/core";var nr=class Ua extends bn{constructor(e){var t;super(),this.suppressComboChartWarnings=!1,this.chartDataModel=e,this.seriesChartTypes=(t=e.params.seriesChartTypes)!=null?t:[]}init(){this.initComboCharts()}update(e){this.seriesChartTypes=e??this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()}initComboCharts(){const e=this.seriesChartTypes&&this.seriesChartTypes.length>0;(this.chartDataModel.chartType==="customCombo"||e)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])}updateSeriesChartTypes(){if(this.chartDataModel.isComboChart()){if(this.seriesChartTypes=this.seriesChartTypes.map(e=>{const t=["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType);return e.secondaryAxis=t?!1:e.secondaryAxis,e}),this.chartDataModel.chartType==="customCombo"){this.updateSeriesChartTypesForCustomCombo();return}this.updateChartSeriesTypesForBuiltInCombos()}}updateSeriesChartTypesForCustomCombo(){!(this.seriesChartTypes&&this.seriesChartTypes.length>0)&&!this.suppressComboChartWarnings&&console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map(a=>(Ua.SUPPORTED_COMBO_CHART_TYPES.includes(a.chartType)||(console.warn(`AG Grid: invalid chartType '${a.chartType}' supplied in 'seriesChartTypes', converting to 'line' instead.`),a.chartType="line"),a));const t=a=>{(!this.savedCustomSeriesChartTypes||this.savedCustomSeriesChartTypes.length===0)&&(this.savedCustomSeriesChartTypes=this.seriesChartTypes);const i=this.savedCustomSeriesChartTypes.find(n=>n.colId===a.colId);return i||(a.selected&&!this.suppressComboChartWarnings&&console.warn(`AG Grid: no 'seriesChartType' found for colId = '${a.colId}', defaulting to 'line'.`),{colId:a.colId,chartType:"line",secondaryAxis:!1})},r=this.chartDataModel.valueColState.map(t);this.seriesChartTypes=r,this.savedCustomSeriesChartTypes=r,this.suppressComboChartWarnings=!0}updateChartSeriesTypesForBuiltInCombos(){const{chartType:e,valueColState:t}=this.chartDataModel;let r=e==="columnLineCombo"?"groupedColumn":"stackedArea",a=e==="columnLineCombo"?"line":"groupedColumn";const i=t.filter(o=>o.selected),n=Math.ceil(i.length/2);this.seriesChartTypes=i.map((o,l)=>{const c=l>=n?a:r;return{colId:o.colId,chartType:c,secondaryAxis:!1}})}};nr.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],p([An],nr.prototype,"init",1);var xn=nr;import{ChartMappings as ts}from"@ag-grid-community/core";var rs={area:{isCartesian:!0,canInvert:!0},bar:{isCartesian:!0,canInvert:!0},histogram:{isCartesian:!0},line:{isCartesian:!0,canInvert:!0},pie:{isPie:!0},donut:{isPie:!0,canInvert:!0},scatter:{isCartesian:!0},bubble:{isCartesian:!0},"radial-column":{isPolar:!0,isEnterprise:!0,isRadial:!0,canInvert:!0},"radial-bar":{isPolar:!0,isEnterprise:!0,isRadial:!0,canInvert:!0},"radar-line":{isPolar:!0,isEnterprise:!0,canInvert:!0},"radar-area":{isPolar:!0,isEnterprise:!0,canInvert:!0},nightingale:{isPolar:!0,isEnterprise:!0,canInvert:!0},"range-bar":{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0},"range-area":{isCartesian:!0,isEnterprise:!0},"box-plot":{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0},treemap:{isEnterprise:!0,isHierarchical:!0},sunburst:{isEnterprise:!0,isHierarchical:!0},heatmap:{isCartesian:!0,isEnterprise:!0},waterfall:{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0}};function Mn(s){return!!rs[s]}function ss(s){return ts.COMBO_CHART_TYPES.includes(s)}function ne(s,e){var t;return!!((t=rs[s])!=null&&t[e])}function En(s){return ne(w(s),"isEnterprise")}var wn=new Set(["stackedColumn","normalizedColumn","stackedBar","normalizedBar"]);function On(s){return wn.has(s)}function ye(s){return ne(s,"isCartesian")}function as(s){return ne(s,"isPolar")}function Dn(s){return ne(s,"isRadial")}function Se(s){return ne(s,"isHierarchical")}function Fe(s){return s==="doughnut"?"donut":s}function is(s){return ts.CHART_TYPE_TO_SERIES_TYPE[s]}function w(s){var e;return(e=is(s))!=null?e:"line"}function ns(s){return ne(s,"isPie")}function kn(s){return s==="pie"||s==="waterfall"||s==="histogram"}function or(s){return Se(w(s))?void 0:1}function ft(s){return Se(w(s))?2:kn(s)?1:void 0}function os(s){return ne(w(s),"canInvert")}function In(s){return ne(w(s),"canSwitchDirection")}var Ve=class Ur extends pn{constructor(e){super(),this.unlinked=!1,this.chartData=[],this.valueColState=[],this.dimensionColState=[],this.columnNames={},this.crossFiltering=!1,this.grouping=!1,this.params=e,this.chartId=e.chartId,this.setParams(e)}setParams(e){const{chartType:t,pivotChart:r,chartThemeName:a,switchCategorySeries:i,aggFunc:n,cellRange:o,suppressChartRanges:l,unlinkChart:c,crossFiltering:h,seriesGroupType:d}=e;this.chartType=t,this.pivotChart=r??!1,this.chartThemeName=a,this.switchCategorySeries=!!i,this.aggFunc=n,this.referenceCellRange=o,this.suppliedCellRange=o,this.suppressChartRanges=l??!1,this.unlinked=!!c,this.crossFiltering=!!h,this.seriesGroupType=d}init(){this.datasource=this.createManagedBean(new yn),this.chartColumnService=this.createManagedBean(new ve),this.comboChartModel=this.createManagedBean(new xn(this)),this.updateCellRanges({setColsFromRange:!0}),this.updateData()}updateModel(e){const{cellRange:t,seriesChartTypes:r}=e;t!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.setParams(e),this.updateSelectedDimensions(t?.columns),this.updateCellRanges({setColsFromRange:!0}),(this.isComboChart()||r)&&this.comboChartModel.update(r),this.unlinked||this.updateData()}updateCellRanges(e){const{updatedColState:t,resetOrder:r,maintainColState:a,setColsFromRange:i}=e??{};this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);const{dimensionCols:n,valueCols:o}=this.chartColumnService.getChartColumns(),l=this.getAllColumnsFromRanges();t&&this.updateColumnState(t,r),this.setDimensionCellRange(n,l,t),this.setValueCellRange(o,l,i),!t&&!a&&(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()}updateData(){const{startRow:e,endRow:t}=this.getRowIndexes();this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();const r={aggFunc:this.aggFunc,dimensionCols:this.getSelectedDimensions(),grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:e,endRow:t,isScatter:Ct.includes(["scatter","bubble"],this.chartType)},{chartData:a,columnNames:i,groupChartData:n}=this.datasource.getData(r);this.chartData=a,this.groupChartData=n,this.columnNames=i,this.categoryAxisType=void 0}isGrouping(){const e=this.gos.get("treeData"),t=e?null:this.chartColumnService.getRowGroupColumns(),r=e||t&&t.length>0,a=this.getSelectedDimensions().map(({colId:o})=>o),n=this.chartColumnService.getGroupDisplayColumns().map(o=>o.getColId()).some(o=>a.includes(o));return!!r&&n}getSelectedValueCols(){return this.valueColState.filter(e=>e.selected).map(e=>e.column)}getSelectedDimensions(){return this.dimensionColState.filter(e=>e.selected)}getColDisplayName(e){return this.chartColumnService.getColDisplayName(e)}isPivotMode(){return this.chartColumnService.isPivotMode()}getChartDataType(e){const t=this.chartColumnService.getColumn(e);return t?t.getColDef().chartDataType:void 0}isPivotActive(){return this.chartColumnService.isPivotActive()}createCellRange(e,...t){return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:t,startColumn:e===_e.DIMENSION||this.referenceCellRange.startColumn==null?t[0]:this.referenceCellRange.startColumn,type:e}}getAllColumnsFromRanges(){if(this.pivotChart)return Ct.convertToSet(this.chartColumnService.getAllDisplayedColumns());const e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push(...this.dimensionCellRange.columns),this.valueCellRange&&e.push(...this.valueCellRange.columns),Ct.convertToSet(e)}getRowIndexes(){let e=0,t=0;const{rangeService:r,valueCellRange:a,dimensionCellRange:i}=this,n=a||i;if(r&&n){e=r.getRangeStartRow(n).rowIndex;const o=r.getRangeEndRow(n);t=o.rowPinned==="bottom"?-1:o.rowIndex}return{startRow:e,endRow:t}}resetColumnState(){const{dimensionCols:e,valueCols:t}=this.chartColumnService.getChartColumns(),r=this.getAllColumnsFromRanges(),a=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];const i=Se(w(this.chartType));let n=!1,o=1;const l=this.suppliedCellRange.columns[0];e.forEach(d=>{const u=d.getColId()==="ag-Grid-AutoColumn";let g=!1;this.crossFiltering&&this.aggFunc?l.getColId()===d.getColId()&&(g=!0):g=u?!0:(!n||i)&&r.has(d),this.dimensionColState.push({column:d,colId:d.getColId(),displayName:this.getColDisplayName(d),selected:g,order:o++}),g&&(n=!0)});const c={colId:Ur.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!n,order:0};this.dimensionColState.unshift(c);const h=this.referenceCellRange.columns.filter(d=>t.has(d));t.forEach(d=>{a&&Ct.includes(this.referenceCellRange.columns,d)&&(d=h.shift()),this.valueColState.push({column:d,colId:d.getColId(),displayName:this.getColDisplayName(d),selected:r.has(d),order:o++})})}updateColumnState(e,t){const r=h=>h.colId===e.colId,{dimensionColState:a,valueColState:i}=this,n=a.find(r),o=i.find(r);if(n)if(Se(w(this.chartType)))n.selected=e.selected;else{const d=e.selected?n:a.filter(u=>u!==n).find(({selected:u})=>u);a.forEach(u=>u.selected=u===d)}else o&&(o.selected=e.selected);const l=[...a,...i],c=[];t||(l.forEach((h,d)=>{d===e.order&&c.push(e.colId),h.colId!==e.colId&&c.push(h.colId)}),l.forEach(h=>{const d=c.indexOf(h.colId);h.order=d>=0?c.indexOf(h.colId):l.length-1})),this.reorderColState()}reorderColState(){const e=(t,r)=>t.order-r.order;this.dimensionColState.sort(e),this.valueColState.sort(e)}setDimensionCellRange(e,t,r){this.dimensionCellRange=void 0;const a=Se(w(this.chartType));if(!r&&!this.dimensionColState.length){const l=new Array;e.forEach(c=>{l.length>0&&!a||!t.has(c)||l.push(c)}),l.length>0&&(this.dimensionCellRange=this.createCellRange(_e.DIMENSION,...l));return}let i=r?[r]:[];if(this.crossFiltering&&this.aggFunc){const l=this.suppliedCellRange.columns[0];i=this.dimensionColState.filter(c=>c.colId===l.getColId())}else(a||i.length===0||i.some(({column:l})=>!l||!e.has(l)))&&(i=this.dimensionColState.filter(l=>l.selected));const n=i.length===1?i[0].colId===Ur.DEFAULT_CATEGORY:!1,o=i.map(({column:l})=>l).filter(l=>l!=null);o.length>0&&!n&&(this.dimensionCellRange=this.createCellRange(_e.DIMENSION,...o))}setValueCellRange(e,t,r){this.valueCellRange=void 0;const a=[],i=ft(this.chartType);let n=0;if(e.forEach(o=>{r?(i==null||n<i)&&t.has(o)&&(a.push(o),n++):this.valueColState.some(l=>l.selected&&l.colId===o.getColId())&&a.push(o)}),a.length>0){let o=[];this.valueColState.length>0?o=this.valueColState.map(l=>l.colId):t.forEach(l=>o.push(l.getColId())),a.sort((l,c)=>o.indexOf(l.getColId())-o.indexOf(c.getColId())),this.valueCellRange=this.createCellRange(_e.VALUE,...a)}}resetCellRanges(e,t){if(!e&&!t)return;const{dimensionCols:r,valueCols:a}=this.chartColumnService.getChartColumns(),i=this.getAllColumnsFromRanges();e&&this.setDimensionCellRange(r,i),t&&this.setValueCellRange(a,i)}updateSelectedDimensions(e){const t=new Set(e.map(a=>a.getColId()));if(Se(w(this.chartType))){const a=this.dimensionColState.filter(n=>t.has(n.colId)),i=new Set(a.map(n=>n.colId));this.dimensionColState=this.dimensionColState.map(n=>A(T({},n),{selected:i.has(n.colId)}))}else{const i=(this.dimensionColState.find(n=>t.has(n.colId))||this.dimensionColState[0]).colId;this.dimensionColState=this.dimensionColState.map(n=>A(T({},n),{selected:n.colId===i}))}}syncDimensionCellRange(){const e=this.getSelectedDimensions();if(e.length===0)return;const t=e.map(({column:r})=>r).filter(r=>r!=null);t.length>0&&(this.dimensionCellRange=this.createCellRange(_e.DIMENSION,...t))}isComboChart(e){return ss(e??this.chartType)}};Ve.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",p([Qr("rangeService")],Ve.prototype,"rangeService",2),p([Qr("chartTranslationService")],Ve.prototype,"chartTranslationService",2),p([gn],Ve.prototype,"init",1);var q=Ve;import{_Theme as Ln,_ModuleSupport as Rn}from"ag-charts-community";import{_ as ls}from"@ag-grid-community/core";import{_Theme as cs}from"ag-charts-community";var hs=["number","category","grouped-category","log","time"];function _n(s){switch(s){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","grouped-category"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["grouped-category","number"];case"scatter":case"bubble":return["number","number"];default:return}}function Gn(s){return Array.isArray(s)?[]:{}}function Ne(s,e){return e.clone!==!1&&e.isMergeableObject(s)?De(Gn(s),s,e):s}function Fn(s,e,t){return s.concat(e).map(function(r){return Ne(r,t)})}function Vn(s,e){if(!e.customMerge)return De;const t=e.customMerge(s);return typeof t=="function"?t:De}function Nn(s){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(s).filter(function(e){return s.propertyIsEnumerable(e)}):[]}function ds(s){return Object.keys(s).concat(Nn(s))}function us(s,e){try{return e in s}catch{return!1}}function Bn(s,e){return us(s,e)&&!(Object.hasOwnProperty.call(s,e)&&Object.propertyIsEnumerable.call(s,e))}function Un(s={},e={},t){const r={};return t.isMergeableObject(s)&&ds(s).forEach(function(a){r[a]=Ne(s[a],t)}),ds(e).forEach(function(a){Bn(s,a)||(us(s,a)&&t.isMergeableObject(e[a])?r[a]=Vn(a,t)(s[a],e[a],t):r[a]=Ne(e[a],t))}),r}function Hn(s){return Wn(s)&&!zn(s)}function Wn(s){return!!s&&typeof s=="object"}function zn(s){const e=Object.prototype.toString.call(s);return e==="[object RegExp]"||e==="[object Date]"}function De(s,e,t){t=t||{},t.arrayMerge=t.arrayMerge||Fn,t.isMergeableObject=t.isMergeableObject||Hn,t.cloneUnlessOtherwiseSpecified=Ne;const r=Array.isArray(e),a=Array.isArray(s);return r===a?r?t.arrayMerge(s,e,t):Un(s,e,t):Ne(e,t)}function Te(s,e,t){if(s==null)return t;const r=e.split(".");let a=s;for(;r.length>1;)if(a=a[r.shift()],a==null)return t;const i=a[r[0]];return i??t}function Yn(s,e,t){if(s==null)return;const r=e.split(".");let a=s;r.forEach((i,n)=>{a[i]||(a[i]={}),n<r.length-1&&(a=a[i])}),a[r[r.length-1]]=t}function Kn(s,e,t,r,a){var i;const{chartOptionsToRestore:n,chartPaletteToRestore:o,chartThemeToRestore:l}=s,c=Zn(s),h=lr(c),d=h?{baseTheme:c}:(i=ps(s,c))!=null?i:{},u=s.getGridOptionsChartThemeOverrides(),g=s.apiChartThemeOverrides,m=w(s.chartType),f=s.crossFiltering?Xn(e,s,m):void 0,v=[h?qn(s,t,(()=>{const S=P=>P?Object.keys(P).some(M=>Te(P[M],"title.enabled",!1)):!1;return S(u)||S(g)})()):void 0,r,f,u,g,T({},n??{}),a].filter(S=>!!S).reduce((S,P)=>({baseTheme:S,overrides:P}),d);if(o&&c===l){const S=cs.getChartTheme(d).palette;$n(o,S)||(v.palette=o)}return v}function $n(s,e){const t=(r,a)=>r.length!==a.length?!1:r.every((i,n)=>i===a[n]);return t(s.fills,e.fills)&&t(s.strokes,e.strokes)}function lr(s){return ls.includes(Object.keys(cs.themes),s)}function Xn(s,e,t){const r={listeners:{legendItemClick:a=>{s.getChart().series.forEach(n=>{n.toggleSeriesItem(a.itemId,a.enabled),n.toggleSeriesItem(`${a.itemId}-filtered-out`,a.enabled)})}}};return{[t]:{tooltip:{delay:500},legend:r,listeners:{click:a=>e.crossFilterCallback(a,!0)}}}}var jn=hs.reduce((s,e)=>A(T({},s),{[e]:{title:{_enabledFromTheme:!0}}}),{});function qn(s,e,t){const r=s.getExtraPaddingDirections();return{common:A(T({},e?{animation:{duration:500}}:void 0),{axes:jn,padding:{top:!t&&r.includes("top")?40:20,right:r.includes("right")?30:20,bottom:r.includes("bottom")?40:20,left:r.includes("left")?30:20}}),pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}},donut:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}}function Zn(s){let e=s.getChartThemeName();const t=s.getChartThemes();return ls.includes(t,e)||(e=t[0]),e}function ps(s,e){const{customChartThemes:t}=s,r=t&&t[e];return r||console.warn(`AG Grid: no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`),r}import{_ as Jn}from"@ag-grid-community/core";import{_ModuleSupport as Qn}from"ag-charts-community";var ke=s=>e=>e==null?!0:s(e),gs=s=>typeof s=="string",ms=s=>typeof s=="boolean",eo=s=>typeof s=="object",Z=(s,e)=>t=>`AG Grid - unable to update chart as invalid params supplied:  \`${s}: ${t}\`, expected ${e}.`,Cs=s=>`${s} is not supported in AG Charts Community (either 'ag-grid-charts-enterprise' or '@ag-grid-enterprise/charts-enterprise' hasn't been loaded). See https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/ for more details.`,R=class _{static isEnterprise(){return Qn.enterpriseModule.isEnterprise}static isValidChartType(e){return!!is(e)||ss(e)}static isLegacyChartType(e){return _.legacyChartTypes.includes(e)}static validateUpdateParams(e){switch(e.type){case"rangeChartUpdate":return _.validateUpdateRangeChartParams(e);case"pivotChartUpdate":return _.validateUpdatePivotChartParams(e);case"crossFilterChartUpdate":return _.validateUpdateCrossFilterChartParams(e);default:return console.warn(`AG Grid - Invalid value supplied for 'type': ${e.type}. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.`),!1}}static validateCreateParams(e){return _.validateProperties(e,[_.enterpriseChartTypeValidation,_.switchCategorySeriesValidation])}static validateUpdateRangeChartParams(e){const t=[..._.commonUpdateValidations,_.enterpriseChartTypeValidation,..._.cellRangeValidations,{property:"seriesChartTypes",validationFn:r=>r===void 0||Array.isArray(r)&&r.every(eo),warnMessage:Z("seriesChartTypes","Array of SeriesChartType")}];return _.validateProperties(e,t,[..._.baseUpdateChartParams,"cellRange","suppressChartRanges","switchCategorySeries","aggFunc","seriesChartTypes","seriesGroupType"],"UpdateRangeChartParams")}static validateUpdatePivotChartParams(e){const t=[..._.commonUpdateValidations];return _.validateProperties(e,t,[..._.baseUpdateChartParams],"UpdatePivotChartParams")}static validateUpdateCrossFilterChartParams(e){const t=[..._.commonUpdateValidations,..._.cellRangeValidations];return _.validateProperties(e,t,[..._.baseUpdateChartParams,"cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")}static validateProperties(e,t,r,a){let i;for(const n of t){const{property:o,validationFn:l,warnMessage:c,warnIfFixed:h}=n;if(o in e){const d=e[o],u=l(d);if(u===!0)continue;if(u===!1)return console.warn(c(d)),!1;i=i||T({},e),i[o]=u,h&&console.warn(c(d))}}if(r){for(const n in e)if(!r.includes(n))return console.warn(`AG Grid - Unexpected property supplied. ${a} does not contain: \`${n}\`.`),!1}return i||!0}};R.legacyChartTypes=["doughnut"],R.baseUpdateChartParams=["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"],R.validateChartType=ke(s=>{if(R.isValidChartType(s))return!0;if(R.isLegacyChartType(s)){const e=Fe(s);return Jn.warnOnce(`The chart type '${s}' has been deprecated. Please use '${e}' instead.`),e}return!1}),R.validateAgChartThemeOverrides=ke(s=>typeof s=="object"),R.validateChartParamsCellRange=ke(s=>typeof s=="object"),R.validateAggFunc=ke(s=>typeof s=="string"||typeof s=="function"),R.enterpriseChartTypeValidation={property:"chartType",validationFn:ke(s=>R.isEnterprise()||!s||!En(s)),warnMessage:s=>Cs(`The '${s}' chart type`)},R.switchCategorySeriesValidation={property:"switchCategorySeries",validationFn:ke(s=>{if(!s||R.isEnterprise())return!0}),warnMessage:()=>Cs("'switchCategorySeries' has been ignored as it"),warnIfFixed:!0},R.commonUpdateValidations=[{property:"chartId",validationFn:gs,warnMessage:Z("chartId","string")},{property:"chartType",validationFn:R.validateChartType,warnMessage:Z("chartType","ChartType")},{property:"chartThemeName",validationFn:gs,warnMessage:Z("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:R.validateAgChartThemeOverrides,warnMessage:Z("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:ms,warnMessage:Z("unlinkChart","boolean")}],R.cellRangeValidations=[{property:"cellRange",validationFn:R.validateChartParamsCellRange,warnMessage:Z("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:ms,warnMessage:Z("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:R.validateAggFunc,warnMessage:Z("aggFunc","string or IAggFunc")},R.switchCategorySeriesValidation];var fs=R,vs=["ag-default","ag-material","ag-sheets","ag-polychroma","ag-vivid"],J=class Ee extends dn{constructor(e){super(),this.model=e,this.isEnterprise=()=>Rn.enterpriseModule.isEnterprise}init(){this.setChartRange(),this.addManagedListener(this.eventService,j.EVENT_RANGE_SELECTION_CHANGED,e=>{e.id&&e.id===this.model.chartId&&this.updateForRangeChange()}),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,j.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,j.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,j.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,j.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,j.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,j.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))}update(e){if(!this.validUpdateType(e))return!1;const t=fs.validateUpdateParams(e);if(!t)return!1;const r=t===!0?e:t;return this.applyValidatedChartParams(r),!0}applyValidatedChartParams(e){var t,r,a,i,n,o,l,c,h;const{chartId:d,chartType:u,chartThemeName:g,unlinkChart:m}=e,f={chartId:d,pivotChart:this.model.pivotChart,chartType:u??this.model.chartType,chartThemeName:g??this.model.chartThemeName,unlinkChart:m??this.model.unlinked,cellRange:this.model.suppliedCellRange,switchCategorySeries:this.model.switchCategorySeries,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1};let C=T({},f);switch(e.type){case"rangeChartUpdate":C.cellRange=(t=this.createCellRange(e))!=null?t:this.model.suppliedCellRange,C.switchCategorySeries=(r=e.switchCategorySeries)!=null?r:this.model.switchCategorySeries,C.aggFunc=(a=e.aggFunc)!=null?a:this.model.aggFunc,C.seriesChartTypes=e.seriesChartTypes,C.suppressChartRanges=(i=e.suppressChartRanges)!=null?i:this.model.suppressChartRanges,C.seriesGroupType=(n=e.seriesGroupType)!=null?n:this.model.seriesGroupType;break;case"crossFilterChartUpdate":C.cellRange=(o=this.createCellRange(e))!=null?o:this.model.suppliedCellRange,C.switchCategorySeries=!1,C.aggFunc=(l=e.aggFunc)!=null?l:this.model.aggFunc,C.crossFiltering=!0,C.suppressChartRanges=(c=e.suppressChartRanges)!=null?c:this.model.suppressChartRanges;break;case"pivotChartUpdate":C.switchCategorySeries=!1;break}this.model.updateModel(C),C.unlinkChart||C.suppressChartRanges?(h=this.rangeService)==null||h.setCellRanges([]):this.setChartRange()}updateForGridChange(e){if(this.model.unlinked)return;const{maintainColState:t,setColsFromRange:r}=e??{};this.model.updateCellRanges({maintainColState:t,setColsFromRange:r}),this.model.updateData(),this.setChartRange()}updateForDataChange(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())}updateForRangeChange(){this.updateForGridChange({setColsFromRange:!0}),this.raiseChartRangeSelectionChangedEvent()}updateForPanelChange(e){this.model.updateCellRanges(e),this.model.updateData(),e.skipAnimation&&this.getChartProxy().getChartRef().skipAnimations(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()}updateThemeOverrides(e){this.chartProxy.updateThemeOverrides(e)}getChartUpdateParams(e){const r=this.getSelectedValueColState().map(o=>({colId:o.colId,displayName:o.displayName})),a=this.getChartData(),i=this.getSelectedDimensions(),n={data:a,groupData:this.model.groupChartData,grouping:this.isGrouping(),categories:i.map(o=>{var l;return{id:o.colId,name:o.displayName,chartDataType:(l=this.model.categoryAxisType)!=null?l:this.model.getChartDataType(o.colId)}}),fields:r,chartId:this.getChartId(),getCrossFilteringContext:()=>({lastSelectedChartId:"xxx"}),seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:e,seriesGroupType:this.model.seriesGroupType};return this.isCategorySeriesSwitched()?this.invertCategorySeriesParams(n):n}invertCategorySeriesParams(e){const[t]=e.categories,r=[{id:q.DEFAULT_CATEGORY,name:""}],a=e.data.map((n,o)=>{const l=`${t.id}:${o}`,c=n[t.id],h=c==null?"":String(c);return{colId:l,displayName:h}}),i=e.fields.map(n=>{const o={[q.DEFAULT_CATEGORY]:n.displayName};for(const[l,c]of e.data.entries()){const h=`${t.id}:${l}`,d=c[n.colId];o[h]=d}return o});return A(T({},e),{categories:r,fields:a,data:i})}getChartModel(){const e=this.model.pivotChart?"pivot":"range",t=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:e,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),switchCategorySeries:this.model.switchCategorySeries,suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:t,seriesGroupType:this.model.seriesGroupType}}getChartId(){return this.model.chartId}getChartData(){return this.model.chartData}getChartType(){return this.model.chartType}setChartType(e){this.updateMultiSeriesAndCategory(this.model.chartType,e),this.model.chartType=e,this.model.comboChartModel.updateSeriesChartTypes(),this.model.switchCategorySeries=!1,this.model.categoryAxisType=void 0,this.model.seriesGroupType=void 0,this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()}isCategorySeriesSwitched(){return this.model.switchCategorySeries&&!this.model.isGrouping()}switchCategorySeries(e){os(this.getChartType())&&(this.model.switchCategorySeries=e,this.raiseChartModelUpdateEvent())}getAggFunc(){return this.model.aggFunc}setAggFunc(e,t){this.model.aggFunc!==e&&(this.model.aggFunc=e,!t&&(this.model.updateData(),this.raiseChartModelUpdateEvent()))}updateMultiSeriesAndCategory(e,t){var r,a;const i=(h,d)=>{let u=0;for(const g of h)g.selected&&(u>=d?g.selected=!1:u++);u===0&&(h[0].selected=!0)},n=or(t),o=ft(t),l=n!=null&&((r=or(e))!=null?r:100)>(n??100),c=o!=null&&((a=ft(e))!=null?a:100)>(o??100);l&&i(this.model.dimensionColState,n),c&&i(this.model.valueColState,o),(l||c)&&(this.model.resetCellRanges(l,c),this.setChartRange(!0))}setChartThemeName(e,t){this.model.chartThemeName=e,t||(this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent())}getChartThemeName(){return this.model.chartThemeName}isPivotChart(){return this.model.pivotChart}isPivotMode(){return this.model.isPivotMode()}isGrouping(){return this.model.isGrouping()}isCrossFilterChart(){return this.model.crossFiltering}getThemeNames(){return this.gos.get("chartThemes")||vs}getThemes(){return this.getThemeNames().map(t=>{const a=lr(t)?t:this.chartProxy.lookupCustomChartTheme(t);return Ln.getChartTheme(a)})}getPalettes(){return this.getThemes().map(t=>t.palette)}getThemeTemplateParameters(){return this.getThemes().map(t=>t.getTemplateParameters())}getValueColState(){return this.model.valueColState.map(this.displayNameMapper.bind(this))}getSelectedValueColState(){return this.getValueColState().filter(e=>e.selected)}getSelectedDimensions(){return this.model.getSelectedDimensions()}displayNameMapper(e){const t=this.model.columnNames[e.colId];return e.displayName=t?t.join(" - "):this.model.getColDisplayName(e.column),e}getColStateForMenu(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}}setChartRange(e=!1){this.rangeService&&!this.model.suppressChartRanges&&!this.model.unlinked&&this.rangeService.setCellRanges(this.getCellRanges()),e||this.raiseChartModelUpdateEvent()}detachChartRange(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange(),this.dispatchEvent({type:Ee.EVENT_CHART_LINKED_CHANGED})}setChartProxy(e){this.chartProxy=e}getChartProxy(){return this.chartProxy}isActiveXYChart(){return cn.includes(["scatter","bubble"],this.getChartType())}isChartLinked(){return!this.model.unlinked}customComboExists(){const e=this.model.comboChartModel.savedCustomSeriesChartTypes;return e&&e.length>0}getSeriesChartTypes(){return this.model.comboChartModel.seriesChartTypes}isComboChart(e){return this.model.isComboChart(e)}updateSeriesChartType(e,t,r){const a=this.model.comboChartModel.seriesChartTypes.find(i=>i.colId===e);if(a){const i=this.model.chartType!=="customCombo";i&&(this.model.chartType="customCombo");const n=a.chartType;t!=null&&(a.chartType=t),r!=null&&(a.secondaryAxis=r),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),i&&this.dispatchEvent({type:Ee.EVENT_CHART_TYPE_CHANGED}),n!==t&&this.dispatchEvent({type:Ee.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}}getActiveSeriesChartTypes(){const e=this.getSelectedValueColState().map(t=>t.colId);return this.getSeriesChartTypes().filter(t=>e.includes(t.colId))}getChartSeriesTypes(e){const t=e??this.getChartType();return this.isComboChart(t)?["line","bar","area"]:[w(t)]}getChartSeriesType(){const e=this.getSeriesChartTypes();if(e.length===0)return"bar";const t=e[0].chartType;return t==="columnLineCombo"?"bar":t==="areaColumnCombo"?"area":w(t)}getCellRanges(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter(e=>e)}createCellRange(e){var t;return e.cellRange&&((t=this.rangeService)==null?void 0:t.createPartialCellRangeFromRangeParams(e.cellRange,!0))}validUpdateType(e){var t;if(!e.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;const r={"Range Chart":()=>!this.isPivotChart()&&!this.isCrossFilterChart(),"Pivot Chart":()=>this.isPivotChart(),"Cross Filter Chart":()=>this.isCrossFilterChart()},a=(t=Object.keys(r).find(n=>r[n]()))!=null?t:"Range Chart",i=e.type===`${a[0].toLowerCase()}${a.slice(1).replace(/ /g,"")}Update`;return i||console.warn(`AG Grid - Unable to update chart as a '${e.type}' update type is not permitted on a ${a}.`),i}getCellRangeParams(){const e=this.getCellRanges(),t=e[0],r=t&&t.startRow||null,a=t&&t.endRow||null;return{rowStartIndex:r&&r.rowIndex,rowStartPinned:r&&r.rowPinned,rowEndIndex:a&&a.rowIndex,rowEndPinned:a&&a.rowPinned,columns:e.reduce((i,n)=>i.concat(n.columns.map(o=>o.getId())),[])}}setCategoryAxisType(e){this.model.categoryAxisType=e,this.raiseChartModelUpdateEvent()}getSeriesGroupType(){var e;return(e=this.model.seriesGroupType)!=null?e:this.chartProxy.getSeriesGroupType()}setSeriesGroupType(e){this.model.seriesGroupType=e,this.raiseChartModelUpdateEvent()}raiseChartModelUpdateEvent(){const e={type:Ee.EVENT_CHART_MODEL_UPDATE};this.dispatchEvent(e)}raiseChartUpdatedEvent(){const e={type:Ee.EVENT_CHART_UPDATED};this.dispatchEvent(e)}raiseChartApiUpdateEvent(){const e={type:Ee.EVENT_CHART_API_UPDATE};this.dispatchEvent(e)}raiseChartOptionsChangedEvent(){const{chartId:e,chartType:t}=this.getChartModel(),r={type:j.EVENT_CHART_OPTIONS_CHANGED,chartId:e,chartType:t,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(r)}raiseChartRangeSelectionChangedEvent(){const e={type:j.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(e)}destroy(){super.destroy(),this.rangeService&&this.rangeService.setCellRanges([])}};J.EVENT_CHART_UPDATED="chartUpdated",J.EVENT_CHART_API_UPDATE="chartApiUpdate",J.EVENT_CHART_MODEL_UPDATE="chartModelUpdate",J.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",J.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",J.EVENT_CHART_LINKED_CHANGED="chartLinkedChanged",p([hn("rangeService")],J.prototype,"rangeService",2),p([un],J.prototype,"init",1);var W=J;import{AgCheckbox as to,AgGroupComponent as ro,AgRadioButton as so,AgSelect as ao,AgToggleButton as io,Autowired as no,DragAndDropService as oo,PostConstruct as lo,_ as co}from"@ag-grid-community/core";import{AgSelect as ho,Autowired as ys,Component as uo,DragSourceType as Ss,Events as po,_ as vt}from"@ag-grid-community/core";import{AgSelect as go,Component as mo,DragAndDropService as Ts,DragSourceType as Ps,PillDragComp as Co,PillDropZonePanel as fo,PostConstruct as bs,_ as As}from"@ag-grid-community/core";var cr=class Ha extends mo{constructor(e){super(Ha.TEMPLATE),this.config=e??{};const{selectedValueList:t,valueFormatter:r,valueList:a}=this.config;this.selectedValues=t??[],this.valueList=a??[],this.valueFormatter=r??(i=>As.escapeString(i))}init(){const{ariaLabel:e,onValuesChange:t,dragSourceId:r}=this.config;this.dropZonePanel=this.createManagedBean(new Ms({getValues:()=>this.selectedValues,setValues:i=>this.updateValues(i),isDraggable:()=>this.selectedValues.length>1},i=>this.valueFormatter(i),e,r)),this.getGui().appendChild(this.dropZonePanel.getGui()),this.initSelect(),t!=null&&(this.onValuesChange=t)}setValues(e,t){const{added:r,removed:a,updated:i}=this.getChanges(this.valueList,e);let n=!1;return(r.length||a.length||i.length)&&(n=!0),this.valueList=e,this.updateValues(t,n,!0),this}setValueFormatter(e){return this.valueFormatter=e,this}initSelect(){const e=this.createSelectOptions();if(!e.length)return!1;const{selectPlaceholder:t}=this.config;return this.eSelect=this.createBean(new go({options:e,placeholder:t,onValueChange:r=>this.addValue(r),pickerIcon:"chartsMenuAdd"})),this.getGui().appendChild(this.eSelect.getGui()),!0}createSelectOptions(){let e=[];const{maxSelection:t}=this.config;return t&&this.selectedValues.length>=t||this.valueList.forEach(r=>{this.selectedValues.includes(r)||e.push({value:r,text:this.valueFormatter(r)})}),e}addValue(e){this.dropZonePanel.addItem(e)}updateValues(e,t,r){var a,i,n,o,l;const c=this.selectedValues;this.selectedValues=e;const h=this.getChanges(c,e),d=t||h.added.length||h.removed.length,u=this.gos.getActiveDomElement(),g=(a=this.eSelect)==null?void 0:a.getGui().contains(u),m=(i=this.dropZonePanel)==null?void 0:i.getGui().contains(u);r||(n=this.onValuesChange)==null||n.call(this,h);const f=d?!this.refreshSelect():!1;this.dropZonePanel.refreshGui(),d&&g&&(f?this.dropZonePanel.focusList(!0):(o=this.eSelect)==null||o.getFocusableElement().focus()),m&&!e.length&&((l=this.eSelect)==null||l.getFocusableElement().focus())}getChanges(e,t){const r=t.filter(n=>!e.includes(n)),a=e.filter(n=>!t.includes(n)),i=t.filter((n,o)=>e[o]!==n);return{added:r,removed:a,updated:i,selected:t}}refreshSelect(){if(!this.eSelect)return this.initSelect();const e=this.createSelectOptions();return e.length?(this.eSelect.clearOptions().addOptions(e).setValue(void 0,!0),!0):(As.removeFromParent(this.eSelect.getGui()),this.eSelect=this.destroyBean(this.eSelect),!1)}destroy(){this.destroyBean(this.eSelect),super.destroy()}};cr.TEMPLATE='<div class="ag-pill-select" role="presentation"></div>',p([bs],cr.prototype,"init",1);var xs=cr,vo=class extends Co{constructor(s,e,t,r,a,i){super(e,t,!1),this.value=s,this.valueFormatter=r,this.draggable=a,this.sourceId=i}getItem(){return this.value}getDisplayName(){return this.valueFormatter(this.value)}getAriaDisplayName(){return this.getDisplayName()}getTooltip(){}createGetDragItem(){return()=>({value:this.value})}getDragSourceType(){return Ps.ChartPanel}getDragSourceId(){return this.sourceId}isDraggable(){return this.draggable}},Ms=class extends fo{constructor(s,e,t,r){super(!1),this.model=s,this.valueFormatter=e,this.ariaLabel=t,this.sourceId=r}postConstruct(){super.init()}isItemDroppable(s,e){return this.isSourceEventFromTarget(e)||this.sourceId!=null&&this.sourceId===e.dragSource.sourceId}updateItems(s){this.model.setValues(s)}getExistingItems(){return this.model.getValues()}getIconName(){return this.isPotentialDndItems()?Ts.ICON_MOVE:Ts.ICON_NOT_ALLOWED}getAriaLabel(){return this.ariaLabel}createPillComponent(s,e,t){return new vo(s,e,t,this.valueFormatter,this.model.isDraggable(),this.sourceId)}getItems(s){return[s.value]}isInterestedIn(s){return s===Ps.ChartPanel}};p([bs],Ms.prototype,"postConstruct",1);var yt=class extends uo{constructor(s,e,t,r,a){super(a),this.chartController=s,this.autoScrollService=e,this.allowMultipleSelection=t,this.maxSelection=r,this.columnComps=new Map}refreshColumnComps(s){return vt.areEqual(vt.keys(this.columnComps),s.map(({colId:e})=>e))?(s.forEach(e=>{this.columnComps.get(e.colId).setValue(e.selected,!0)}),!0):!1}createGroup(s,e,t,r,a){if(this.allowMultipleSelection){const i=s.filter(n=>n.selected);this.valuePillSelect=this.groupComp.createManagedBean(new xs({valueList:s,selectedValueList:i,valueFormatter:e,selectPlaceholder:this.chartTranslationService.translate(t),dragSourceId:r,onValuesChange:n=>this.onValueChange(n),maxSelection:this.maxSelection})),this.groupComp.addItem(this.valuePillSelect)}else{const i=this.createValueSelectParams(s);i.onValueChange=n=>{s.forEach(o=>{o.selected=!1}),n.selected=!0,n.colId===q.DEFAULT_CATEGORY&&this.chartController.setAggFunc(void 0,!0),this.chartController.updateForPanelChange({updatedColState:n,skipAnimation:a?.()})},this.valueSelect=this.groupComp.createManagedBean(new ho(i)),this.groupComp.addItem(this.valueSelect)}}refreshValueSelect(s){if(!this.valueSelect)return;const{options:e,value:t}=this.createValueSelectParams(s);this.valueSelect.clearOptions().addOptions(e).setValue(t,!0)}createValueSelectParams(s){let e;return{options:s.map(r=>{var a;const i=(a=r.displayName)!=null?a:"";return r.selected&&(e=r),{value:r,text:i}}),value:e}}onDragging(s){const e=this.checkHoveredItem(s);if(!e)return;this.lastDraggedColumn=s.dragItem.columns[0];const{comp:t,position:r}=e,{comp:a,position:i}=this.lastHoveredItem||{};if(t===a&&r===i)return;this.autoScrollService.check(s.event),this.clearHoveredItems(),this.lastHoveredItem={comp:t,position:r},t.getGui().classList.add("ag-list-item-hovered",`ag-item-highlight-${r}`)}checkHoveredItem(s){if(vt.missing(s.vDirection))return null;const e=s.event;for(const t of this.columnComps.values()){const r=t.getGui();if(!r.querySelector(".ag-chart-data-column-drag-handle"))continue;const a=r.getBoundingClientRect();if(e.clientY>=a.top&&e.clientY<=a.bottom){const n=r.clientHeight,o=e.clientY>a.top+n/2?"bottom":"top";return{comp:t,position:o}}}return null}onDragLeave(){this.clearHoveredItems()}onDragStop(){if(this.lastHoveredItem){const{dimensionCols:s,valueCols:e}=this.chartController.getColStateForMenu(),t=[...s,...e].find(r=>r.column===this.lastDraggedColumn);if(t){let r=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);this.lastHoveredItem.position==="bottom"&&r++,t.order=r,this.chartController.updateForPanelChange({updatedColState:t})}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()}clearHoveredItems(){this.columnComps.forEach(s=>{s.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")}),this.lastHoveredItem=void 0}addDragHandle(s,e){const t=vt.createIconNoSpan("columnDrag",this.gos);t.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),s.getGui().insertAdjacentElement("beforeend",t);const r={type:Ss.ChartPanel,eElement:t,dragItemName:e.displayName,getDragItem:()=>({columns:[e.column]}),onDragStopped:()=>this.onDragStop()};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(r))}addChangeListener(s,e){this.addManagedListener(s,po.EVENT_FIELD_VALUE_CHANGED,()=>{e.selected=s.getValue(),this.chartController.updateForPanelChange({updatedColState:e})})}isInterestedIn(s){return s===Ss.ChartPanel}onValueChange({added:s,updated:e,removed:t,selected:r}){let a,i;const n=()=>{r.forEach((o,l)=>{o.order=l}),i=!0};s.length?(a=s[0],a.selected=!0,n()):t.length?(a=t[0],a.selected=!1):e.length&&(n(),a=e[0]),a&&this.chartController.updateForPanelChange({updatedColState:a,resetOrder:i})}destroy(){this.valuePillSelect=void 0,this.valueSelect=void 0,super.destroy()}};p([ys("dragAndDropService")],yt.prototype,"dragAndDropService",2),p([ys("chartTranslationService")],yt.prototype,"chartTranslationService",2);var yo="sum",St=class Wa extends yt{constructor(e,t,r,a,i,n){super(e,t,a,void 0,Wa.TEMPLATE),this.title=r,this.dimensionCols=i,this.isOpen=n}init(){this.groupComp=this.createBean(new ro({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.chartMenuService.isLegacyFormat()?(this.createLegacyCategoriesGroup(this.dimensionCols),this.clearAggFuncControls()):(this.createCategoriesGroup(this.dimensionCols),this.createAggFuncControls(this.dimensionCols)),this.getGui().appendChild(this.groupComp.getGui())}refresh(e){var t;this.chartMenuService.isLegacyFormat()?this.refreshColumnComps(e)||this.recreate(e):((t=this.valuePillSelect)==null||t.setValues(e,e.filter(r=>r.selected)),this.refreshValueSelect(e),this.refreshAggFuncControls(e,this.chartController.getAggFunc()))}recreate(e){this.isOpen=this.groupComp.isExpanded(),co.clearElement(this.getGui()),this.destroyBean(this.groupComp),this.dimensionCols=e,this.init()}createCategoriesGroup(e){this.createGroup(e,t=>{var r;return(r=t.displayName)!=null?r:""},"categoryAdd","categorySelect",()=>!this.chartController.getAggFunc())}createLegacyCategoriesGroup(e){const t=`chartDimension${this.groupComp.getCompId()}`,r=this.allowMultipleSelection;if(e.forEach(a=>{var i;const n={label:(i=a.displayName)!=null?i:"",value:a.selected,inputName:t},o=this.groupComp.createManagedBean(r?(()=>{const l=new to(n);return l.addCssClass("ag-data-select-checkbox"),l})():new so(n));this.addChangeListener(o,a),this.groupComp.addItem(o),this.columnComps.set(a.colId,o),r&&this.addDragHandle(o,a)}),r){const a=this.groupComp.getGui(),i={getIconName:()=>oo.ICON_MOVE,getContainer:()=>a,onDragging:n=>this.onDragging(n),onDragLeave:()=>this.onDragLeave(),isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(i),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(i))}}createAggFuncControls(e){const t=this.chartController.getAggFunc();this.groupComp.addItem(this.aggFuncToggle=this.createBean(new io({label:this.chartTranslationService.translate("aggregate"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:t!=null,onValueChange:r=>{var a,i;const n=r?yo:void 0;this.chartController.setAggFunc(n),(a=this.aggFuncSelect)==null||a.setValue(n,!0),(i=this.aggFuncSelect)==null||i.setDisplayed(n!=null)}}))),this.groupComp.addItem(this.aggFuncSelect=this.createBean(new ao({options:[{value:"sum",text:this.chartTranslationService.translate("sum")},{value:"first",text:this.chartTranslationService.translate("first")},{value:"last",text:this.chartTranslationService.translate("last")},{value:"min",text:this.chartTranslationService.translate("min")},{value:"max",text:this.chartTranslationService.translate("max")},{value:"count",text:this.chartTranslationService.translate("count")},{value:"avg",text:this.chartTranslationService.translate("avg")}],value:typeof t=="string"?t:void 0,onValueChange:r=>{this.chartController.setAggFunc(r)}}))),this.refreshAggFuncControls(e,t)}refreshAggFuncControls(e,t){var r,a,i,n;const l=e.filter(c=>c.selected).some(c=>c.colId!==q.DEFAULT_CATEGORY);(r=this.aggFuncToggle)==null||r.setValue(t!=null),(a=this.aggFuncSelect)==null||a.setValue(typeof t=="string"?t:void 0,!0),(i=this.aggFuncToggle)==null||i.setDisplayed(l),(n=this.aggFuncSelect)==null||n.setDisplayed(l&&t!=null)}clearAggFuncControls(){this.aggFuncToggle=this.aggFuncToggle&&this.destroyBean(this.aggFuncToggle),this.aggFuncSelect=this.aggFuncSelect&&this.destroyBean(this.aggFuncSelect)}destroy(){this.clearAggFuncControls(),this.groupComp=this.destroyBean(this.groupComp),super.destroy()}};St.TEMPLATE='<div id="categoriesGroup"></div>',p([no("chartMenuService")],St.prototype,"chartMenuService",2),p([lo],St.prototype,"init",1);var So=St;import{AgCheckbox as To,AgGroupComponent as Po,AgToggleButton as bo,Autowired as Ao,DragAndDropService as xo,PostConstruct as Mo,_ as Eo}from"@ag-grid-community/core";var Tt=class za extends yt{constructor(e,t,r,a,i,n,o,l){super(e,t,i,n,za.TEMPLATE),this.chartOptionsService=r,this.title=a,this.valueCols=o,this.isOpen=l}init(){if(this.groupComp=this.createBean(new Po({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.chartController.isActiveXYChart()){const e=this.groupComp.createManagedBean(new bo({label:this.chartTranslationService.translate("paired"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.chartOptionsService.getPairedMode(),onValueChange:t=>{this.chartOptionsService.setPairedMode(!!t),this.chartController.updateForGridChange({maintainColState:!0})}}));this.groupComp.addItem(e)}this.chartMenuService.isLegacyFormat()?this.createLegacySeriesGroup(this.valueCols):this.createSeriesGroup(this.valueCols),this.getGui().appendChild(this.groupComp.getGui())}refresh(e){var t,r;if(this.chartMenuService.isLegacyFormat())if(this.refreshColumnComps(e)){if(this.chartController.isActiveXYChart()){const i=this.generateGetSeriesLabel(e);e.forEach(n=>{this.columnComps.get(n.colId).setLabel(i(n))})}}else this.recreate(e);else(t=this.valuePillSelect)==null||t.setValueFormatter(this.generateGetSeriesLabel(e)),(r=this.valuePillSelect)==null||r.setValues(e,e.filter(a=>a.selected)),this.refreshValueSelect(e)}recreate(e){this.isOpen=this.groupComp.isExpanded(),Eo.clearElement(this.getGui()),this.destroyBean(this.groupComp),this.valueCols=e,this.init()}createSeriesGroup(e){this.createGroup(e,this.generateGetSeriesLabel(e),"seriesAdd","seriesSelect")}createLegacySeriesGroup(e){const t=this.generateGetSeriesLabel(e);e.forEach(i=>{const n=t(i),o=this.groupComp.createManagedBean(new To({label:n,value:i.selected}));o.addCssClass("ag-data-select-checkbox"),this.addChangeListener(o,i),this.groupComp.addItem(o),this.columnComps.set(i.colId,o),this.addDragHandle(o,i)});const r=this.groupComp.getGui(),a={getIconName:()=>xo.ICON_MOVE,getContainer:()=>r,onDragging:i=>this.onDragging(i),onDragLeave:()=>this.onDragLeave(),isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(a),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(a))}generateGetSeriesLabel(e){if(!this.chartController.isActiveXYChart())return n=>{var o;return(o=n.displayName)!=null?o:""};const t=e.filter(n=>n.selected),r=this.chartController.getChartType()==="bubble",a=this.chartOptionsService.getPairedMode(),i=new Map;return i.set(0,"X"),i.set(1,"Y"),i.set(2,"size"),n=>{var o;const l=(o=n.displayName)!=null?o:"";if(!n.selected)return l;const c=t.indexOf(n);if(c===-1)return l;let h;return a?h=i.get(c%(r?3:2)):c===0?h="X":h=r&&c%2===0?"size":"Y",`${l} (${h})`}}destroy(){this.groupComp=this.destroyBean(this.groupComp),super.destroy()}};Tt.TEMPLATE='<div id="seriesGroup"></div>',p([Ao("chartMenuService")],Tt.prototype,"chartMenuService",2),p([Mo],Tt.prototype,"init",1);var wo=Tt;import{AgCheckbox as Oo,AgGroupComponent as Es,AgSelect as Do,Autowired as ko,Component as Io,PostConstruct as Lo,_ as ws}from"@ag-grid-community/core";var Pt=class Ya extends Io{constructor(e,t,r){super(Ya.TEMPLATE),this.chartController=e,this.columns=t,this.isOpen=r,this.selectedColIds=[],this.chartTypeComps=new Map,this.secondaryAxisComps=new Map}init(){this.createSeriesChartTypeGroup(this.columns)}refresh(e){ws.areEqual(this.getValidColIds(e),this.selectedColIds)?this.refreshComps():this.recreate(e)}recreate(e){this.isOpen=this.seriesChartTypeGroupComp.isExpanded(),ws.clearElement(this.getGui()),this.destroyBean(this.seriesChartTypeGroupComp),this.columns=e,this.selectedColIds=[],this.clearComps(),this.init()}getValidColIds(e){const t=this.chartController.getSeriesChartTypes();return e.filter(r=>r.selected&&!!t.filter(a=>a.colId===r.colId)[0]).map(({colId:r})=>r)}createSeriesChartTypeGroup(e){this.seriesChartTypeGroupComp=this.createBean(new Es({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen}));const t=this.chartController.getSeriesChartTypes();e.forEach(r=>{if(!r.selected)return;const a=t.filter(d=>d.colId===r.colId)[0];if(!a)return;this.selectedColIds.push(r.colId);const i=this.seriesChartTypeGroupComp.createManagedBean(new Es({title:r.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),n=d=>["groupedColumn","stackedColumn","stackedArea"].includes(d),o=this.seriesChartTypeGroupComp.createManagedBean(new Oo({label:this.chartTranslationService.translate("secondaryAxis"),labelWidth:"flex",disabled:n(a.chartType),value:!!a.secondaryAxis,onValueChange:d=>this.chartController.updateSeriesChartType(r.colId,void 0,d)}));i.addItem(o);const l=d=>this.chartTranslationService.translate(d),c=[{value:"line",text:l("line")},{value:"area",text:l("area")},{value:"stackedArea",text:l("stackedArea")},{value:"groupedColumn",text:l("groupedColumn")},{value:"stackedColumn",text:l("stackedColumn")}],h=i.createManagedBean(new Do({labelAlignment:"left",labelWidth:"flex",options:c,value:a.chartType,onValueChange:d=>this.chartController.updateSeriesChartType(r.colId,d)}));i.addItem(h),this.seriesChartTypeGroupComp.addItem(i),this.chartTypeComps.set(r.colId,h),this.secondaryAxisComps.set(r.colId,o)}),this.getGui().appendChild(this.seriesChartTypeGroupComp.getGui())}refreshComps(){const e=this.chartController.getSeriesChartTypes();this.selectedColIds.forEach(t=>{const r=e.find(n=>n.colId===t);if(!r)return;const a=this.chartTypeComps.get(t),i=this.secondaryAxisComps.get(t);a?.setValue(r.chartType),i?.setValue(!!r.secondaryAxis),i?.setDisabled(this.isSecondaryAxisDisabled(r.chartType))})}clearComps(){this.chartTypeComps.clear(),this.secondaryAxisComps.clear()}isSecondaryAxisDisabled(e){return["groupedColumn","stackedColumn","stackedArea"].includes(e)}destroy(){this.clearComps(),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),super.destroy()}};Pt.TEMPLATE='<div id="seriesChartTypeGroup"></div>',p([ko("chartTranslationService")],Pt.prototype,"chartTranslationService",2),p([Lo],Pt.prototype,"init",1);var Ro=Pt;import{AgToggleButton as _o,Autowired as Go,Component as Fo,PostConstruct as Vo}from"@ag-grid-community/core";var bt=class Ka extends Fo{constructor(e,t){super(),this.getValue=e,this.setValue=t}init(){this.switchCategorySeriesToggleButton=this.createManagedBean(new _o({label:this.chartTranslationService.translate("switchCategorySeries"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.getValue(),onValueChange:t=>{this.setValue(t)}}));const e={title:void 0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-data",expanded:!0,items:[this.switchCategorySeriesToggleButton]};this.setTemplate(Ka.TEMPLATE,{switchCategorySeriesGroup:e})}refresh(){var e;(e=this.switchCategorySeriesToggleButton)==null||e.setValue(this.getValue(),!0)}};bt.TEMPLATE=`<div>
        <ag-group-component ref="switchCategorySeriesGroup"></ag-group-component>
    </div>`,p([Go("chartTranslationService")],bt.prototype,"chartTranslationService",2),p([Vo],bt.prototype,"init",1);var No=bt,Bo={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]},Be=class $a extends on{constructor(e,t){super($a.TEMPLATE),this.chartController=e,this.chartOptionsService=t,this.isSwitchCategorySeriesToggled=!1}init(){this.switchCategorySeriesPanel=this.addComponent(this.createManagedBean(new No(()=>this.chartController.isCategorySeriesSwitched(),e=>this.chartController.switchCategorySeries(e)))),this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched(),this.createAutoScrollService(),this.updatePanels(),this.addManagedListener(this.chartController,W.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,W.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this))}destroy(){this.clearPanelComponents(),super.destroy()}updatePanels(){var e,t,r,a,i;const n=this.chartType,o=this.isSwitchCategorySeriesToggled,{dimensionCols:l,valueCols:c}=this.chartController.getColStateForMenu();this.chartType=this.chartController.getChartType(),this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched();const h=this.isSwitchCategorySeriesToggled!==o;this.canRefresh(n,this.chartType)&&!h?((e=this.categoriesDataPanel)==null||e.refresh(l),(t=this.seriesDataPanel)==null||t.refresh(c),(r=this.seriesChartTypePanel)==null||r.refresh(c)):this.recreatePanels(l,c),(a=this.switchCategorySeriesPanel)==null||a.setDisplayed(os(this.chartType)&&!this.chartMenuService.isLegacyFormat()&&!this.chartController.isGrouping()),h&&((i=this.switchCategorySeriesPanel)==null||i.refresh())}canRefresh(e,t){if(e===void 0)return!1;if(e===t)return!0;const r=a=>["columnLineCombo","areaColumnCombo","customCombo"].includes(a);return!!(r(e)&&r(t))}recreatePanels(e,t){var r;this.clearPanelComponents();const{chartType:a}=this;if(!a)return;const i=this.chartController.isCategorySeriesSwitched(),n=(r=this.getDataPanelDef().groups)==null?void 0:r.map(({type:o,isOpen:l})=>o===(i?"series":"categories")?this.categoriesDataPanel=this.createBean(new So(this.chartController,this.autoScrollService,this.getCategoryGroupTitle(i),this.getCategoryGroupMultipleSelect(a,i),e,l)):o===(i?"categories":"series")?this.seriesDataPanel=this.createBean(new wo(this.chartController,this.autoScrollService,this.chartOptionsService,this.getSeriesGroupTitle(i),this.getSeriesGroupMultipleSelect(a,i),this.getSeriesGroupMaxSelection(a,i),t,l)):o==="seriesChartType"?this.chartController.isComboChart()?this.seriesChartTypePanel=this.createBean(new Ro(this.chartController,t,l)):null:(an.warnOnce(`Invalid charts data panel group name supplied: '${o}'`),null)).filter(o=>o!=null);n&&this.addPanelComponents(n)}addPanelComponents(e){var t;const r=document.createDocumentFragment();for(const i of e)this.registerComponent(i),r.appendChild(i.getGui());const a=(t=this.switchCategorySeriesPanel)==null?void 0:t.getGui();return this.getGui().insertBefore(r,a??null),e}clearPanelComponents(){const e=this.getGui();this.categoriesDataPanel&&e.removeChild(this.categoriesDataPanel.getGui()),this.seriesDataPanel&&e.removeChild(this.seriesDataPanel.getGui()),this.seriesChartTypePanel&&e.removeChild(this.seriesChartTypePanel.getGui()),this.categoriesDataPanel=this.destroyBean(this.categoriesDataPanel),this.seriesDataPanel=this.destroyBean(this.seriesDataPanel),this.seriesChartTypePanel=this.destroyBean(this.seriesChartTypePanel)}createAutoScrollService(){const e=this.getGui();this.autoScrollService=new nn({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}addComponent(e){return this.registerComponent(e),this.getGui().appendChild(e.getGui()),e}registerComponent(e){e.addCssClass("ag-chart-data-section")}getDataPanelDef(){var e,t;return(t=(e=this.gos.get("chartToolPanelsDef"))==null?void 0:e.dataPanel)!=null?t:Bo}getCategoryGroupTitle(e){return e?this.chartTranslationService.translate("seriesLabels"):this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")}getCategoryGroupMultipleSelect(e,t){return t?!1:or(e)!==1}getSeriesGroupTitle(e){return e?this.chartTranslationService.translate("categoryValues"):this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")}getSeriesGroupMultipleSelect(e,t){return this.getSeriesGroupMaxSelection(e,t)!==1}getSeriesGroupMaxSelection(e,t){if(!t)return ft(e)}};Be.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',p([Jr("chartTranslationService")],Be.prototype,"chartTranslationService",2),p([Jr("chartMenuService")],Be.prototype,"chartMenuService",2),p([ln],Be.prototype,"init",1);var Uo=Be;import{_ as Os,Component as Ho,PostConstruct as Wo}from"@ag-grid-community/core";import{Autowired as zo,Component as Yo,PostConstruct as Ko}from"@ag-grid-community/core";import{_ as hr,Autowired as $o,Component as Xo,PostConstruct as jo,RefSelector as qo}from"@ag-grid-community/core";var Ue=class Xa extends Xo{constructor(e){super(),this.activeComps=[],this.params=e,this.chartOptions=e.chartMenuUtils.getChartOptions()}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.params.name||this.chartTranslationService.translate("font"),enabled:this.params.enabled,suppressEnabledCheckbox:!!this.params.suppressEnabledCheckbox,onEnableChange:t=>{this.params.onEnableChange&&this.params.onEnableChange(t)}};this.setTemplate(Xa.TEMPLATE,{fontGroup:e,familySelect:this.getFamilySelectParams(),weightStyleSelect:this.getWeightStyleSelectParams(),sizeSelect:this.getSizeSelectParams(),colorPicker:this.params.chartMenuUtils.getDefaultColorPickerParams(this.params.keyMapper("color"))})}addCompToPanel(e){this.fontGroup.addItem(e),this.activeComps.push(e)}setEnabled(e){this.fontGroup.setEnabled(e)}getFamilySelectParams(){const e=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],t=this.getInitialFontValue("fontFamily");let r=e[0];if(t){const n=e.map(o=>o.toLowerCase()).indexOf(t.toLowerCase());if(n>=0)r=e[n];else{const o=hr.capitalise(t);e.push(o),r=o}}return{options:e.sort().map(i=>({value:i,text:i})),inputWidth:"flex",value:`${r}`,onValueChange:i=>this.setFont({fontFamily:i})}}getSizeSelectParams(){const e=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],t=this.getInitialFontValue("fontSize");return hr.includes(e,t)||e.push(t),{options:e.sort((a,i)=>a-i).map(a=>({value:`${a}`,text:`${a}`})),inputWidth:"flex",value:`${t}`,onValueChange:a=>this.setFont({fontSize:parseInt(a,10)}),label:this.chartTranslationService.translate("size")}}getWeightStyleSelectParams(){var e,t;const r=(e=this.getInitialFontValue("fontWeight"))!=null?e:"normal",a=(t=this.getInitialFontValue("fontStyle"))!=null?t:"normal",i=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}];let n=i.find(l=>l.weight===r&&l.style===a);return n||(n={name:"predefined",weight:r,style:a},i.unshift(n)),{options:i.map(l=>({value:l.name,text:this.chartTranslationService.translate(l.name)})),inputWidth:"flex",value:n.name,onValueChange:l=>{const c=i.find(h=>h.name===l);this.setFont({fontWeight:c.weight,fontStyle:c.style})}}}addItemToPanel(e){this.fontGroup.addItem(e),this.activeComps.push(e)}destroyActiveComps(){this.activeComps.forEach(e=>{hr.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActiveComps(),super.destroy()}setFont(e){const{keyMapper:t}=this.params;Object.entries(e).forEach(([r,a])=>{a&&this.chartOptions.setValue(t(r),a)})}getInitialFontValue(e){const{keyMapper:t}=this.params;return this.chartOptions.getValue(t(e))}};Ue.TEMPLATE=`<div class="ag-font-panel">
            <ag-group-component ref="fontGroup">
                <ag-select ref="familySelect"></ag-select>
                <ag-select ref="weightStyleSelect"></ag-select>
                <div class="ag-charts-font-size-color">
                    <ag-select ref="sizeSelect"></ag-select>
                    <ag-color-picker ref="colorPicker"></ag-color-picker>
                </div>
            </ag-group-component>
        </div>`,p([qo("fontGroup")],Ue.prototype,"fontGroup",2),p([$o("chartTranslationService")],Ue.prototype,"chartTranslationService",2),p([jo],Ue.prototype,"init",1);var oe=Ue,At=class ja extends Yo{constructor({chartMenuParamsFactory:e,isExpandedOnInit:t=!1}){super(),this.chartMenuUtils=e,this.isExpandedOnInit=t}init(){const e=this.chartMenuUtils.addEnableParams("legend.enabled",{cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("legend"),suppressEnabledCheckbox:!1,suppressToggleExpandOnEnableChange:!0,expanded:this.isExpandedOnInit,items:[this.createLabelPanel()]});this.setTemplate(ja.TEMPLATE,{legendGroup:e,legendPositionSelect:this.chartMenuUtils.getDefaultLegendParams("legend.position"),legendPaddingSlider:this.getSliderParams("spacing","spacing",200),markerSizeSlider:this.getSliderParams("item.marker.size","markerSize",40),markerStrokeSlider:this.getSliderParams("item.marker.strokeWidth","markerStroke",10),markerPaddingSlider:this.getSliderParams("item.marker.padding","itemSpacing",20),itemPaddingXSlider:this.getSliderParams("item.paddingX","layoutHorizontalSpacing",50),itemPaddingYSlider:this.getSliderParams("item.paddingY","layoutVerticalSpacing",50)})}getSliderParams(e,t,r){return this.chartMenuUtils.getDefaultSliderParams(`legend.${e}`,t,r)}createLabelPanel(){const e={enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:t=>`legend.item.label.${t}`};return this.createManagedBean(new oe(e))}};At.TEMPLATE=`<div>
            <ag-group-component ref="legendGroup">
                <ag-select ref="legendPositionSelect"></ag-select>
                <ag-slider ref="legendPaddingSlider"></ag-slider>
                <ag-slider ref="markerSizeSlider"></ag-slider>
                <ag-slider ref="markerStrokeSlider"></ag-slider>
                <ag-slider ref="markerPaddingSlider"></ag-slider>
                <ag-slider ref="itemPaddingXSlider"></ag-slider>
                <ag-slider ref="itemPaddingYSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([zo("chartTranslationService")],At.prototype,"chartTranslationService",2),p([Ko],At.prototype,"init",1);var Zo=At;import{_ as dr,AgCheckbox as Jo,AgSlider as Qo,Autowired as el,Component as tl,Events as rl,PostConstruct as sl,RefSelector as xt}from"@ag-grid-community/core";import{Autowired as al,Component as il,PostConstruct as nl}from"@ag-grid-community/core";var Mt=class qa extends il{constructor(e){super(),this.chartMenuUtils=e}init(){const e=this.chartMenuUtils.addEnableParams("tick.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("ticks"),suppressEnabledCheckbox:!1}),t=this.chartMenuUtils.getDefaultColorPickerParams("tick.color"),r=this.chartMenuUtils.getDefaultSliderParams("tick.width","width",10),a=this.chartMenuUtils.getDefaultSliderParams("tick.size","length",30);this.setTemplate(qa.TEMPLATE,{axisTicksGroup:e,axisTicksColorPicker:t,axisTicksWidthSlider:r,axisTicksSizeSlider:a})}};Mt.TEMPLATE=`<div>
            <ag-group-component ref="axisTicksGroup">
                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>
                <ag-slider ref="axisTicksWidthSlider"></ag-slider>
                <ag-slider ref="axisTicksSizeSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([al("chartTranslationService")],Mt.prototype,"chartTranslationService",2),p([nl],Mt.prototype,"init",1);var ol=Mt;import{Autowired as ll,Component as cl,PostConstruct as hl}from"@ag-grid-community/core";var Et=class Za extends cl{constructor(e){super(),this.chartMenuUtils=e,this.chartOptions=e.getChartOptions()}init(){const e=this.chartMenuUtils.addEnableParams("gridLine.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("gridLines"),suppressEnabledCheckbox:!1}),t=this.getGridLineColorPickerParams("color"),r=this.getGridLineWidthSliderParams("thickness"),a=this.getGridLineDashSliderParams("lineDash");this.setTemplate(Za.TEMPLATE,{gridLineGroup:e,gridLineColorPicker:t,gridLineWidthSlider:r,gridLineLineDashSlider:a})}getGridLineColorPickerParams(e){return this.chartMenuUtils.getDefaultColorPickerParams("gridLine.style",e,{formatInputValue:t=>{var r;return(r=t?.[0])==null?void 0:r.stroke},parseInputValue:t=>{var r;const a=(r=this.chartOptions.getValue("gridLine.style"))!=null?r:[];return a.length===0?[{stroke:t,lineDash:[]}]:[A(T({},a[0]),{stroke:t})]}})}getGridLineWidthSliderParams(e){return this.chartMenuUtils.getDefaultSliderParams("gridLine.width",e,10)}getGridLineDashSliderParams(e){var t,r;const a=this.chartOptions.getValue("gridLine.style"),i=(r=(t=a?.[0])==null?void 0:t.lineDash)==null?void 0:r[0],n=this.chartMenuUtils.getDefaultSliderParamsWithoutValueParams(i??0,e,30);return n.onValueChange=o=>{const l=this.chartOptions.getValue("gridLine.style.0.stroke");this.chartOptions.setValue("gridLine.style",[{lineDash:[o],stroke:l}])},n}};Et.TEMPLATE=`<div>
            <ag-group-component ref="gridLineGroup">
                <ag-color-picker ref="gridLineColorPicker"></ag-color-picker>
                <ag-slider ref="gridLineWidthSlider"></ag-slider>
                <ag-slider ref="gridLineLineDashSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([ll("chartTranslationService")],Et.prototype,"chartTranslationService",2),p([hl],Et.prototype,"init",1);var dl=Et;import{Autowired as ul,Events as ur,AgAbstractLabel as pl,RefSelector as wt,_ as Ds}from"@ag-grid-community/core";var Pe=class Ja extends pl{constructor(e){super(e,Ja.TEMPLATE),this.radius=0,this.offsetX=0,this.offsetY=0}postConstruct(){super.postConstruct();const{value:e,onValueChange:t}=this.config;e!=null&&this.setValue(e,void 0,!0),t!=null&&this.onValueChange(t),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:r=>{this.parentCircleRect=this.eParentCircle.getBoundingClientRect()},onDragging:r=>this.calculateAngleDrag(r),onDragStop:()=>{}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(`${this.degrees}`).onValueChange(r=>{(r==null||r==="")&&(r="0"),r=this.eAngleValue.normalizeValue(r);let a=parseFloat(r);a>180&&(a=a-360),this.setValue(a)}),this.updateNumberInput(),Ds.exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,ur.EVENT_FIELD_VALUE_CHANGED,()=>{this.eAngleValue.getInputElement().contains(this.gos.getActiveDomElement())||this.updateNumberInput()})}updateNumberInput(){const e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())}positionChildCircle(e){const t=this.parentCircleRect||{width:24,height:24},r=this.eChildCircle,a=t.width/2,i=t.height/2;r.style.left=`${a+Math.cos(e)*8}px`,r.style.top=`${i+Math.sin(e)*8}px`}calculatePolar(){const e=this.offsetX,t=this.offsetY,r=Math.atan2(t,e);this.degrees=this.toDegrees(r),this.radius=Math.sqrt(e*e+t*t),this.positionChildCircle(r)}calculateCartesian(){const e=this.toRadians(this.getValue()),t=this.getRadius();this.setOffsetX(Math.cos(e)*t).setOffsetY(Math.sin(e)*t)}setOffsetX(e){return this.offsetX!==e&&(this.offsetX=e,this.calculatePolar()),this}setOffsetY(e){return this.offsetY!==e&&(this.offsetY=e,this.calculatePolar()),this}calculateAngleDrag(e){const t=this.parentCircleRect,r=t.width/2,a=t.height/2,i=e.clientX-t.left,n=e.clientY-t.top,o=i-r,l=n-a,c=Math.atan2(l,o);this.setValue(c,!0)}toDegrees(e){return e/Math.PI*180}toRadians(e){return e/180*Math.PI}normalizeNegativeValue(e){return e<0?360+e:e}normalizeAngle180(e){return e%=Math.PI*2,e<-Math.PI?e+=Math.PI*2:e>=Math.PI&&(e-=Math.PI*2),e}getRadius(){return this.radius}setRadius(e){return this.radius===e?this:(this.radius=e,this.calculateCartesian(),this)}onValueChange(e){return this.addManagedListener(this,ur.EVENT_FIELD_VALUE_CHANGED,()=>{e(this.degrees)}),this}getValue(e){return e?this.toRadians(this.degrees):this.degrees}setValue(e,t,r){let a;return t?a=e:a=this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(a),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(a),r||this.dispatchEvent({type:ur.EVENT_FIELD_VALUE_CHANGED})),this}setWidth(e){return Ds.setFixedWidth(this.getGui(),e),this}setDisabled(e){return super.setDisabled(e),this.eAngleValue.setDisabled(e),this}destroy(){this.dragService.removeDragSource(this.dragListener),super.destroy()}};Pe.TEMPLATE=`<div class="ag-angle-select">
            <div ref="eLabel"></div>
            <div class="ag-wrapper ag-angle-select-wrapper">
                <div ref="eAngleSelectField" class="ag-angle-select-field">
                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">
                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>
                    </div>
                </div>
                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>
            </div>
        </div>`,p([wt("eLabel")],Pe.prototype,"eLabel",2),p([wt("eParentCircle")],Pe.prototype,"eParentCircle",2),p([wt("eChildCircle")],Pe.prototype,"eChildCircle",2),p([wt("eAngleValue")],Pe.prototype,"eAngleValue",2),p([ul("dragService")],Pe.prototype,"dragService",2);var ks=Pe;import{Autowired as gl,BeanStub as ml}from"@ag-grid-community/core";var be=class extends ml{constructor(s){super(),this.chartOptionsProxy=s}getDefaultColorPickerParams(s,e,t){return this.addValueParams(s,{label:this.chartTranslationService.translate(e??"color"),labelWidth:"flex",inputWidth:"flex"},t)}getDefaultNumberInputParams(s,e,t){return this.addValueParams(s,{label:this.chartTranslationService.translate(e),labelWidth:"flex",inputWidth:"flex",precision:t?.precision,step:t?.step,min:t?.min,max:t?.max},{parseInputValue:r=>{const a=Number(r);return isNaN(a)?void 0:a},formatInputValue:r=>r==null?"":`${r}`})}getDefaultSliderParams(s,e,t,r){var a;let i=(a=this.chartOptionsProxy.getValue(s))!=null?a:0;r&&Array.isArray(i)&&(i=i[0]);const n=this.getDefaultSliderParamsWithoutValueParams(i,e,t);return n.onValueChange=o=>this.chartOptionsProxy.setValue(s,r?[o]:o),n}getDefaultSliderParamsWithoutValueParams(s,e,t){return{label:this.chartTranslationService.translate(e),minValue:0,maxValue:Math.max(s,t),textFieldWidth:45,value:`${s}`}}getDefaultCheckboxParams(s,e,t){const r=this.chartOptionsProxy.getValue(s),a={label:this.chartTranslationService.translate(e),value:r,readOnly:t?.readOnly,passive:t?.passive};return a.onValueChange=i=>{this.chartOptionsProxy.setValue(s,typeof i=="boolean"?i:void 0)},a}getDefaultSelectParams(s,e,t,r){const a=this.chartOptionsProxy.getValue(s),i={label:this.chartTranslationService.translate(e),value:a,options:t,pickerType:r?.pickerType,pickerAriaLabelKey:r?.pickerAriaLabelKey,pickerAriaLabelValue:r?.pickerAriaLabelValue};return i.onValueChange=n=>{this.chartOptionsProxy.setValue(s,n)},i}getDefaultLegendParams(s){return this.addValueParams(s,{label:this.chartTranslationService.translate("position"),labelWidth:"flex",inputWidth:"flex",options:["top","right","bottom","left"].map(e=>({value:e,text:this.chartTranslationService.translate(e)}))})}getDefaultFontPanelParams(s,e){const t=r=>`${s}.${r}`;return this.addEnableParams(t("enabled"),{name:this.chartTranslationService.translate(e),suppressEnabledCheckbox:!1,chartMenuUtils:this,keyMapper:t})}addValueParams(s,e,t){const r=this.chartOptionsProxy.getValue(s);return e.value=t?.formatInputValue?t.formatInputValue(r):r,e.onValueChange=a=>{const i=t?.parseInputValue?t.parseInputValue(a):a;this.chartOptionsProxy.setValue(s,i)},e}addEnableParams(s,e){var t;return e.enabled=(t=this.chartOptionsProxy.getValue(s))!=null?t:!1,e.onEnableChange=r=>this.chartOptionsProxy.setValue(s,r),e}getChartOptions(){return this.chartOptionsProxy}};p([gl("chartTranslationService")],be.prototype,"chartTranslationService",2);var Cl="%d %B %Y",le=class Qa extends tl{constructor(e,{chartController:t,chartOptionsService:r,isExpandedOnInit:a=!1,seriesType:i}){super(),this.activePanels=[],this.axisLabelUpdateFuncs=[],this.axisType=e,this.chartController=t,this.chartAxisOptionsProxy=r.getCartesianAxisOptionsProxy(e),this.chartAxisThemeOverridesProxy=r.getCartesianAxisThemeOverridesProxy(e),this.chartAxisAppliedThemeOverridesProxy=r.getCartesianAxisAppliedThemeOverridesProxy(e),this.chartOptionsSeriesProxy=r.getSeriesOptionsProxy(()=>i??this.chartController.getChartSeriesType()),this.chartOptionsService=r,this.isExpandedOnInit=a}init(){var e;const t=this.axisType,r={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate(t),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0},a=this.createManagedBean(new be(this.chartAxisOptionsProxy)),i=this.createManagedBean(new be(this.chartAxisThemeOverridesProxy)),n=this.getAxisTypeSelectParams(a,this.chartAxisAppliedThemeOverridesProxy),o=this.getAxisPositionSelectParams(a),l=this.getAxisTimeFormatSelectParams(a),c=this.getAxisColorInputParams(i),h=this.getAxisLineWidthSliderParams(i);this.setTemplate(Qa.TEMPLATE,{axisGroup:r,axisTypeSelect:n??void 0,axisPositionSelect:o??void 0,axisTimeFormatSelect:l??void 0,axisColorInput:c,axisLineWidthSlider:h}),this.axisTypeSelect.setDisplayed(!!((e=n.options)!=null&&e.length)),o||this.removeTemplateComponent(this.axisPositionSelect);const d=()=>{const g=this.chartAxisOptionsProxy.getValue("type")==="time";dr.setDisplayed(this.axisTimeFormatSelect.getGui(),g)};l?(d(),this.addManagedListener(this.eventService,rl.EVENT_CHART_OPTIONS_CHANGED,g=>{d()})):this.removeTemplateComponent(this.axisTimeFormatSelect),this.initGridLines(i),this.initAxisTicks(i),this.initAxisLabels(i);const u=()=>this.axisLabelUpdateFuncs.forEach(g=>g());this.addManagedListener(this.chartController,W.EVENT_CHART_UPDATED,u),this.addManagedListener(this.chartController,W.EVENT_CHART_MODEL_UPDATE,()=>setTimeout(()=>{this.refreshAxisTypeSelect(a),d()}))}getAxisTypeSelectParams(e,t){const r=e.getChartOptions(),a=this.getAxisTypeSelectOptions(),i=e.getDefaultSelectParams("type","axisType",a);return i.onValueChange=n=>{var o;const l=r.getValue("type");if(n===l)return;const c=t.getValue("*"),h=l==="time",d=n==="time",u=h!==d?d?Cl:void 0:null;if(this.chartOptionsService.setCartesianCategoryAxisType(this.axisType,n),u!==null){const g=(o=r.getValue("label"))!=null?o:{};r.setValue("label",A(T({},g),{format:u}))}t.setValue("*",c)},i}refreshAxisTypeSelect(e){const t=this.getAxisTypeSelectOptions(),r=!!t.length;this.axisTypeSelect.setDisplayed(r),r&&this.axisTypeSelect.clearOptions().addOptions(t).setValue(e.getChartOptions().getValue("type"))}getAxisTypeSelectOptions(){const e=this.chartController.getChartType(),t=()=>{const r=this.chartController.getChartData()[0];return r?this.chartController.getSelectedDimensions().every(a=>!isNaN(parseFloat(r[a.colId]))):!1};return["heatmap","histogram","boxPlot","rangeBar","scatter","bubble"].includes(e)||this.chartController.isGrouping()||!this.isCategoryAxis()||this.chartController.isCategorySeriesSwitched()||!t()?[]:["category","number","time"].map(r=>({value:r,text:this.translate(r)}))}isCategoryAxis(){const e=this.chartOptionsSeriesProxy.getValue("direction")==="horizontal";return e&&this.axisType==="yAxis"||!e&&this.axisType==="xAxis"}getAxisPositionSelectParams(e){const t=((r,a)=>{switch(r){case"heatmap":return null;default:switch(a){case"xAxis":return[{value:"top",text:this.translate("top")},{value:"bottom",text:this.translate("bottom")}];case"yAxis":return[{value:"left",text:this.translate("left")},{value:"right",text:this.translate("right")}]}}})(this.chartController.getChartType(),this.axisType);return t?e.getDefaultSelectParams("position","position",t):null}getAxisTimeFormatSelectParams(e){if(!this.isCategoryAxis())return null;const t=[{value:"%d/%m/%Y",text:this.translate("timeFormatSlashesDDMMYYYY")},{value:"%m/%d/%Y",text:this.translate("timeFormatSlashesMMDDYYYY")},{value:"%d/%m/%y",text:this.translate("timeFormatSlashesDDMMYY")},{value:"%m/%d/%y",text:this.translate("timeFormatSlashesMMDDYY")},{value:"%d.%e.%y",text:this.translate("timeFormatDotsDDMYY")},{value:"%e.%d.%y",text:this.translate("timeFormatDotsMDDYY")},{value:"%Y-%m-%d",text:this.translate("timeFormatDashesYYYYMMDD")},{value:"%d %B %Y",text:this.translate("timeFormatSpacesDDMMMMYYYY")},{value:"%H:%M:%S",text:this.translate("timeFormatHHMMSS")},{value:"%I:%M:%S %p",text:this.translate("timeFormatHHMMSSAmPm")}];return e.getDefaultSelectParams("label.format","timeFormat",t)}getAxisColorInputParams(e){return e.getDefaultColorPickerParams("line.color")}getAxisLineWidthSliderParams(e){var t;const r=e.getChartOptions(),a=()=>r.getValue("line.enabled")?r.getValue("line.width"):null,i=o=>{r.setValues([{expression:"line.enabled",value:o!=null},{expression:"line.width",value:o??0}])},n=e.getDefaultSliderParamsWithoutValueParams((t=a())!=null?t:0,"thickness",10);return n.onValueChange=o=>{i(o===0?null:o)},n}initGridLines(e){switch(this.chartController.getChartType()){case"heatmap":return;default:const r=this.createBean(new dl(e));this.axisGroup.addItem(r),this.activePanels.push(r)}}initAxisTicks(e){if(!this.hasConfigurableAxisTicks())return;const t=this.createBean(new ol(e));this.axisGroup.addItem(t),this.activePanels.push(t)}hasConfigurableAxisTicks(){switch(this.chartController.getChartType()){case"radarLine":case"radarArea":case"rangeBar":case"boxPlot":case"waterfall":return!1;default:return!0}}initAxisLabels(e){const t={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:e,keyMapper:a=>`label.${a}`},r=this.createBean(new oe(t));this.axisGroup.addItem(r),this.activePanels.push(r),this.addAdditionalLabelComps(r,e)}addAdditionalLabelComps(e,t){this.addLabelPadding(e,t);const r=this.createRotationWidget("labelRotation",t),a=this.initLabelRotation(r,t);e.addCompToPanel(a),e.addCompToPanel(r)}initLabelRotation(e,t){const r=t.getChartOptions(),a=()=>r.getValue("label.rotation"),i=()=>r.getValue("label.autoRotate"),n=h=>{h&&(this.prevRotation=a()),r.setValues([{expression:"label.autoRotate",value:h},{expression:"label.rotation",value:h?void 0:this.prevRotation}]),e.setDisabled(h)},l=typeof a()=="number"?!1:i(),c=this.createBean(new Jo({label:this.translate("autoRotate"),value:l,onValueChange:n}));return e.setDisabled(l),c}createRotationWidget(e,t){var r;const a=t.getChartOptions(),i=()=>a.getValue("label.rotation"),n=h=>a.setValue("label.rotation",h),l=`${this.chartTranslationService.translate(e)} \xB0`,c=new ks({label:l,labelWidth:"flex",value:(r=i())!=null?r:0,onValueChange:n});return this.axisLabelUpdateFuncs.push(()=>{var h;c.setValue((h=i())!=null?h:0)}),this.createBean(c)}addLabelPadding(e,t){const r=this.createBean(new Qo(t.getDefaultSliderParams("label.padding","padding",30)));e.addCompToPanel(r)}translate(e){return this.chartTranslationService.translate(e)}removeTemplateComponent(e){dr.removeFromParent(e.getGui()),this.destroyBean(e)}destroyActivePanels(){this.activePanels.forEach(e=>{dr.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};le.TEMPLATE=`<div>
            <ag-group-component ref="axisGroup">
                <ag-select ref="axisTypeSelect"></ag-select>
                <ag-select ref="axisTimeFormatSelect"></ag-select>
                <ag-select ref="axisPositionSelect"></ag-select>
                <ag-color-picker ref="axisColorInput"></ag-color-picker>
                <ag-slider ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([xt("axisGroup")],le.prototype,"axisGroup",2),p([xt("axisTypeSelect")],le.prototype,"axisTypeSelect",2),p([xt("axisPositionSelect")],le.prototype,"axisPositionSelect",2),p([xt("axisTimeFormatSelect")],le.prototype,"axisTimeFormatSelect",2),p([el("chartTranslationService")],le.prototype,"chartTranslationService",2),p([sl],le.prototype,"init",1);var Ot=le;import{AgGroupComponent as fl,AgSelect as vl,AgSlider as yl,Autowired as Sl,Component as Tl,PostConstruct as Pl,RefSelector as bl}from"@ag-grid-community/core";var He=class ei extends Tl{constructor({chartController:e,chartAxisMenuParamsFactory:t,isExpandedOnInit:r=!1}){super(),this.chartController=e,this.chartMenuUtils=t,this.isExpandedOnInit=r}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("polarAxis"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0},t=this.chartMenuUtils.getDefaultColorPickerParams("line.color"),r=this.chartMenuUtils.getDefaultSliderParams("line.width","thickness",10);this.setTemplate(ei.TEMPLATE,{axisGroup:e,axisColorInput:t,axisLineWidthSlider:r}),this.initAxis(),this.initAxisLabels(),this.initRadiusAxis()}initAxis(){const e=this.chartController.getChartType();if(["radarLine","radarArea"].includes(e)){const r=[{value:"circle",text:this.translate("circle")},{value:"polygon",text:this.translate("polygon")}];this.axisGroup.addItem(this.createSelect({labelKey:"shape",options:r,property:"shape"}))}e!=="pie"&&this.axisGroup.addItem(this.createSlider({labelKey:"innerRadius",defaultMaxValue:1,property:"innerRadiusRatio"}))}initAxisLabels(){const e={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:a=>`label.${a}`},t=this.createManagedBean(new oe(e)),r=this.createOrientationWidget();t.addItemToPanel(r),this.axisGroup.addItem(t)}createOrientationWidget(){const e=[{value:"fixed",text:this.translate("fixed")},{value:"parallel",text:this.translate("parallel")},{value:"perpendicular",text:this.translate("perpendicular")}];return this.createSelect({labelKey:"orientation",options:e,property:"label.orientation"})}initRadiusAxis(){const e=w(this.chartController.getChartType());if(!Dn(e))return;const t=[this.createSlider({labelKey:"groupPadding",defaultMaxValue:1,property:"paddingInner"}),this.createSlider({labelKey:"seriesPadding",defaultMaxValue:1,property:"groupPaddingInner"})],r=this.createManagedBean(new fl({cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,enabled:!0,suppressEnabledCheckbox:!0,title:this.translate("padding"),items:t})).hideEnabledCheckbox(!0).hideOpenCloseIcons(!0);this.axisGroup.addItem(r)}createSlider(e){const{labelKey:t,defaultMaxValue:r,step:a=.05,property:i}=e,n=this.chartMenuUtils.getDefaultSliderParams(i,t,r);return n.step=a,this.createManagedBean(new yl(n))}createSelect(e){const{labelKey:t,options:r,property:a}=e;return this.createManagedBean(new vl(this.chartMenuUtils.addValueParams(a,{label:this.chartTranslationService.translate(t),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:r})))}translate(e){return this.chartTranslationService.translate(e)}};He.TEMPLATE=`<div>
            <ag-group-component ref="axisGroup">
                <ag-color-picker ref="axisColorInput"></ag-color-picker>
                <ag-slider ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([bl("axisGroup")],He.prototype,"axisGroup",2),p([Sl("chartTranslationService")],He.prototype,"chartTranslationService",2),p([Pl],He.prototype,"init",1);var Al=He;import{AgSelect as xl,Autowired as Is,Component as Ml,Events as El,PostConstruct as wl}from"@ag-grid-community/core";import{Autowired as Ol,Component as Dl,Events as kl,PostConstruct as Il,RefSelector as Ll}from"@ag-grid-community/core";var We=class ti extends Dl{constructor(e,t){super(),this.chartMenuUtils=e,this.chartController=t}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("padding"),suppressEnabledCheckbox:!0},t=r=>this.chartMenuUtils.getDefaultSliderParams("padding."+r,r,200);this.setTemplate(ti.TEMPLATE,{chartPaddingGroup:e,paddingTopSlider:t("top"),paddingRightSlider:t("right"),paddingBottomSlider:t("bottom"),paddingLeftSlider:t("left")}),this.addManagedListener(this.eventService,kl.EVENT_CHART_OPTIONS_CHANGED,r=>{this.updateTopPadding(r.chartOptions)})}updateTopPadding(e){const t=[...this.chartController.getChartSeriesTypes(),"common"].map(r=>{var a,i;return(i=(a=e[r])==null?void 0:a.padding)==null?void 0:i.top}).find(r=>r!=null);t!=null&&this.paddingTopSlider.setValue(`${t}`)}};We.TEMPLATE=`<div>
            <ag-group-component ref="chartPaddingGroup">
                <ag-slider ref="paddingTopSlider"></ag-slider>
                <ag-slider ref="paddingRightSlider"></ag-slider>
                <ag-slider ref="paddingBottomSlider"></ag-slider>
                <ag-slider ref="paddingLeftSlider"></ag-slider>
            </ag-group-component>
        <div>`,p([Ll("paddingTopSlider")],We.prototype,"paddingTopSlider",2),p([Ol("chartTranslationService")],We.prototype,"chartTranslationService",2),p([Il],We.prototype,"init",1);var Rl=We;import{Autowired as _l,Component as Gl,PostConstruct as Fl}from"@ag-grid-community/core";var Dt=class ri extends Gl{constructor(e){super(),this.chartMenuUtils=e}init(){const e=this.chartMenuUtils.addEnableParams("background.visible",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("background"),suppressEnabledCheckbox:!1}),t=this.chartMenuUtils.getDefaultColorPickerParams("background.fill");this.setTemplate(ri.TEMPLATE,{chartBackgroundGroup:e,colorPicker:t})}};Dt.TEMPLATE=`<div>
            <ag-group-component ref="chartBackgroundGroup">
                <ag-color-picker ref="colorPicker"></ag-color-picker>
            </ag-group-component>
        <div>`,p([_l("chartTranslationService")],Dt.prototype,"chartTranslationService",2),p([Fl],Dt.prototype,"init",1);var Vl=Dt;import{_ as Nl,AgSlider as Bl,Autowired as Ls,Component as Ul,PostConstruct as Hl}from"@ag-grid-community/core";var ze=class si extends Ul{constructor(e,t){super(si.TEMPLATE),this.chartMenuUtils=e,this.chartController=t,this.activePanels=[],this.chartOptions=e.getChartOptions()}init(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")}hasTitle(){const e=this.chartOptions.getValue("title");return e&&e.enabled&&e.text&&e.text.length>0}initFontPanel(){const e=this.hasTitle(),t={name:this.chartTranslationService.translate("title"),enabled:e,suppressEnabledCheckbox:!1,chartMenuUtils:this.chartMenuUtils,keyMapper:a=>`title.${a}`,onEnableChange:a=>{if(this.chartMenuService.doesChartToolbarExist(this.chartController)){const o=this.chartOptions.getValue("padding.top");this.chartOptions.setValue("padding.top",a?o-20:o+20)}this.chartOptions.setValue("title.enabled",a);const i=this.chartOptions.getValue("title.text"),n=i==="Title"||i?.trim().length===0;a&&n&&this.chartOptions.setValue("title.text",this.titlePlaceholder)}},r=this.createBean(new oe(t));r.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(r.getGui()),this.activePanels.push(r),this.addManagedListener(this.eventService,"chartTitleEdit",()=>{r.setEnabled(this.hasTitle())})}createSpacingSlicer(){const e=this.chartMenuUtils.getDefaultSliderParams("title.spacing","spacing",100);return e.value="10",this.createBean(new Bl(e))}destroyActivePanels(){this.activePanels.forEach(e=>{Nl.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};ze.TEMPLATE="<div></div>",p([Ls("chartTranslationService")],ze.prototype,"chartTranslationService",2),p([Ls("chartMenuService")],ze.prototype,"chartMenuService",2),p([Hl],ze.prototype,"init",1);var Wl=ze,Ye=class ai extends Ml{constructor({chartController:e,chartMenuParamsFactory:t,isExpandedOnInit:r=!1,chartOptionsService:a,seriesType:i}){super(),this.chartController=e,this.chartMenuParamsFactory=t,this.chartOptionsSeriesProxy=a.getSeriesOptionsProxy(()=>i??this.chartController.getChartSeriesType()),this.isExpandedOnInit=r}init(){this.chartSeriesMenuParamsFactory=this.createManagedBean(new be(this.chartOptionsSeriesProxy));const e={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("chart"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0,items:[this.createManagedBean(new Wl(this.chartMenuParamsFactory,this.chartController)),this.createManagedBean(new Rl(this.chartMenuParamsFactory,this.chartController)),this.createManagedBean(new Vl(this.chartMenuParamsFactory)),...this.createDirectionSelect()]};this.setTemplate(ai.TEMPLATE,{chartGroup:e}),this.addManagedListener(this.eventService,El.EVENT_CHART_OPTIONS_CHANGED,()=>this.refresh())}refresh(){this.updateDirectionSelect()}createDirectionSelect(){if(!!this.chartMenuService.isLegacyFormat())return[];const t=["horizontal","vertical"].map(i=>({value:i,text:this.chartTranslationService.translate(i)})),r=this.chartSeriesMenuParamsFactory.getDefaultSelectParams("direction","direction",t);r.labelWidth="flex",r.inputWidth="flex";const a=r.onValueChange;return r.onValueChange=i=>{a(i),this.chartController.raiseChartModelUpdateEvent()},this.directionSelect=this.createManagedBean(new xl(r)),this.updateDirectionSelect(),[this.directionSelect]}updateDirectionSelect(){var e;(e=this.directionSelect)==null||e.setDisplayed(In(this.chartController.getChartType()))}};Ye.TEMPLATE=`<div>
            <ag-group-component ref="chartGroup"></ag-group-component>
        </div>`,p([Is("chartTranslationService")],Ye.prototype,"chartTranslationService",2),p([Is("chartMenuService")],Ye.prototype,"chartMenuService",2),p([wl],Ye.prototype,"init",1);var zl=Ye;import{_ as Yl,AgSelect as pr,AgSlider as Ae,AgToggleButton as Kl,Autowired as $l,Component as Xl,PostConstruct as jl,RefSelector as ql,ChartMappings as Zl}from"@ag-grid-community/core";import{Autowired as Jl,Component as Ql,PostConstruct as ec}from"@ag-grid-community/core";var kt=class ii extends Ql{constructor(e,t="shadow"){super(),this.chartMenuUtils=e,this.propertyKey=t}init(){const e=this.propertyKey,t=this.chartMenuUtils.addEnableParams(`${e}.enabled`,{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("shadow"),suppressEnabledCheckbox:!1}),r=this.chartMenuUtils.getDefaultColorPickerParams(`${e}.color`);this.setTemplate(ii.TEMPLATE,{shadowGroup:t,shadowColorPicker:r,shadowBlurSlider:this.getSliderParams("blur",0,20),shadowXOffsetSlider:this.getSliderParams("xOffset",-10,10),shadowYOffsetSlider:this.getSliderParams("yOffset",-10,10)})}getSliderParams(e,t,r){const a=`${this.propertyKey}.${e}`,i=this.chartMenuUtils.getDefaultSliderParams(a,e,r);return i.minValue=t,i}};kt.TEMPLATE=`<div>
            <ag-group-component ref="shadowGroup">
                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>
                <ag-slider ref="shadowBlurSlider"></ag-slider>
                <ag-slider ref="shadowXOffsetSlider"></ag-slider>
                <ag-slider ref="shadowYOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([Jl("chartTranslationService")],kt.prototype,"chartTranslationService",2),p([ec],kt.prototype,"init",1);var tc=kt;import{_ as rc,Autowired as sc,Component as ac,PostConstruct as ic,RefSelector as nc}from"@ag-grid-community/core";var Ke=class ni extends ac{constructor(e,t){super(),this.chartOptionsService=e,this.chartMenuUtils=t}init(){const e=this.chartOptionsService.getChartType(),t=rc.includes(["scatter","bubble"],e),r=this.chartMenuUtils.addEnableParams("marker.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("markers"),suppressEnabledCheckbox:t,suppressOpenCloseIcons:!0}),a=e==="bubble";let i,n;a?(i=this.getSliderParams("marker.maxSize","maxSize",60),n=this.getSliderParams("marker.size","minSize",60)):(i={},n=this.getSliderParams("marker.size","size",60)),this.setTemplate(ni.TEMPLATE,{seriesMarkersGroup:r,seriesMarkerShapeSelect:this.getMarkerShapeSelectParams(),seriesMarkerMinSizeSlider:i,seriesMarkerSizeSlider:n,seriesMarkerStrokeWidthSlider:this.getSliderParams("marker.strokeWidth","strokeWidth",10)}),a||this.seriesMarkerMinSizeSlider.setDisplayed(!1)}getMarkerShapeSelectParams(){const e=[{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}];return this.chartMenuUtils.addValueParams("marker.shape",{options:e,label:this.chartTranslationService.translate("shape")})}getSliderParams(e,t,r){return this.chartMenuUtils.getDefaultSliderParams(e,t,r)}};Ke.TEMPLATE=`<div>
            <ag-group-component ref="seriesMarkersGroup">
                <ag-select ref="seriesMarkerShapeSelect"></ag-select>
                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([nc("seriesMarkerMinSizeSlider")],Ke.prototype,"seriesMarkerMinSizeSlider",2),p([sc("chartTranslationService")],Ke.prototype,"chartTranslationService",2),p([ic],Ke.prototype,"init",1);var oc=Ke;import{Component as lc,PostConstruct as cc,RefSelector as ce,_ as hc}from"@ag-grid-community/core";import{_Util as $e}from"ag-charts-community";import{KeyCode as Q}from"@ag-grid-community/core";var z=class Ce extends lc{constructor(e){super(Ce.TEMPLATE),this.H=1,this.S=1,this.B=1,this.A=1,this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1,this.colorChanged=!1,this.picker=e.picker}postConstruct(){this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",()=>this.spectrumColor.focus()),this.addGuiEventListener("keydown",e=>{e.key===Q.ENTER&&!e.defaultPrevented&&this.destroy()}),this.addManagedListener(this.spectrumColor,"keydown",e=>this.moveDragger(e)),this.addManagedListener(this.spectrumAlphaSlider,"keydown",e=>this.moveAlphaSlider(e)),this.addManagedListener(this.spectrumHueSlider,"keydown",e=>this.moveHueSlider(e)),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addGuiEventListener("mousemove",e=>{this.onSpectrumDraggerMove(e),this.onSpectrumHueMove(e),this.onSpectrumAlphaMove(e)}),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this)),this.addManagedListener(this.recentColors,"keydown",e=>{(e.key===Q.ENTER||e.key===Q.SPACE)&&(e.preventDefault(),this.onRecentColorClick(e))})}initTabIndex(){const e=this.tabIndex=this.gos.get("tabIndex").toString();this.spectrumColor.setAttribute("tabindex",e),this.spectrumHueSlider.setAttribute("tabindex",e),this.spectrumAlphaSlider.setAttribute("tabindex",e)}refreshSpectrumRect(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()}refreshHueRect(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()}refreshAlphaRect(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()}onSpectrumDraggerDown(e){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)}onSpectrumDraggerMove(e){this.isSpectrumDragging&&this.moveDragger(e)}onSpectrumHueDown(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)}onSpectrumHueMove(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)}onSpectrumAlphaDown(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)}onSpectrumAlphaMove(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)}onMouseUp(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1}moveDragger(e){const t=this.spectrumValRect;if(!t)return;let r,a;if(e instanceof MouseEvent)r=e.clientX-t.left,a=e.clientY-t.top;else{const i=e.key===Q.LEFT,n=e.key===Q.RIGHT,o=e.key===Q.UP,l=e.key===Q.DOWN,c=o||l,h=i||n;if(!c&&!h)return;e.preventDefault();const{x:d,y:u}=this.getSpectrumValue();r=d+(h?i?-5:5:0),a=u+(c?o?-5:5:0)}r=Math.max(r,0),r=Math.min(r,t.width),a=Math.max(a,0),a=Math.min(a,t.height),this.setSpectrumValue(r/t.width,1-a/t.height)}moveHueSlider(e){const t=this.spectrumHueRect;if(!t)return;const r=this.moveSlider(this.spectrumHueSlider,e);r!=null&&(this.H=1-r/t.width,this.update())}moveAlphaSlider(e){const t=this.spectrumAlphaRect;if(!t)return;const r=this.moveSlider(this.spectrumAlphaSlider,e);r!=null&&(this.A=r/t.width,this.update())}moveSlider(e,t){var r;const a=e.getBoundingClientRect(),i=(r=e.parentElement)==null?void 0:r.getBoundingClientRect();if(!e||!i)return null;let n;if(t instanceof MouseEvent)n=t.clientX-i.left;else{const o=t.key===Q.LEFT,l=t.key===Q.RIGHT;if(!o&&!l)return null;t.preventDefault();const c=o?-5:5;n=parseFloat(e.style.left)-a.width/2+c}return n=Math.max(n,0),n=Math.min(n,i.width),e.style.left=n+a.width/2+"px",n}update(){const e=$e.Color.fromHSB(this.H*360,this.S,this.B,this.A),t=$e.Color.fromHSB(this.H*360,1,1),r=e.toRgbaString(),a=this.picker;$e.Color.fromString(a.getValue()).toRgbaString()!==r&&(this.colorChanged=!0),a.setValue(r),this.spectrumColor.style.backgroundColor=t.toRgbaString(),this.spectrumDragger.style.backgroundColor=r}setSpectrumValue(e,t){const r=this.spectrumValRect||this.refreshSpectrumRect();if(r==null)return;const a=this.spectrumDragger,i=a.getBoundingClientRect();e=Math.max(0,e),e=Math.min(1,e),t=Math.max(0,t),t=Math.min(1,t),this.S=e,this.B=t,a.style.left=e*r.width-i.width/2+"px",a.style.top=(1-t)*r.height-i.height/2+"px",this.update()}getSpectrumValue(){const e=this.spectrumDragger,t=e.getBoundingClientRect(),r=parseFloat(e.style.left)+t.width/2,a=parseFloat(e.style.top)+t.height/2;return{x:r,y:a}}initRecentColors(){const t=Ce.recentColors.map((r,a)=>`<div class="ag-recent-color" id=${a} style="background-color: ${r}; width: 15px; height: 15px;" recent-color="${r}" tabIndex="${this.tabIndex}"></div>`);this.recentColors.innerHTML=t.join("")}setValue(e){const t=$e.Color.fromString(e),[r,a,i]=t.toHSB();this.H=(isNaN(r)?0:r)/360,this.A=t.a;const n=this.spectrumHueRect||this.refreshHueRect(),o=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=`${(this.H-1)*-n.width}px`,this.spectrumAlphaSlider.style.left=`${this.A*o.width}px`,this.setSpectrumValue(a,i)}onRecentColorClick(e){const t=e.target;if(!hc.exists(t.id))return;const r=parseInt(t.id,10);this.setValue(Ce.recentColors[r]),this.destroy()}addRecentColor(){const t=$e.Color.fromHSB(this.H*360,this.S,this.B,this.A).toRgbaString();let r=Ce.recentColors;!this.colorChanged||r[0]===t||(r=r.filter(a=>a!=t),r=[t].concat(r),r.length>Ce.maxRecentColors&&(r=r.slice(0,Ce.maxRecentColors)),Ce.recentColors=r)}destroy(){this.addRecentColor(),super.destroy()}};z.maxRecentColors=8,z.recentColors=[],z.TEMPLATE=`<div class="ag-color-panel" tabindex="-1">
            <div ref="spectrumColor" class="ag-spectrum-color">
                <div class="ag-spectrum-sat ag-spectrum-fill">
                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">
                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>
                    </div>
                </div>
            </div>
            <div class="ag-spectrum-tools">
                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">
                    <div class="ag-spectrum-hue-background"></div>
                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">
                    <div class="ag-spectrum-alpha-background"></div>
                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="recentColors" class="ag-recent-colors"></div>
            </div>
        </div>`,p([ce("spectrumColor")],z.prototype,"spectrumColor",2),p([ce("spectrumVal")],z.prototype,"spectrumVal",2),p([ce("spectrumDragger")],z.prototype,"spectrumDragger",2),p([ce("spectrumHue")],z.prototype,"spectrumHue",2),p([ce("spectrumHueSlider")],z.prototype,"spectrumHueSlider",2),p([ce("spectrumAlpha")],z.prototype,"spectrumAlpha",2),p([ce("spectrumAlphaSlider")],z.prototype,"spectrumAlphaSlider",2),p([ce("recentColors")],z.prototype,"recentColors",2),p([cc],z.prototype,"postConstruct",1);var dc=z;import{AgPickerField as uc,AgDialog as pc}from"@ag-grid-community/core";var Rs=class extends uc{constructor(s){super(T({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list",className:"ag-color-picker",pickerIcon:"colorPicker"},s))}postConstruct(){super.postConstruct(),this.value&&this.setValue(this.value)}createPickerComponent(){const s=this.getGui().getBoundingClientRect();return this.createBean(new pc({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:s.right-190,y:s.top-250}))}renderAndPositionPicker(){const s=this.pickerComponent,e=this.createBean(new dc({picker:this}));return s.addCssClass("ag-color-dialog"),e.addDestroyFunc(()=>{s.isAlive()&&this.destroyBean(s)}),s.setParentComponent(this),s.setBodyComponent(e),e.setValue(this.getValue()),e.getGui().focus(),s.addDestroyFunc(()=>{this.isDestroyingPicker?this.isDestroyingPicker=!1:(this.beforeHidePicker(),this.isDestroyingPicker=!0,e.isAlive()&&this.destroyBean(e),this.isAlive()&&this.getFocusableElement().focus())}),()=>{var t;return(t=this.pickerComponent)==null?void 0:t.close()}}setValue(s){return this.value===s?this:(this.eDisplayField.style.backgroundColor=s,super.setValue(s))}getValue(){return this.value}};import{Autowired as gc,Component as mc,PostConstruct as Cc}from"@ag-grid-community/core";var It=class oi extends mc{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("callout"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(oi.TEMPLATE,{calloutGroup:e,calloutLengthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.length","length",40),calloutStrokeWidthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.strokeWidth","strokeWidth",10),labelOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLabel.offset","offset",30)})}};It.TEMPLATE=`<div>
            <ag-group-component ref="calloutGroup">
                <ag-slider ref="calloutLengthSlider"></ag-slider>
                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>
                <ag-slider ref="labelOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([gc("chartTranslationService")],It.prototype,"chartTranslationService",2),p([Cc],It.prototype,"init",1);var fc=It;import{Autowired as vc,Component as yc,PostConstruct as Sc}from"@ag-grid-community/core";var Lt=class li extends yc{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("cap"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0},t=this.chartMenuUtils.getDefaultSliderParams("cap.lengthRatio","capLengthRatio",1);t.step=.05,this.setTemplate(li.TEMPLATE,{capsGroup:e,capLengthRatioSlider:t})}};Lt.TEMPLATE=`<div>
            <ag-group-component ref="capsGroup">
                <ag-slider ref="capLengthRatioSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([vc("chartTranslationService")],Lt.prototype,"chartTranslationService",2),p([Sc],Lt.prototype,"init",1);var Tc=Lt;import{Autowired as Pc,Component as bc,PostConstruct as Ac}from"@ag-grid-community/core";var Rt=class ci extends bc{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("connectorLine"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(ci.TEMPLATE,{lineGroup:e,lineColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("line.stroke"),lineStrokeWidthSlider:this.getSliderParams("strokeWidth",10,"line.strokeWidth"),lineDashSlider:this.getSliderParams("lineDash",30,"line.lineDash",1,!0),lineOpacitySlider:this.getSliderParams("strokeOpacity",1,"line.strokeOpacity",.05)})}getSliderParams(e,t,r,a=1,i=!1){const n=this.chartMenuUtils.getDefaultSliderParams(r,e,t,i);return n.step=a,n}};Rt.TEMPLATE=`<div>
            <ag-group-component ref="lineGroup">
                <ag-color-picker ref="lineColorPicker"></ag-color-picker>
                <ag-slider ref="lineStrokeWidthSlider"></ag-slider>
                <ag-slider ref="lineOpacitySlider"></ag-slider>
                <ag-slider ref="lineDashSlider"></ag-slider>                
            </ag-group-component>
        </div>`,p([Pc("chartTranslationService")],Rt.prototype,"chartTranslationService",2),p([Ac],Rt.prototype,"init",1);var xc=Rt;import{Autowired as Mc,Component as Ec,PostConstruct as wc}from"@ag-grid-community/core";var _t=class hi extends Ec{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("whisker"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(hi.TEMPLATE,{whiskersGroup:e,whiskerColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("whisker.stroke"),whiskerThicknessSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeWidth","strokeWidth",10),whiskerOpacitySlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeOpacity","strokeOpacity",1),whiskerLineDashSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDash","lineDash",30,!0),whiskerLineDashOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDashOffset","lineDashOffset",30)})}};_t.TEMPLATE=`<div>
            <ag-group-component ref="whiskersGroup">
                <ag-color-picker ref="whiskerColorPicker"></ag-color-picker>
                <ag-slider ref="whiskerThicknessSlider"></ag-slider>
                <ag-slider ref="whiskerOpacitySlider"></ag-slider>
                <ag-slider ref="whiskerLineDashSlider"></ag-slider>
                <ag-slider ref="whiskerLineDashOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([Mc("chartTranslationService")],_t.prototype,"chartTranslationService",2),p([wc],_t.prototype,"init",1);var Oc=_t;import{_ as Dc,AgSlider as kc,Autowired as Ic,Component as Lc,PostConstruct as Rc,RefSelector as _c}from"@ag-grid-community/core";var Xe=class di extends Lc{constructor(e){super(),this.chartMenuUtils=e,this.activePanels=[]}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("seriesItems"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(di.TEMPLATE,{seriesItemsGroup:e,seriesItemSelect:this.getSeriesItemsParams()}),this.initSeriesControls()}getSeriesItemsParams(){const e=[{value:"positive",text:this.chartTranslationService.translate("seriesItemPositive")},{value:"negative",text:this.chartTranslationService.translate("seriesItemNegative")}],t=r=>{this.destroyActivePanels(),this.initSeriesControls(r)};return{label:this.chartTranslationService.translate("seriesItemType"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:e,value:"positive",onValueChange:t}}initSeriesControls(e="positive"){this.initSlider("strokeWidth",10,`item.${e}.strokeWidth`),this.initSlider("lineDash",30,`item.${e}.lineDash`,1,!0),this.initSlider("strokeOpacity",1,`item.${e}.strokeOpacity`,.05,!1),this.initSlider("fillOpacity",1,`item.${e}.fillOpacity`,.05,!1),this.initItemLabels(e)}initSlider(e,t,r,a=1,i=!1){const n=this.chartMenuUtils.getDefaultSliderParams(r,e,t,i);n.step=a;const o=this.seriesItemsGroup.createManagedBean(new kc(n));this.seriesItemsGroup.addItem(o),this.activePanels.push(o)}initItemLabels(e){const t=this.chartMenuUtils.getDefaultFontPanelParams(`item.${e}.label`,"seriesItemLabels"),r=this.createBean(new oe(t));this.seriesItemsGroup.addItem(r),this.activePanels.push(r)}destroyActivePanels(){this.activePanels.forEach(e=>{Dc.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};Xe.TEMPLATE=`<div>
            <ag-group-component ref="seriesItemsGroup">
                <ag-select ref="seriesItemSelect"></ag-select>
            </ag-group-component>
        </div>`,p([_c("seriesItemsGroup")],Xe.prototype,"seriesItemsGroup",2),p([Ic("chartTranslationService")],Xe.prototype,"chartTranslationService",2),p([Rc],Xe.prototype,"init",1);var Gc=Xe;import{Autowired as Fc,Component as Vc,PostConstruct as Nc}from"@ag-grid-community/core";var Gt=class ui extends Vc{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(ui.TEMPLATE,{groupSpacing:A(T({},e),{title:this.chartTranslationService.translate("group")}),tileSpacing:A(T({},e),{title:this.chartTranslationService.translate("tile")}),groupPaddingSlider:this.getSliderParams("padding","group.padding"),groupSpacingSlider:this.getSliderParams("spacing","group.gap"),tilePaddingSlider:this.getSliderParams("padding","tile.padding"),tileSpacingSlider:this.getSliderParams("spacing","tile.gap")})}getSliderParams(e,t){return this.chartMenuUtils.getDefaultSliderParams(t,e,10)}};Gt.TEMPLATE=`<div>
            <ag-group-component ref="groupSpacing">
                <ag-slider ref="groupPaddingSlider"></ag-slider>
                <ag-slider ref="groupSpacingSlider"></ag-slider>
            </ag-group-component>
            <ag-group-component ref="tileSpacing">
                <ag-slider ref="tilePaddingSlider"></ag-slider>
                <ag-slider ref="tileSpacingSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([Fc("chartTranslationService")],Gt.prototype,"chartTranslationService",2),p([Nc],Gt.prototype,"init",1);var Bc=Gt,je=class pi extends Xl{constructor({chartController:e,chartOptionsService:t,seriesType:r,isExpandedOnInit:a=!1}){super(),this.activePanels=[],this.widgetFuncs={lineWidth:()=>this.initStrokeWidth("lineWidth"),strokeWidth:()=>this.initStrokeWidth("strokeWidth"),lineColor:()=>this.initLineColor(),lineDash:()=>this.initLineDash(),lineOpacity:()=>this.initLineOpacity(),fillOpacity:()=>this.initFillOpacity(),markers:()=>this.initMarkers(),labels:()=>this.initLabels(),shadow:()=>this.initShadow(),tooltips:()=>this.initTooltips(),bins:()=>this.initBins(),whiskers:()=>this.initWhiskers(),caps:()=>this.initCaps(),connectorLine:()=>this.initConnectorLine(),seriesItems:()=>this.initSeriesItemsPanel(),tileSpacing:()=>this.initTileSpacingPanel(),groupType:()=>this.initGroupType()},this.seriesWidgetMappings={bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"],donut:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],scatter:["tooltips","markers","labels"],bubble:["tooltips","markers","labels"],area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],"radial-column":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","groupType"],"radial-bar":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","groupType"],"radar-line":["tooltips","strokeWidth","lineDash","lineOpacity","markers","labels"],"radar-area":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","markers","labels"],nightingale:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","groupType"],"box-plot":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","whiskers","caps"],"range-bar":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"range-area":["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],treemap:["tooltips","tileSpacing"],sunburst:["tooltips"],heatmap:["tooltips","labels","lineColor","lineWidth","lineOpacity"],waterfall:["tooltips","connectorLine","seriesItems"]},this.chartController=e,this.chartOptionsService=t,this.seriesType=r||this.chartController.getChartSeriesType(),this.isExpandedOnInit=a}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("series"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0};this.setTemplate(pi.TEMPLATE,{seriesGroup:e}),this.chartMenuUtils=this.createManagedBean(new be(this.chartOptionsService.getSeriesOptionsProxy(()=>this.seriesType))),this.chartOptions=this.chartMenuUtils.getChartOptions(),this.addManagedListener(this.chartController,W.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()}refreshWidgets(){this.destroyActivePanels(),this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>{var t;this.isAlive()&&(this.chartController.isComboChart()&&(this.updateSeriesType(),this.initSeriesSelect()),((t=this.seriesWidgetMappings[this.seriesType])!=null?t:[]).forEach(a=>this.widgetFuncs[a]()))}).catch(t=>console.error("AG Grid - chart rendering failed",t))}initSeriesSelect(){const e=this.seriesGroup.createManagedBean(new pr({label:this.translate("seriesType"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:this.getSeriesSelectOptions(),value:`${this.seriesType}`,onValueChange:t=>{this.seriesType=t,this.refreshWidgets()}}));this.seriesGroup.addItem(e),this.activePanels.push(e)}initTooltips(){const e=this.createBean(new Kl(this.chartMenuUtils.addValueParams("tooltip.enabled",{label:this.translate("tooltips"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex"})));this.addWidget(e)}initLineColor(){const e=this.createBean(new Rs(this.chartMenuUtils.getDefaultColorPickerParams("stroke","strokeColor")));this.addWidget(e)}initStrokeWidth(e){const t=this.createBean(new Ae(this.chartMenuUtils.getDefaultSliderParams("strokeWidth",e,10)));this.addWidget(t)}initLineDash(){const e=this.createBean(new Ae(this.chartMenuUtils.getDefaultSliderParams("lineDash","lineDash",30,!0)));this.addWidget(e)}initLineOpacity(){const e=this.chartMenuUtils.getDefaultSliderParams("strokeOpacity","strokeOpacity",1);e.step=.05;const t=this.createBean(new Ae(e));this.addWidget(t)}initFillOpacity(){const e=this.chartMenuUtils.getDefaultSliderParams("fillOpacity","fillOpacity",1);e.step=.05;const t=this.createBean(new Ae(e));this.addWidget(t)}initLabels(){const e=ns(this.seriesType),t=e?"calloutLabel":"label",r=e?"calloutLabels":"labels",a=this.chartMenuUtils.getDefaultFontPanelParams(t,r),i=this.createBean(new oe(a));if(e){const n=this.createBean(new fc(this.chartMenuUtils));i.addCompToPanel(n),this.activePanels.push(n)}if(this.addWidget(i),e){const n=this.chartMenuUtils.getDefaultFontPanelParams("sectorLabel","sectorLabels"),o=this.createBean(new oe(n)),l=this.getSectorLabelPositionRatio();o.addCompToPanel(l),this.addWidget(o)}if(this.seriesType==="range-bar"){const n=[{value:"inside",text:this.translate("inside")},{value:"outside",text:this.translate("outside")}],o=i.createManagedBean(new pr(this.chartMenuUtils.addValueParams("label.placement",{label:this.translate("labelPlacement"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:n})));i.addCompToPanel(o),this.activePanels.push(o);const l=i.createManagedBean(new Ae(this.chartMenuUtils.getDefaultSliderParams("label.padding","padding",200)));i.addCompToPanel(l),this.activePanels.push(l)}}getSectorLabelPositionRatio(){const e=this.chartMenuUtils.getDefaultSliderParams("sectorLabel.positionRatio","positionRatio",1);return e.step=.05,this.createBean(new Ae(e))}initShadow(){const e=this.createBean(new tc(this.chartMenuUtils));this.addWidget(e)}initMarkers(){const e=this.createBean(new oc(this.chartOptionsService,this.chartMenuUtils));this.addWidget(e)}initBins(){var e;const t=this.chartMenuUtils.getDefaultSliderParams("binCount","histogramBinCount",20),r=((e=this.chartOptions.getValue("bins"))!=null?e:this.chartOptions.getValue("calculatedBins",!0)).length;t.value=`${r}`,t.maxValue=Math.max(r,20);const a=this.createBean(new Ae(t));this.addWidget(a)}initWhiskers(){const e=this.createBean(new Oc(this.chartMenuUtils));this.addWidget(e)}initCaps(){const e=this.createBean(new Tc(this.chartMenuUtils));this.addWidget(e)}initConnectorLine(){const e=this.createBean(new xc(this.chartMenuUtils));this.addWidget(e)}initSeriesItemsPanel(){const e=this.createBean(new Gc(this.chartMenuUtils));this.addWidget(e)}initTileSpacingPanel(){const e=this.createBean(new Bc(this.chartMenuUtils));this.addWidget(e)}initGroupType(){const e=this.createBean(new pr({label:this.chartTranslationService.translate("seriesGroupType"),options:Zl.SERIES_GROUP_TYPES.map(t=>({value:t,text:this.chartTranslationService.translate(`${t}SeriesGroupType`)})),value:this.chartController.getSeriesGroupType(),onValueChange:t=>this.chartController.setSeriesGroupType(t)}));this.addWidget(e)}addWidget(e){this.seriesGroup.addItem(e),this.activePanels.push(e)}getSeriesSelectOptions(){const e=this.getActiveSeriesTypes();return["area","bar","line"].filter(t=>e.includes(t)).map(t=>({value:t,text:this.translate(t)}))}updateSeriesType(){const e=this.getActiveSeriesTypes();!e.includes(this.seriesType)&&e.length>0&&(this.seriesType=e[0])}getActiveSeriesTypes(){return this.chartController.getActiveSeriesChartTypes().map(e=>w(e.chartType))}translate(e){return this.chartTranslationService.translate(e)}destroyActivePanels(){this.activePanels.forEach(e=>{Yl.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};je.TEMPLATE=`<div>
            <ag-group-component ref="seriesGroup">
            </ag-group-component>
        </div>`,p([ql("seriesGroup")],je.prototype,"seriesGroup",2),p([$l("chartTranslationService")],je.prototype,"chartTranslationService",2),p([jl],je.prototype,"init",1);var Uc=je;import{Autowired as Hc,Component as Wc,PostConstruct as zc}from"@ag-grid-community/core";var Ft=class gi extends Wc{constructor({chartMenuParamsFactory:e,isExpandedOnInit:t=!1}){super(),this.chartMenuUtils=e,this.isExpandedOnInit=t}init(){const e=this.chartMenuUtils.addEnableParams("gradientLegend.enabled",{cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("legend"),suppressEnabledCheckbox:!1,suppressToggleExpandOnEnableChange:!0,expanded:this.isExpandedOnInit,items:[this.createLabelPanel()]});this.setTemplate(gi.TEMPLATE,{legendGroup:e,legendPositionSelect:this.chartMenuUtils.getDefaultLegendParams("gradientLegend.position"),gradientReverseCheckbox:this.getGradientReverseCheckboxParams(),gradientThicknessSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.gradient.thickness","thickness",40),gradientPreferredLengthSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.gradient.preferredLength","preferredLength",300),legendSpacingSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.spacing","spacing",200)})}getGradientReverseCheckboxParams(){return this.chartMenuUtils.addValueParams("gradientLegend.reverseOrder",{label:this.chartTranslationService.translate("reverseDirection"),labelWidth:"flex"})}createLabelPanel(){const e={enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:t=>`gradientLegend.scale.label.${t}`};return this.createManagedBean(new oe(e))}};Ft.TEMPLATE=`<div>
            <ag-group-component ref="legendGroup">
                <ag-select ref="legendPositionSelect"></ag-select>
                <ag-checkbox ref="gradientReverseCheckbox"></ag-checkbox>
                <ag-slider ref="gradientThicknessSlider"></ag-slider>
                <ag-slider ref="gradientPreferredLengthSlider"></ag-slider>
                <ag-slider ref="legendSpacingSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([Hc("chartTranslationService")],Ft.prototype,"chartTranslationService",2),p([zc],Ft.prototype,"init",1);var Yc=Ft;import{BeanStub as Kc,PostConstruct as $c,_ as Xc}from"@ag-grid-community/core";var gr=class extends Kc{constructor(s,e,t,r){super(),this.chartController=s,this.eGui=e,this.cssClass=t,this.createPanels=r,this.panels=[]}postConstruct(){this.addManagedListener(this.chartController,W.EVENT_CHART_UPDATED,()=>this.refreshPanels(!0)),this.addManagedListener(this.chartController,W.EVENT_CHART_API_UPDATE,()=>this.refreshPanels(!1))}addComponent(s){this.createBean(s),this.panels.push(s),s.addCssClass(this.cssClass),this.eGui.appendChild(s.getGui())}refreshPanels(s){const e=this.chartController.getChartType(),t=this.chartController.isGrouping(),r=w(e);s&&e===this.chartType&&t===this.isGrouping||(this.destroyPanels(),this.createPanels(e,r),this.chartType=e,this.isGrouping=t)}destroyPanels(){this.panels.forEach(s=>{Xc.removeFromParent(s.getGui()),this.destroyBean(s)}),this.panels=[]}destroy(){this.destroyPanels(),super.destroy()}};p([$c],gr.prototype,"postConstruct",1);var jc={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"}]},mr=class mi extends Ho{constructor(e){super(mi.TEMPLATE),this.chartMenuContext=e}init(){this.chartPanelFeature=this.createManagedBean(new gr(this.chartMenuContext.chartController,this.getGui(),"ag-chart-format-section",(e,t)=>this.createPanels(e,t))),this.chartPanelFeature.refreshPanels()}createPanels(e,t){var r;(r=this.getFormatPanelDef().groups)==null||r.forEach(a=>{const i=a.type;if(!this.isGroupPanelShownInSeries(i,t))return;const n=A(T({},this.chartMenuContext),{isExpandedOnInit:a.isOpen,seriesType:t});switch(i){case"chart":this.chartPanelFeature.addComponent(new zl(n));break;case"legend":const o=["treemap","sunburst","heatmap"].includes(e)?new Yc(n):new Zo(n);this.chartPanelFeature.addComponent(o);break;case"axis":as(t)?this.chartPanelFeature.addComponent(new Al(n)):ye(t)&&(this.chartPanelFeature.addComponent(new Ot("xAxis",n)),this.chartPanelFeature.addComponent(new Ot("yAxis",n)));break;case"horizontalAxis":this.chartPanelFeature.addComponent(new Ot("xAxis",n));break;case"verticalAxis":this.chartPanelFeature.addComponent(new Ot("yAxis",n));break;case"series":this.chartPanelFeature.addComponent(new Uc(n));break;case"navigator":Os.warnOnce("'navigator' is now displayed in the charts advanced settings instead of the format panel, and this setting will be ignored.");default:Os.warnOnce(`Invalid charts format panel group name supplied: '${a.type}'`)}})}getFormatPanelDef(){var e;const t=(e=this.gos.get("chartToolPanelsDef"))==null?void 0:e.formatPanel;return t||jc}isGroupPanelShownInSeries(e,t){return["chart","legend","series"].includes(e)||ye(t)&&["axis","horizontalAxis","verticalAxis"].includes(e)||as(t)&&e==="axis"}};mr.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',p([Wo],mr.prototype,"init",1);var qc=mr;import{_ as ee,Component as Zc,PostConstruct as Jc,RefSelector as qe}from"@ag-grid-community/core";import{_ as _s,AgGroupComponent as Qc,Autowired as eh,Component as th,PostConstruct as rh}from"@ag-grid-community/core";import{PostConstruct as sh}from"@ag-grid-community/core";import{Autowired as ah,Component as ih,PostConstruct as nh}from"@ag-grid-community/core";import{_Scene as Gs}from"ag-charts-community";var oh="ag-chart-mini-thumbnail-canvas",lh="AG Grid - chart update failed",he=class extends ih{constructor(s,e){super(),this.tooltipName=e,this.size=58,this.padding=5,this.root=new Gs.Group;const t=new Gs.Scene({width:this.size,height:this.size});t.canvas.element.classList.add(oh),t.setRoot(this.root),t.setContainer(s),this.scene=t}init(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch(s=>{console.error(`${lh}`,s)})}};p([ah("chartTranslationService")],he.prototype,"chartTranslationService",2),p([nh],he.prototype,"init",1);import{_Scene as Fs}from"ag-charts-community";var F=class extends he{constructor(s,e){super(s,e),this.stroke="gray",this.axisOvershoot=3}addAxes(){const s=this.size,e=this.padding,t=new Fs.Line;t.x1=e,t.y1=e,t.x2=e,t.y2=s-e+this.axisOvershoot,t.stroke=this.stroke;const r=new Fs.Line;r.x1=e-this.axisOvershoot+1,r.y1=s-e,r.x2=s-e+1,r.y2=s-e,r.stroke=this.stroke;const a=this.root;a.append(t),a.append(r)}};p([sh],F.prototype,"addAxes",1);import{_Scene as Y}from"ag-charts-community";function Ze(s){const{stacked:e,size:t,padding:r,xScalePadding:a,xScaleDomain:i,yScaleDomain:n}=s,o=new Y.BandScale;o.domain=i,o.range=[r,t-r],o.paddingInner=a,o.paddingOuter=a;const l=new Y.LinearScale;l.domain=n,l.range=[t-r,r];const c=(h,d,u)=>h.map((g,m)=>{const f=u.convert(g),C=new Y.Rect;return C.x=d.convert(m),C.y=f,C.width=d.bandwidth,C.height=u.convert(0)-f,C.strokeWidth=0,C.crisp=!0,C});return e?s.data.map(h=>c(h,o,l)):c(s.data,o,l)}function Cr(s,e,t,r){const a=new Y.LinearScale;a.domain=[0,4],a.range=[r,t-r];const i=new Y.LinearScale;i.domain=[0,10],i.range=[t-r,r];const n=e.map(l=>{const c=new Y.Path;return c.strokeWidth=3,c.lineCap="round",c.fill=void 0,l.forEach((h,d)=>{c.path[d>0?"lineTo":"moveTo"](a.convert(d),i.convert(h))}),c}),o=new Y.Group;return o.setClipRectInGroupCoordinateSpace(new Y.BBox(r,r,t-r*2,t-r*2)),o.append(n),s.append(o),n}function Vs(s,e,t,r,a,i=0){const n=new Y.LinearScale;n.domain=[0,7],n.range=[-Math.PI,Math.PI].map(u=>u+Math.PI/2);const o=new Y.LinearScale;o.domain=[0,10],o.range=[r,a];const l=[],c=e.map(u=>{const g=new Y.Path;return g.strokeWidth=1,g.strokeOpacity=.5,g.lineCap="round",g.fill=void 0,g.fillOpacity=.8,u.forEach((m,f)=>{const C=n.convert(f),y=r+a-o.convert(m),v=y*Math.cos(C),S=y*Math.sin(C);if(g.path[f>0?"lineTo":"moveTo"](v,S),i>0){const P=new Y.Circle;P.x=v,P.y=S,P.size=i,l.push(P)}}),g.path.closePath(),g}),h=new Y.Group,d=t/2;return h.translationX=d,h.translationY=d,h.append([...c,...l]),s.append(h),{paths:c,markers:l}}function Vt(s){let[e,t]=[1/0,-1/0];return{processedData:s.reduce((a,i,n)=>{var o;const l=n>0?a[n-1]:void 0;(o=a[n])!=null||(a[n]=[]);const c=a[n];return i.forEach((h,d)=>{l&&(h+=l[d]),c[d]=h,c[d]<e&&(e=c[d]),c[d]>t&&(t=c[d])}),a},[]),min:e,max:t}}var Ns=class extends F{constructor(s,e,t){super(s,"groupedColumnTooltip"),this.columnData=[2,3,4];const{root:r,columnData:a,size:i,padding:n}=this;this.columns=Ze({stacked:!1,root:r,data:a,size:i,padding:n,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),r.append(this.columns),this.updateColors(e,t)}updateColors(s,e){this.columns.forEach((t,r)=>{t.fill=s[r],t.stroke=e[r]})}};Ns.chartType="groupedColumn";var fr=class Ci extends F{constructor(e,t,r,a,i,n=Ci.data,o=[0,16],l="stackedColumnTooltip"){super(e,l);const{root:c,size:h,padding:d}=this;this.stackedColumns=Ze({stacked:!0,root:c,data:n,size:h,padding:d,xScaleDomain:[0,1,2],yScaleDomain:o,xScalePadding:.3}),c.append([].concat.apply([],this.stackedColumns)),this.updateColors(t,r)}updateColors(e,t){this.stackedColumns.forEach((r,a)=>r.forEach(i=>{i.fill=e[a],i.stroke=t[a]}))}};fr.chartType="stackedColumn",fr.data=[[8,12,16],[6,9,12],[2,3,4]];var Bs=fr,vr=class fi extends Bs{constructor(e,t,r,a,i){super(e,t,r,a,i,fi.data,[0,10],"normalizedColumnTooltip")}};vr.chartType="normalizedColumn",vr.data=[[10,10,10],[6,7,8],[2,4,6]];var ch=vr;import{_Scene as yr}from"ag-charts-community";var Us=class extends F{constructor(s,e,t){super(s,"groupedBarTooltip");const r=this.padding,a=this.size,i=[2,3,4],n=new yr.BandScale;n.domain=[0,1,2],n.range=[r,a-r],n.paddingInner=.3,n.paddingOuter=.3;const o=new yr.LinearScale;o.domain=[0,4],o.range=[a-r,r];const l=o.convert(0),c=n.bandwidth;this.bars=i.map((h,d)=>{const u=new yr.Rect;return u.x=r,u.y=n.convert(d),u.width=l-o.convert(h),u.height=c,u.strokeWidth=0,u.crisp=!0,u}),this.updateColors(e,t),this.root.append(this.bars)}updateColors(s,e){this.bars.forEach((t,r)=>{t.fill=s[r],t.stroke=e[r]})}};Us.chartType="groupedBar";import{_Scene as Sr}from"ag-charts-community";var Tr=class vi extends F{constructor(e,t,r,a,i,n=vi.data,o=[0,16],l="stackedBarTooltip"){super(e,l);const c=this.size,h=this.padding,d=new Sr.BandScale;d.domain=[0,1,2],d.range=[h,c-h],d.paddingInner=.3,d.paddingOuter=.3;const u=new Sr.LinearScale;u.domain=o,u.range=[c-h,h];const g=u.convert(0),m=d.bandwidth;this.bars=n.map(f=>f.map((C,y)=>{const v=new Sr.Rect;return v.x=h,v.y=d.convert(y),v.width=g-u.convert(C),v.height=m,v.strokeWidth=0,v.crisp=!0,v})),this.updateColors(t,r),this.root.append([].concat.apply([],this.bars))}updateColors(e,t){this.bars.forEach((r,a)=>r.forEach(i=>{i.fill=e[a],i.stroke=t[a]}))}};Tr.chartType="stackedBar",Tr.data=[[8,12,16],[6,9,12],[2,3,4]];var Hs=Tr,Pr=class yi extends Hs{constructor(e,t,r,a,i){super(e,t,r,a,i,yi.data,[0,10],"normalizedBarTooltip")}};Pr.chartType="normalizedBar",Pr.data=[[10,10,10],[6,7,8],[2,4,6]];var hh=Pr;import{_Scene as Ws}from"ag-charts-community";var $=Ws.toRadians,Nt=class extends he{constructor(s,e,t,r,a,i=.6,n="donutTooltip"){super(s,n);const o=(this.size-this.padding*2)/2,l=o+this.padding,c=[[$(-90),$(30)],[$(30),$(120)],[$(120),$(180)],[$(180),$(210)],[$(210),$(240)],[$(240),$(270)]];this.sectors=c.map(([h,d])=>{const u=new Ws.Sector;return u.centerX=l,u.centerY=l,u.innerRadius=o*i,u.outerRadius=o,u.startAngle=h,u.endAngle=d,u.stroke=void 0,u.strokeWidth=0,u.inset=.75,u}),this.updateColors(e,t),this.root.append(this.sectors)}updateColors(s,e){this.sectors.forEach((t,r)=>{t.fill=s[r%s.length],t.stroke=e[r%e.length]})}};Nt.chartType="donut";var zs=class extends Nt{constructor(s,e,t,r,a){super(s,e,t,r,a,0,"pieTooltip")}};zs.chartType="pie";var Ys=class extends F{constructor(s,e,t){super(s,"lineTooltip"),this.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],this.lines=Cr(this.root,this.data,this.size,this.padding),this.updateColors(e,t)}updateColors(s,e){this.lines.forEach((t,r)=>{t.stroke=s[r]})}};Ys.chartType="line";import{_Scene as Je}from"ag-charts-community";var Ks=class extends F{constructor(s,e,t){super(s,"scatterTooltip");const r=this.size,a=this.padding,i=[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]],n=new Je.LinearScale;n.domain=[-.5,4],n.range=[a*2,r-a];const o=new Je.LinearScale;o.domain=[-.5,3.5],o.range=[r-a,a];const l=[];i.forEach(h=>{h.forEach(([d,u])=>{const g=new Je.Arc;g.strokeWidth=0,g.centerX=n.convert(d),g.centerY=o.convert(u),g.radius=2.5,l.push(g)})}),this.points=l,this.updateColors(e,t);const c=new Je.Group;c.setClipRectInGroupCoordinateSpace(new Je.BBox(a,a,r-a*2,r-a*2)),c.append(this.points),this.root.append(c)}updateColors(s,e){this.points.forEach((t,r)=>{t.stroke=e[r%e.length],t.fill=s[r%s.length]})}};Ks.chartType="scatter";import{_Scene as Qe}from"ag-charts-community";var $s=class extends F{constructor(s,e,t){super(s,"bubbleTooltip");const r=this.size,a=this.padding,i=[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]],n=new Qe.LinearScale;n.domain=[0,1],n.range=[a*2,r-a];const o=new Qe.LinearScale;o.domain=[0,1],o.range=[r-a,a];const l=[];i.forEach(h=>{h.forEach(([d,u,g])=>{const m=new Qe.Arc;m.strokeWidth=0,m.centerX=n.convert(d),m.centerY=o.convert(u),m.radius=g,m.fillOpacity=.7,l.push(m)})}),this.points=l,this.updateColors(e,t);const c=new Qe.Group;c.setClipRectInGroupCoordinateSpace(new Qe.BBox(a,a,r-a*2,r-a*2)),c.append(this.points),this.root.append(c)}updateColors(s,e){this.points.forEach((t,r)=>{t.stroke=e[r%e.length],t.fill=s[r%s.length]})}};$s.chartType="bubble";import{_Scene as br}from"ag-charts-community";var Ar=class Si extends F{constructor(e,t,r,a,i,n=Si.data){super(e,"groupedAreaTooltip");const o=this.size,l=this.padding,c=new br.BandScale;c.domain=[0,1,2],c.paddingInner=1,c.paddingOuter=0,c.range=[l+.5,o-l-.5];const h=new br.LinearScale;h.domain=[0,6],h.range=[o-l+.5,l];const u=n.length*2-1,g=[],m=h.convert(0);n.forEach((f,C)=>{const y=c.convert(C);f.forEach((v,S)=>{const P=h.convert(v),M=g[S]||(g[S]=[]);M[C]={x:y,y:P},M[u-C]={x:y,y:m}})}),this.areas=g.reverse().map(f=>{const C=new br.Path;C.strokeWidth=1,C.strokeOpacity=.75,C.fillOpacity=.7;const y=C.path;return y.clear(),f.forEach((v,S)=>y[S>0?"lineTo":"moveTo"](v.x,v.y)),y.closePath(),C}),this.updateColors(t,r),this.root.append(this.areas)}updateColors(e,t){this.areas.forEach((r,a)=>{r.fill=e[a],r.stroke=t[a]})}};Ar.chartType="area",Ar.data=[[1,3,5],[2,6,4],[5,3,1]];var dh=Ar;import{_Scene as xr}from"ag-charts-community";var Mr=class Ti extends F{constructor(e,t,r,a,i,n=Ti.data,o="stackedAreaTooltip"){super(e,o);const l=this.size,c=this.padding,h=new xr.BandScale;h.domain=[0,1,2],h.paddingInner=1,h.paddingOuter=0,h.range=[c+.5,l-c-.5];const d=new xr.LinearScale;d.domain=[0,16],d.range=[l-c+.5,c+.5];const g=n.length*2-1,m=[];n.forEach((f,C)=>{const y=h.convert(C);let v=0;f.forEach((S,P)=>{const M=d.convert(v+S),b=m[P]||(m[P]=[]);b[C]={x:y,y:M},b[g-C]={x:y,y:d.convert(v)},v+=S})}),this.areas=m.map(f=>{const C=new xr.Path;C.strokeWidth=0;const y=C.path;return y.clear(),f.forEach((v,S)=>y[S>0?"lineTo":"moveTo"](v.x,v.y)),y.closePath(),C}),this.updateColors(t,r),this.root.append(this.areas)}updateColors(e,t){this.areas.forEach((r,a)=>{r.fill=e[a],r.stroke=t[a]})}};Mr.chartType="stackedArea",Mr.data=[[2,3,2],[3,6,5],[6,2,2]];var Er=Mr,wr=class Pi extends Er{constructor(e,t,r,a,i,n=Pi.data){super(e,t,r,a,i,n,"normalizedAreaTooltip")}};wr.chartType="normalizedArea",wr.data=Er.data.map(s=>{const e=s.reduce((t,r)=>t+r,0);return s.map(t=>t/e*16)});var uh=wr;import{_Scene as Or}from"ag-charts-community";var Xs=class extends F{constructor(s,e,t){super(s,"histogramTooltip");const r=this.padding,a=this.size,i=[2,5,11,13,10,6,1],n=new Or.LinearScale;n.domain=[0,i.length],n.range=[r,a-r];const o=new Or.LinearScale;o.domain=[0,i.reduce((c,h)=>Math.max(c,h),0)],o.range=[a-r,r];const l=o.convert(0);this.bars=i.map((c,h)=>{const d=o.convert(c),u=n.convert(h),g=n.convert(h+1),m=new Or.Rect;return m.x=u,m.y=d,m.width=g-u,m.height=l-d,m.strokeWidth=1,m.strokeOpacity=.75,m.crisp=!0,m}),this.updateColors(e,t),this.root.append(this.bars)}updateColors([s],[e]){this.bars.forEach(t=>{t.fill=s,t.stroke=e})}};Xs.chartType="histogram";import{_Scene as et}from"ag-charts-community";import{PostConstruct as ph}from"@ag-grid-community/core";import{_Scene as js}from"ag-charts-community";var xe=class extends he{constructor(s,e){super(s,e),this.stroke="gray",this.showRadiusAxisLine=!0,this.showAngleAxisLines=!0}addAxes(){const s=this.size,e=this.padding,t=e*2,r=(s-t)/2,a=this.showAngleAxisLines?[r,r*.8,r*.6,r*.4]:[],i=new js.Line;i.x1=s/2,i.y1=e,i.x2=s/2,i.y2=s-e-r-a[a.length-1],i.stroke=this.stroke,i.strokeOpacity=.5,i.fill=void 0,i.visible=this.showRadiusAxisLine;const n=e+r;this.gridLines=a.map((l,c)=>{const h=new js.Path;return h.path.arc(n,n,l,0,2*Math.PI),h.strokeWidth=1,h.stroke=this.stroke,h.strokeOpacity=c===0?.5:.2,h.fill=void 0,h});const o=this.root;o.append(i),this.gridLines.length>0&&o.append(this.gridLines)}};p([ph],xe.prototype,"addAxes",1);var qs=class extends xe{constructor(s,e,t){super(s,"radialColumnTooltip"),this.data=[[6,8,10,2,6,5],[4,4,3,6,4,4],[5,4,2,9,8,9]],this.showRadiusAxisLine=!1;const{padding:r,size:a,data:i}=this,n=(a-r*2)/2,l=n*.4,c=new et.BandScale;c.domain=i[0].map((f,C)=>C),c.range=[0,2*Math.PI],c.paddingInner=0,c.paddingOuter=0;const h=c.bandwidth*.7,{processedData:d,max:u}=Vt(i),g=new et.LinearScale;g.domain=[0,u],g.range=[l,n];const m=this.size/2;this.series=d.map((f,C)=>{const v=C===0?void 0:d[C-1],S=new et.Group({zIndex:1e6}),P=f.map((M,b)=>{const x=v?.[b],D=g.convert(M),k=g.convert(x??0),O=c.convert(b),G=O+h,I=et.getRadialColumnWidth(O,G,n,.5,.5),E=new et.RadialColumnShape;return E.scalingCenterX=m,E.scalingCenterY=m,E.columnWidth=I,E.innerRadius=k,E.outerRadius=D,E.startAngle=O,E.endAngle=G,E.isBeveled=!0,E.axisInnerRadius=l,E.axisOuterRadius=n,E.stroke=void 0,E.strokeWidth=0,E});return S.append(P),S.translationX=m,S.translationY=m,S}),this.root.append(this.series),this.updateColors(e,t)}updateColors(s,e){this.series.forEach((t,r)=>{var a;(a=t.children)==null||a.forEach(i=>{i.fill=s[r%s.length],i.stroke=e[r%e.length]})})}};qs.chartType="radialColumn";import{_Scene as Bt}from"ag-charts-community";var Zs=class extends xe{constructor(s,e,t){super(s,"radialBarTooltip"),this.data=[[6,8,10],[4,4,3],[5,4,2]],this.showRadiusAxisLine=!1;const r=(this.size-this.padding)/2,i=r*.4,n=r+i,o=new Bt.BandScale;o.domain=this.data[0].map((f,C)=>C),o.range=[r,i],o.paddingInner=.5,o.paddingOuter=0;const l=o.bandwidth,{processedData:c,max:h}=Vt(this.data),d=new Bt.LinearScale;d.domain=[0,Math.ceil(h*1.5)];const u=3/2*Math.PI,g=u+2*Math.PI;d.range=[u,g];const m=this.size/2;this.series=c.map((f,C)=>{const y=C<0?void 0:c[C-1],v=new Bt.Group({zIndex:1e6}),S=f.map((P,M)=>{var b;const x=(b=y?.[M])!=null?b:0,D=n-o.convert(M),k=D+l,O=d.convert(x),G=d.convert(P),I=new Bt.Sector;return I.centerX=m,I.centerY=m,I.innerRadius=D,I.outerRadius=k,I.startAngle=O,I.endAngle=G,I.stroke=void 0,I.strokeWidth=0,I});return v.append(S),v}),this.root.append(this.series),this.updateColors(e,t)}updateColors(s,e){this.series.forEach((t,r)=>{var a;(a=t.children)==null||a.forEach(i=>{i.fill=s[r%s.length],i.stroke=e[r%e.length]})})}};Zs.chartType="radialBar";var Js=class extends xe{constructor(s,e,t){super(s,"radarLineTooltip"),this.markerSize=4,this.data=[[8,7,8,7,8,8,7,8],[6,8,5,10,6,7,4,6],[0,3,3,5,4,4,2,0]],this.showRadiusAxisLine=!1;const r=(this.size-this.padding*2)/2,a=0,{paths:i,markers:n}=Vs(this.root,this.data,this.size,r,a,this.markerSize);this.lines=i,this.markers=n,this.updateColors(e,t)}updateColors(s,e){this.lines.forEach((t,r)=>{const a=this.data[r].length;t.stroke=s[r];const i=r*a,n=i+a;this.markers.slice(i,n).forEach(l=>{l.stroke=e[r],l.fill=s[r]})})}};Js.chartType="radarLine";var Qs=class extends xe{constructor(s,e,t){super(s,"radarAreaTooltip"),this.data=[[8,10,5,7,4,1,5,8],[1,1,2,7,7,8,10,1],[4,5,9,9,4,2,3,4]],this.showRadiusAxisLine=!1;const r=(this.size-this.padding*2)/2,a=r-this.size*.3;this.areas=Vs(this.root,this.data,this.size,r,a).paths,this.updateColors(e,t)}updateColors(s,e){this.areas.forEach((t,r)=>{t.fill=s[r],t.stroke=e[r]})}};Qs.chartType="radarArea";import{_Scene as Ut}from"ag-charts-community";var ea=class extends xe{constructor(s,e,t){super(s,"nightingaleTooltip"),this.data=[[6,10,9,8,7,8],[4,6,5,4,5,5],[3,5,4,3,4,7]],this.showRadiusAxisLine=!1;const r=(this.size-this.padding*2)/2,a=new Ut.BandScale;a.domain=this.data[0].map((h,d)=>d),a.range=[-Math.PI,Math.PI],a.paddingInner=0,a.paddingOuter=0;const i=a.bandwidth*.7,{processedData:n,max:o}=Vt(this.data),l=new Ut.LinearScale;l.domain=[0,o],l.range=[0,r];const c=this.size/2;this.series=n.map((h,d)=>{const u=d<0?void 0:n[d-1],g=new Ut.Group({zIndex:1e6}),m=h.map((f,C)=>{const y=u?.[C],v=l.convert(f),S=l.convert(y??0),P=a.convert(C),M=P+i,b=new Ut.Sector;return b.centerX=c,b.centerY=c,b.innerRadius=S,b.outerRadius=v,b.startAngle=P,b.endAngle=M,b.stroke=void 0,b.strokeWidth=0,b});return g.append(m),g}),this.root.append(this.series),this.updateColors(e,t)}updateColors(s,e){this.series.forEach((t,r)=>{var a;(a=t.children)==null||a.forEach(i=>{i.fill=s[r%s.length],i.stroke=e[r%e.length]})})}};ea.chartType="nightingale";import{_Scene as Dr}from"ag-charts-community";var ta=class extends F{constructor(s,e,t){super(s,"rangeBarTooltip");const r=[3,3.5,3];this.bars=this.createRangeBar(this.root,r,this.size,this.padding,"vertical"),this.updateColors(e,t)}updateColors(s,e){this.bars.forEach((t,r)=>{t.fill=s[r],t.stroke=e[r]})}createRangeBar(s,e,t,r,a){const i=a==="horizontal",n=2*r,o=new Dr.BandScale;o.domain=e.map((g,m)=>m),o.range=[r,t-r],o.paddingInner=.3,o.paddingOuter=.3;const l=.7,c=1.3,h=new Dr.LinearScale;h.domain=[e.reduce((g,m)=>Math.min(g,m),1/0)*l,e.reduce((g,m)=>Math.max(g,m),0)*c],h.range=[n,t-n];const d=o.bandwidth,u=e.map((g,m)=>{const[f,C]=[g*l,g*c],y=o.convert(m),v=h.convert(f),S=h.convert(C)-v,P=new Dr.Rect;return P.x=i?v:y,P.y=i?y:v,P.width=i?S:d,P.height=i?d:S,P.strokeWidth=0,P.crisp=!0,P});return s.append(u),u}};ta.chartType="rangeBar";import{_Scene as tt}from"ag-charts-community";var ra=class extends F{constructor(s,e,t){super(s,"rangeAreaTooltip");const r=4,a=[kr({offset:.375*r,length:r,pattern:{low:3,high:5,period:r}}),kr({offset:.375*r,length:r,pattern:{low:2.25,high:4.25,period:r}}),kr({offset:.75*r,length:r,pattern:{low:2.5,high:4.5,period:r}})],i=1.75,n=a.map(c=>c.map(([h,d])=>({x:h,low:d-.5*i,high:d+.5*i}))),{lines:o,areas:l}=this.createRangeArea(this.root,n,this.size,this.padding);this.lines=o,this.areas=l,this.updateColors(e,t)}updateColors(s,e){s=aa(s,1,2),e=aa(e,1,2),this.lines.forEach(([t,r],a)=>{t.fill=void 0,t.stroke=e[a],r.fill=void 0,r.stroke=e[a]}),this.areas.forEach((t,r)=>{t.fill=s[r]})}createRangeArea(s,e,t,r){const a=e.reduce((m,f)=>f.reduce((C,{x:y})=>Math.min(C,y),m),1/0),i=e.reduce((m,f)=>f.reduce((C,{x:y})=>Math.max(C,y),m),-1/0),n=e.reduce((m,f)=>f.reduce((C,{low:y})=>Math.min(C,y),m),1/0),o=e.reduce((m,f)=>f.reduce((C,{high:y})=>Math.max(C,y),m),-1/0),l=new tt.LinearScale;l.domain=[a,i],l.range=[r,t-r];const c=2*r,h=new tt.LinearScale;h.domain=[n,o],h.range=[t-c,c];const d=[],u=[];return e.map(m=>{const f=new tt.Path,C=new tt.Path,y=new tt.Path;return d.push([f,C]),u.push(y),f.strokeWidth=0,C.strokeWidth=0,y.strokeWidth=0,y.fillOpacity=.8,f.path.clear(),C.path.clear(),y.path.clear(),m.map((v,S)=>{const{x:P,low:M,high:b}=v,x=l.convert(P),D=h.convert(M),k=h.convert(b),O=S>0?"lineTo":"moveTo";return f.path[O](x,k),C.path[O](x,D),y.path[O](x,k),[x,D]})}).forEach((m,f)=>{const C=m.length-1,y=u[f];for(let v=C;v>=0;v--){const[S,P]=m[v];y.path.lineTo(S,P)}}),s.append(u.concat(...d)),{lines:d,areas:u}}};ra.chartType="rangeArea";function kr(s){const{offset:e,length:t,pattern:r}=s,a=o(e,t,r),i=0,n=t;return(a.length===0||a[0][0]!==i)&&a.unshift(l(i,e,r)),a[a.length-1][0]!==n&&a.push(l(n,e,r)),a;function o(h,d,u){const{period:g}=u,m=h/g,C=[0,.5].map(v=>v-m).map(sa).sort((v,S)=>v-S);return Array.from({length:Math.floor(C.length*(g/d))},(v,S)=>C[S%C.length]+Math.floor(S/C.length)).map(v=>v*g).map(v=>l(v,h,u))}function l(h,d,u){return[h,c(d+h,u)]}function c(h,d){const{low:u,high:g,period:m}=d,f=sa(h/m),C=f>.5?1-2*(f-.5):2*f;return u+(g-u)*C}}function sa(s){const e=s%1;return e<0?e+1:e}function aa(s,e,t){const r=[...s],a=r[e];return r[e]=r[t],r[t]=a,r}import{_Scene as te,_Theme as gh,_Util as mh}from"ag-charts-community";var ia=class extends F{constructor(s,e,t,r,a){super(s,"boxPlotTooltip");const i=this.padding,n=this.size,o=[11,11.5,10.5],l=1.2,c=1.1,h=.9,d=.8,u=new te.LinearScale;u.domain=[o.reduce((C,y)=>Math.min(C,y),1/0)*d,o.reduce((C,y)=>Math.max(C,y),0)*l],u.range=[n-1.5*i,i];const g=new te.BandScale;g.domain=o.map((C,y)=>y),g.range=[i,n-i],g.paddingInner=.4,g.paddingOuter=.2;const m=Math.round(g.bandwidth),f=Math.round(g.bandwidth/2);this.boxPlotGroups=o.map((C,y)=>{let[v,S,P,M]=[C*d,C*h,C*c,C*l];const b=Math.round(u.convert(P)),x=Math.round(g.convert(y)),D=Math.round(x+m),k=Math.round(u.convert(S)),O=Math.round(u.convert(v)),G=Math.round(u.convert(C)),I=Math.round(u.convert(M)),E=x+f,L=new te.Group,V=new te.Rect,we=new te.Line,Oe=new te.Line,X=new te.Line,se=new te.Line,H=new te.Line;return V.x=x,V.y=b,V.width=m,V.height=k-b,V.strokeWidth=1,V.strokeOpacity=.75,V.crisp=!0,this.setLineProperties(we,x,D,G,G),this.setLineProperties(Oe,E,E,I,b),this.setLineProperties(X,E,E,O,k),this.setLineProperties(se,x,D,I,I),this.setLineProperties(H,x,D,O,O),L.append([V,we,Oe,X,se,H]),L}),this.updateColors(e,t,r,a),this.root.append(this.boxPlotGroups)}updateColors(s,e,t,r){var a;const i=t?.properties.get(gh.DEFAULT_BACKGROUND_COLOUR),n=(a=Array.isArray(i)?i[0]:i)!=null?a:"white";this.boxPlotGroups.forEach((o,l)=>{var c;(c=o.children)==null||c.forEach(h=>{const d=s[l%s.length];h.fill=r?d:mh.Color.interpolate(d,n)(.7),h.stroke=e[l%e.length]})})}setLineProperties(s,e,t,r,a){s.x1=e,s.x2=t,s.y1=r,s.y2=a,s.strokeOpacity=.75}};ia.chartType="boxPlot";import{_Scene as Ir,_Theme as Ch}from"ag-charts-community";var na=class extends he{constructor(s,e,t,r,a){super(s,"treemapTooltip");const{size:i,padding:n}=this,o=[[1,1],[3,2,1]],c=o.length%2===0?.3:.2,h=[n,i-n],d=o.length,u=d*(d+1)/2,g=c/(d-1),m=h[1]-h[0],f=m-c;let C=h[0];this.rects=o.reduce((v,S,P)=>{v??(v=[]);const M=(d-P)/u,b=f*M,x=S.length,D=S.reduce((E,L)=>E+=L,0),k=c/(x-1||1),O=x>1?m-c:m;let G=h[0];const I=S.map(E=>{const L=new Ir.Rect,V=O*E/D;return L.x=C,L.y=G,L.width=b,L.height=V,L.strokeWidth=.75,L.crisp=!0,G+=V+k,L});return C+=b+g,v.push(...I),v},[]),this.updateColors(e,t,r,a);const y=new Ir.Group;y.setClipRectInGroupCoordinateSpace(new Ir.BBox(n,n,i-n,i-n)),y.append(this.rects),this.root.append(y)}updateColors(s,e,t,r){var a;const{properties:i}=t??{},n=i?.get(Ch.DEFAULT_BACKGROUND_COLOUR),o=(a=Array.isArray(n)?n[0]:n)!=null?a:"white";this.rects.forEach((l,c)=>{l.fill=s[c%e.length],l.stroke=r?e[c%e.length]:o})}};na.chartType="treemap";import{_Scene as oa}from"ag-charts-community";var la=class extends xe{constructor(s,e,t){super(s,"sunburstTooltip"),this.data=[[[],[]],[[],[]],[[],[]]],this.angleOffset=-Math.PI/2,this.innerRadiusRatio=0,this.showRadiusAxisLine=!1,this.showAngleAxisLines=!1;const{data:r,size:a,padding:i,angleOffset:n,innerRadiusRatio:o}=this,l=(a-i*2)/2,c=[n+0,n+2*Math.PI],h=Math.abs(c[1]-c[0]),d=[l*o,l],u=Math.abs(d[1]-d[0]);let g=0;const m=(S,P)=>{S.forEach(M=>{const b=P+1;g=Math.max(g,b),m(M,b)})};m(r,0);const f=u/g,C=this.size/2,y=c[0];this.series=[];const v=(S,P,M,b,x)=>{if(!Array.isArray(S))return;const k=P+1;let O=M;S.forEach((G,I,E)=>{let L=x;L||(L=new oa.Group,this.series.push(L));const V=d[0]+P*f,we=d[0]+k*f,Oe=1/E.length,X=O,se=X+b*Oe,H=new oa.Sector;H.centerX=C,H.centerY=C,H.innerRadius=V,H.outerRadius=we,H.startAngle=X,H.endAngle=se,H.stroke=void 0,H.strokeWidth=0,H.inset=.75,O=se,L.append(H),v(G,k,X,Math.abs(se-X),L)})};v(r,0,y,h),this.root.append(this.series),this.updateColors(e,t)}updateColors(s,e){this.series.forEach((t,r)=>{var a;(a=t.children)==null||a.forEach(i=>{i.fill=s[r%s.length],i.stroke=e[r%e.length]})})}};la.chartType="sunburst";import{_Scene as rt,_Theme as ca,_Util as fh}from"ag-charts-community";var ha=class extends he{constructor(s,e,t,r,a){var i,n;super(s,"heatmapTooltip");const{size:o,padding:l}=this,c=3,h=Array.from({length:c},(y,v)=>Array.from({length:c},(S,P)=>P)),d=h.map((y,v)=>v),u=new rt.BandScale;u.domain=d,u.range=[l,o-l],u.paddingInner=.01,u.paddingOuter=.1;const g=new rt.BandScale;g.domain=d,g.range=[l,o-l],g.paddingInner=.01,g.paddingOuter=.1;const m=(i=u.bandwidth)!=null?i:0,f=(n=g.bandwidth)!=null?n:0;this.rects=h.reduce((y,v,S)=>{y??(y=[]);const P=v.map((M,b)=>{const x=new rt.Rect;return x.x=u.convert(S),x.y=g.convert(b),x.width=m,x.height=f,x.strokeWidth=0,x.crisp=!0,x});return y.push(...P),y},[]),this.updateColors(e,t,r,a);const C=new rt.Group;C.setClipRectInGroupCoordinateSpace(new rt.BBox(l,l,o-l,o-l)),C.append(this.rects),this.root.append(C)}updateColors(s,e,t,r){var a;const{properties:i}=t??{},n=i?.get(ca.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),o=i?.get(ca.DEFAULT_BACKGROUND_COLOUR),l=(a=Array.isArray(o)?o[0]:o)!=null?a:"white",c=r?[s[0],s[1]]:n,h=r?e[0]:l;this.rects.forEach((d,u)=>{d.fill=fh.Color.interpolate(c[0],c[1])(u*.2),d.stroke=h})}};ha.chartType="heatmap";import{_Scene as Ht,_Theme as da}from"ag-charts-community";var ua=class extends F{constructor(s,e,t,r,a){super(s,"waterfallTooltip"),this.data=[4,3,-3,6,-3],this.bars=this.createWaterfall(this.root,this.data,this.size,this.padding,"vertical").bars,this.updateColors(e,t,r,a)}updateColors(s,e,t,r){var a,i;const{data:n}=this,{properties:o}=t??{},l={fill:s[0],stroke:e[0]},c={fill:s[1],stroke:e[1]},h=r?l:(a=o?.get(da.DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS))!=null?a:l,d=r?c:(i=o?.get(da.DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS))!=null?i:c;this.bars.forEach((u,g)=>{const m=n[g]>=0;u.fill=m?h.fill:d.fill,u.stroke=m?h.stroke:d.stroke})}createWaterfall(s,e,t,r,a){const i=2*r,{processedData:n,min:o,max:l}=Vt(e.map(v=>[v])),c=n.reduce((v,S)=>v.concat(S),[]),h=new Ht.LinearScale;h.domain=[Math.min(o,0),l],h.range=[t-i,i];const d=new Ht.BandScale;d.domain=e.map((v,S)=>S),d.range=[r,t-r],d.paddingInner=.2,d.paddingOuter=.3;const u=d.bandwidth,g=new Ht.Path;g.stroke="#575757",g.strokeWidth=0;const m=Math.floor(g.strokeWidth)%2/2,f=g.path;f.clear();const C=a==="horizontal",y=c.map((v,S)=>{const P=S>0?c[S-1]:0,b=e[S]>0,x=Math.round(h.convert(v)),D=Math.round(h.convert(P)),k=(b?x:D)-m,O=(b?D:x)+m,G=Math.abs(O-k),I=d.convert(S),E=new Ht.Rect;E.x=C?k:I,E.y=C?I:k,E.width=C?G:u,E.height=C?u:G,E.strokeWidth=0,E.crisp=!0;const L=x+m,V=D+m;if(S>0){const X=C?V:E.x,se=C?E.y:V;f.lineTo(X,se)}const we=C?L:E.x,Oe=C?E.y:L;return f.moveTo(we,Oe),E});return s.append([g,...y]),{bars:y}}};ua.chartType="waterfall";var pa=class extends F{constructor(s,e,t){super(s,"columnLineComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:r,columnData:a,lineData:i,size:n,padding:o}=this;this.columns=Ze({stacked:!1,root:r,data:a,size:n,padding:o,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),r.append(this.columns),this.lines=Cr(r,i,n,o),this.updateColors(e,t)}updateColors(s,e){this.columns.forEach((t,r)=>{t.fill=s[r],t.stroke=e[r]}),this.lines.forEach((t,r)=>{t.stroke=s[r+2]})}};pa.chartType="columnLineCombo";import{_Scene as Lr}from"ag-charts-community";var ga=class extends F{constructor(s,e,t){super(s,"areaColumnComboTooltip"),this.columnData=[3,4.5],this.areaData=[[5,4,6,5,4]];const{root:r,columnData:a,areaData:i,size:n,padding:o}=this;this.columns=Ze({stacked:!1,root:r,data:a,size:n,padding:o,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});const l=new Lr.BandScale;l.range=[o,n-o],l.domain=[0,1,2,3,4],l.paddingInner=1,l.paddingOuter=0;const c=new Lr.LinearScale;c.range=[n-o,o],c.domain=[0,6];const h=[],d=c.convert(0),u=l.convert(0);i.forEach((g,m)=>{const f=h[m]||(h[m]=[]);g.forEach((y,v)=>{const S=y,P=v,M=l.convert(P),b=c.convert(S);f[v]={x:M,y:b}});const C=l.convert(g.length-1);h[m].push({x:C,y:d},{x:u,y:d})}),this.areas=h.map(g=>{const m=new Lr.Path;m.strokeWidth=0,m.fillOpacity=.8;const f=m.path;return g.forEach((C,y)=>f[y>0?"lineTo":"moveTo"](C.x,C.y)),m}),r.append(this.areas),r.append([].concat.apply([],this.columns)),this.updateColors(e,t)}updateColors(s,e){this.areas.forEach((t,r)=>{t.fill=s[r],t.stroke=e[r]}),this.columns.forEach((t,r)=>{t.fill=s[r+1],t.stroke=e[r+1]})}};ga.chartType="areaColumnCombo";import{_Scene as Rr}from"ag-charts-community";var ma=class extends he{constructor(s,e,t){super(s,"customComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:r,columnData:a,lineData:i,size:n,padding:o}=this;this.columns=Ze({stacked:!1,root:r,data:a,size:n,padding:o,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),r.append(this.columns),this.lines=Cr(r,i,n,o);const l="grey",c=3,h=new Rr.Line;h.x1=o,h.y1=o,h.x2=o,h.y2=n-o+c,h.stroke=l;const d=new Rr.Line;d.x1=o-c+1,d.y1=n-o,d.x2=n-o+1,d.y2=n-o,d.stroke=l;const u=new Rr.Path;this.buildPenIconPath(u),u.fill="whitesmoke",u.stroke="darkslategrey",u.strokeWidth=1,r.append([d,h,u]),this.updateColors(e,t)}updateColors(s,e){this.columns.forEach((t,r)=>{t.fill=s[r],t.stroke=e[r]}),this.lines.forEach((t,r)=>{t.stroke=s[r+2]})}buildPenIconPath(s){const{path:e}=s;e.moveTo(25.76,43.46),e.lineTo(31.27,48.53),e.moveTo(49.86,22),e.lineTo(49.86,22),e.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),e.lineTo(46.86,21.41),e.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),e.lineTo(25.51,43.8),e.lineTo(25.43,43.89),e.lineTo(23.01,51.89),e.lineTo(22.83,52.46),e.lineTo(31.02,48.86),e.lineTo(49.02,28.52),e.lineTo(49.02,28.52),e.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),e.lineTo(50.75,24.93),e.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),e.closePath(),e.moveTo(41.76,25.5),e.lineTo(47.34,30.5),e.moveTo(40.74,26.65),e.lineTo(46.25,31.71)}};ma.chartType="customCombo";var Ca={columnGroup:{column:{range:!0,pivot:!0,enterprise:!1,icon:Ns},stackedColumn:{range:!0,pivot:!0,enterprise:!1,icon:Bs},normalizedColumn:{range:!0,pivot:!0,enterprise:!1,icon:ch}},barGroup:{bar:{range:!0,pivot:!0,enterprise:!1,icon:Us},stackedBar:{range:!0,pivot:!0,enterprise:!1,icon:Hs},normalizedBar:{range:!0,pivot:!0,enterprise:!1,icon:hh}},pieGroup:{pie:{range:!0,pivot:!0,enterprise:!1,icon:zs},donut:{range:!0,pivot:!0,enterprise:!1,icon:Nt},doughnut:{range:!0,pivot:!0,enterprise:!1,icon:Nt}},lineGroup:{line:{range:!0,pivot:!0,enterprise:!1,icon:Ys}},scatterGroup:{scatter:{range:!0,pivot:!0,enterprise:!1,icon:Ks},bubble:{range:!0,pivot:!0,enterprise:!1,icon:$s}},areaGroup:{area:{range:!0,pivot:!0,enterprise:!1,icon:dh},stackedArea:{range:!0,pivot:!0,enterprise:!1,icon:Er},normalizedArea:{range:!0,pivot:!0,enterprise:!1,icon:uh}},polarGroup:{radarLine:{range:!0,pivot:!1,enterprise:!0,icon:Js},radarArea:{range:!0,pivot:!1,enterprise:!0,icon:Qs},nightingale:{range:!0,pivot:!1,enterprise:!0,icon:ea},radialColumn:{range:!0,pivot:!1,enterprise:!0,icon:qs},radialBar:{range:!0,pivot:!1,enterprise:!0,icon:Zs}},statisticalGroup:{boxPlot:{range:!0,pivot:!1,enterprise:!0,icon:ia},histogram:{range:!0,pivot:!1,enterprise:!1,icon:Xs},rangeBar:{range:!0,pivot:!1,enterprise:!0,icon:ta},rangeArea:{range:!0,pivot:!1,enterprise:!0,icon:ra}},hierarchicalGroup:{treemap:{range:!0,pivot:!0,enterprise:!0,icon:na},sunburst:{range:!0,pivot:!0,enterprise:!0,icon:la}},specializedGroup:{heatmap:{range:!0,pivot:!1,enterprise:!0,icon:ha},waterfall:{range:!0,pivot:!1,enterprise:!0,icon:ua}},combinationGroup:{columnLineCombo:{range:!0,pivot:!0,enterprise:!1,icon:pa},areaColumnCombo:{range:!0,pivot:!0,enterprise:!1,icon:ga},customCombo:{range:!0,pivot:!0,enterprise:!1,icon:ma}}},vh={columnGroup:["column","stackedColumn","normalizedColumn"],barGroup:["bar","stackedBar","normalizedBar"],pieGroup:["pie","donut"],lineGroup:["line"],scatterGroup:["scatter","bubble"],areaGroup:["area","stackedArea","normalizedArea"],polarGroup:["radarLine","radarArea","nightingale","radialColumn","radialBar"],statisticalGroup:["boxPlot","histogram","rangeBar","rangeArea"],hierarchicalGroup:["treemap","sunburst"],specializedGroup:["heatmap","waterfall"],combinationGroup:["columnLineCombo","areaColumnCombo","customCombo"]},Wt=class bi extends th{constructor(e,t,r,a,i,n=vh){super(bi.TEMPLATE),this.wrappers={},this.chartController=e,this.fills=t,this.strokes=r,this.themeTemplateParameters=a,this.isCustomTheme=i,this.chartGroups=T({},n)}init(){!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter(n=>n!=="customCombo"));const e=this.getGui(),t=this.chartController.isEnterprise(),r=this.chartController.isPivotChart(),a=!r,i=Object.keys(this.chartGroups).map(n=>{var o;const l=n in Ca?Ca[n]:void 0;if(!l)return _s.warnOnce(`invalid chartGroupsDef config '${n}'`),null;const h=((o=this.chartGroups[n])!=null?o:[]).map(d=>{const u=d in l?l[d]:void 0;return u?!t&&u.enterprise?null:a&&u.range||r&&u.pivot?u:null:(_s.warnOnce(`invalid chartGroupsDef config '${n}.${d}'`),null)}).filter(d=>d!=null);return h.length===0?null:{label:this.chartTranslationService.translate(n),items:h}}).filter(n=>n!=null);for(const{label:n,items:o}of i){const l=this.createBean(new Qc({title:n,suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));for(const c of o){const h=c.icon,d=document.createElement("div");d.classList.add("ag-chart-mini-thumbnail");const u=h.chartType;this.addManagedListener(d,"click",()=>{this.chartController.setChartType(u),this.updateSelectedMiniChart()}),this.wrappers[u]=d,this.createBean(new h(d,this.fills,this.strokes,this.themeTemplateParameters,this.isCustomTheme)),l.addItem(d)}e.appendChild(l.getGui())}this.updateSelectedMiniChart()}updateSelectedMiniChart(){const e=this.chartController.getChartType();for(const t in this.wrappers){const r=this.wrappers[t],a=t===e;r.classList.toggle("ag-selected",a)}}};Wt.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',p([eh("chartTranslationService")],Wt.prototype,"chartTranslationService",2),p([rh],Wt.prototype,"init",1);var yh=Wt,de=class Ai extends Zc{constructor(e){super(Ai.TEMPLATE),this.chartController=e,this.miniChartsContainers=[],this.cardItems=[],this.activePaletteIndex=0,this.palettes=[],this.themes=[]}postConstruct(){this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",ee.createIconNoSpan("previous",this.gos)),this.eNextBtn.insertAdjacentElement("afterbegin",ee.createIconNoSpan("next",this.gos)),this.addManagedListener(this.ePrevBtn,"click",()=>this.setActivePalette(this.getPrev(),"left")),this.addManagedListener(this.eNextBtn,"click",()=>this.setActivePalette(this.getNext(),"right")),this.addManagedListener(this.chartController,W.EVENT_CHART_TYPE_CHANGED,()=>this.resetPalettes(!0)),this.addManagedListener(this.chartController,W.EVENT_CHART_API_UPDATE,()=>this.resetPalettes(!0)),this.scrollSelectedIntoView()}scrollSelectedIntoView(){setTimeout(()=>{const e=a=>!a.getGui().classList.contains("ag-hidden"),r=this.miniChartsContainers.find(e).getGui().querySelector(".ag-selected");if(r){const a=r.offsetParent;a&&this.eMiniChartsContainer.scrollTo(0,a.offsetTop)}},250)}resetPalettes(e){var t,r;const a=this.chartController.getPalettes(),i=this.chartController.getThemeTemplateParameters(),n=(r=(t=this.gos.get("chartToolPanelsDef"))==null?void 0:t.settingsPanel)==null?void 0:r.chartGroupsDef;if(ee.shallowCompare(a,this.palettes)&&!e||this.isAnimating)return;this.palettes=a,this.themes=this.chartController.getThemeNames(),this.activePaletteIndex=this.themes.findIndex(l=>l===this.chartController.getChartThemeName()),this.cardItems=[],ee.clearElement(this.eCardSelector),this.destroyMiniCharts();const{themes:o}=this;this.palettes.forEach((l,c)=>{const h=this.activePaletteIndex===c,{fills:d,strokes:u}=l,g=o[c],m=!lr(g),f=this.createBean(new yh(this.chartController,d,u,i[c],m,n));this.miniChartsContainers.push(f),this.eMiniChartsContainer.appendChild(f.getGui()),this.addCardLink(c),h?f.updateSelectedMiniChart():f.setDisplayed(!1)}),ee.setDisplayed(this.eNavBar,this.palettes.length>1),ee.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected")}addCardLink(e){const t=document.createElement("div");t.classList.add("ag-chart-settings-card-item"),this.addManagedListener(t,"click",()=>{this.setActivePalette(e,e<this.activePaletteIndex?"left":"right")}),this.eCardSelector.appendChild(t),this.cardItems.push(t)}getPrev(){let e=this.activePaletteIndex-1;return e<0&&(e=this.palettes.length-1),e}getNext(){let e=this.activePaletteIndex+1;return e>=this.palettes.length&&(e=0),e}setActivePalette(e,t){if(this.isAnimating||this.activePaletteIndex===e)return;ee.radioCssClass(this.cardItems[e],"ag-selected","ag-not-selected");const r=this.miniChartsContainers[this.activePaletteIndex],a=r.getGui(),i=this.miniChartsContainers[e],n=i.getGui();r.updateSelectedMiniChart(),i.updateSelectedMiniChart();const o=t==="left"?-1:1,l=n.style.left=`${ee.getAbsoluteWidth(this.getGui())*o}px`;this.activePaletteIndex=e,this.isAnimating=!0;const c="ag-animating";i.setDisplayed(!0),r.addCssClass(c),i.addCssClass(c),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout(()=>{a.style.left=`${-parseFloat(l)}px`,n.style.left="0px"},0),window.setTimeout(()=>{this.isAnimating=!1,r.removeCssClass(c),i.removeCssClass(c),r.setDisplayed(!1)},300)}destroyMiniCharts(){ee.clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)}destroy(){this.destroyMiniCharts(),super.destroy()}};de.TEMPLATE=`<div class="ag-chart-settings-wrapper">
            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>
            <div ref="eNavBar" class="ag-chart-settings-nav-bar">
                <div ref="ePrevBtn" class="ag-chart-settings-prev">
                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>
                </div>
                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>
                <div ref="eNextBtn" class="ag-chart-settings-next">
                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>
                </div>
            </div>
        </div>`,p([qe("eMiniChartsContainer")],de.prototype,"eMiniChartsContainer",2),p([qe("eNavBar")],de.prototype,"eNavBar",2),p([qe("eCardSelector")],de.prototype,"eCardSelector",2),p([qe("ePrevBtn")],de.prototype,"ePrevBtn",2),p([qe("eNextBtn")],de.prototype,"eNextBtn",2),p([Jc],de.prototype,"postConstruct",1);var Sh=de,Me=class sr extends tn{constructor(e,t){super(),this.panels=e,this.chartMenuContext=t,this.tabs=[]}init(){this.panels.forEach(e=>{const t=e.replace("chart","").toLowerCase(),r=this.createPanel(t),a=this.createTab(e,t,r);this.tabs.push(a),this.addDestroyFunc(()=>this.destroyBean(r))}),this.tabbedLayout=new sn({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0,suppressFocusBodyOnOpen:!0,suppressTrapFocus:!0,enableCloseButton:!this.chartMenuService.isLegacyFormat(),closeButtonAriaLabel:this.chartTranslationService.translate("ariaChartMenuClose"),onCloseClicked:()=>{var e;(e=this.eventSource)==null||e.focus({preventScroll:!0}),this.dispatchEvent({type:sr.EVENT_CLOSED})}}),this.getContext().createBean(this.tabbedLayout)}createTab(e,t,r){const a=document.createElement("div");a.classList.add("ag-chart-tab",`ag-chart-${t}`),this.getContext().createBean(r),a.appendChild(r.getGui());const i=document.createElement("div"),n=this.chartTranslationService.translate(t);return i.innerText=n,{title:i,titleLabel:n,bodyPromise:en.resolve(a),getScrollableContainer:()=>a.querySelector(".ag-scrollable-container")||a,name:e}}showTab(e){const t=this.tabs[e];this.tabbedLayout.showItem(t)}getGui(){return this.tabbedLayout&&this.tabbedLayout.getGui()}showMenu(e,t){var r;this.eventSource=e,t||(r=this.tabbedLayout)==null||r.focusHeader(!0)}destroy(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),super.destroy()}createPanel(e){const{chartController:t,chartOptionsService:r}=this.chartMenuContext;switch(e){case sr.TAB_DATA:return new Uo(t,r);case sr.TAB_FORMAT:return new qc(this.chartMenuContext);default:return new Sh(t)}}};Me.EVENT_CLOSED="closed",Me.TAB_DATA="data",Me.TAB_FORMAT="format",p([Zr("chartTranslationService")],Me.prototype,"chartTranslationService",2),p([Zr("chartMenuService")],Me.prototype,"chartMenuService",2),p([rn],Me.prototype,"init",1);var fa=Me;import{Autowired as va,Component as Th,RefSelector as Ph,_ as ya}from"@ag-grid-community/core";var zt=class extends Th{constructor(){super('<div class="ag-chart-menu" ref="eMenu"></div>'),this.buttonListenersDestroyFuncs=[]}updateParams(s){const{buttons:e}=s;this.createButtons(e)}createButtons(s){this.buttonListenersDestroyFuncs.forEach(t=>t?.()),this.buttonListenersDestroyFuncs=[];const e=this.eMenu;ya.clearElement(e),s.forEach(t=>{const{buttonName:r,iconName:a,callback:i}=t,n=this.createButton(a),o=this.chartTranslationService.translate(r+"ToolbarTooltip");o&&n instanceof HTMLElement&&(n.title=o),this.buttonListenersDestroyFuncs.push(this.addManagedListener(n,"click",l=>i(l.target))),e.appendChild(n)})}createButton(s){let e=ya.createIconNoSpan(s,this.gos,void 0,!0);return e.classList.add("ag-chart-menu-icon"),this.chartMenuService.isLegacyFormat()||(e=this.wrapButton(e)),e}wrapButton(s){const e=this.gos.getDocument().createElement("button");return e.appendChild(s),e.classList.add("ag-chart-menu-toolbar-button"),e}destroy(){this.buttonListenersDestroyFuncs=[],super.destroy()}};p([va("chartTranslationService")],zt.prototype,"chartTranslationService",2),p([va("chartMenuService")],zt.prototype,"chartMenuService",2),p([Ph("eMenu")],zt.prototype,"eMenu",2);var st=class xi extends qr{constructor(e,t,r){super(xi.TEMPLATE),this.eChartContainer=e,this.eMenuPanelContainer=t,this.chartMenuContext=r,this.buttons={chartSettings:{iconName:"menu",callback:()=>this.showMenu({panel:this.defaultPanel})},chartData:{iconName:"menu",callback:()=>this.showMenu({panel:"chartData"})},chartFormat:{iconName:"menu",callback:()=>this.showMenu({panel:"chartFormat"})},chartLink:{iconName:"linked",callback:()=>this.chartMenuService.toggleLinked(this.chartMenuContext)},chartUnlink:{iconName:"unlinked",callback:()=>this.chartMenuService.toggleLinked(this.chartMenuContext)},chartDownload:{iconName:"save",callback:()=>this.chartMenuService.downloadChart(this.chartMenuContext)},chartMenu:{iconName:"menuAlt",callback:a=>this.showMenuList(a)}},this.panels=[],this.menuVisible=!1,this.chartController=r.chartController}postConstruct(){this.legacyFormat=this.chartMenuService.isLegacyFormat(),this.chartToolbar=this.createManagedBean(new zt),this.getGui().appendChild(this.chartToolbar.getGui()),this.legacyFormat&&this.createLegacyToggleButton(),this.refreshToolbarAndPanels(),this.addManagedListener(this.eventService,Ji.EVENT_CHART_CREATED,e=>{var t;e.chartId===this.chartController.getChartId()&&((t=this.gos.get("chartToolPanelsDef"))!=null&&t.defaultToolPanel)&&this.showMenu({panel:this.defaultPanel,animate:!1,suppressFocus:!0})}),this.addManagedListener(this.chartController,W.EVENT_CHART_LINKED_CHANGED,this.refreshToolbarAndPanels.bind(this)),this.refreshMenuClasses(),this.legacyFormat&&!this.gos.get("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.eHideButton&&this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.legacyFormat||this.getGui().classList.add("ag-chart-menu-wrapper"),this.addManagedListener(this.chartController,W.EVENT_CHART_API_UPDATE,this.refreshToolbarAndPanels.bind(this))}isVisible(){return this.menuVisible}getExtraPaddingDirections(){const e=["chartMenu","chartLink","chartUnlink","chartDownload"],t=["chartSettings","chartData","chartFormat"],r=[];return e.some(a=>this.chartToolbarOptions.includes(a))&&r.push("top"),t.some(a=>this.chartToolbarOptions.includes(a))&&r.push(this.gos.get("enableRtl")?"left":"right"),r}createLegacyToggleButton(){const e=this.gos.getDocument();this.eHideButton=e.createElement("button"),this.eHideButton.classList.add("ag-button","ag-chart-menu-close"),this.eHideButtonIcon=e.createElement("span"),this.eHideButtonIcon.classList.add("ag-icon","ag-icon-contracted"),this.eHideButton.appendChild(this.eHideButtonIcon),this.getGui().appendChild(this.eHideButton)}refreshToolbarAndPanels(){this.initToolbarOptionsAndPanels(),this.updateToolbar()}initToolbarOptionsAndPanels(){const{panels:e,defaultPanel:t,chartToolbarOptions:r}=this.chartMenuService.getToolbarOptionsAndPanels(this.chartController);this.panels=e,this.defaultPanel=t,this.chartToolbarOptions=r}updateToolbar(){const e=this.chartToolbarOptions.map(t=>{const{iconName:r,callback:a}=this.buttons[t];return{buttonName:t,iconName:r,callback:a}});this.chartToolbar.updateParams({buttons:e})}createMenuPanel(e){const t=this.environment.chartMenuPanelWidth(),r=this.menuPanel=this.createBean(new qi({minWidth:t,width:t,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return r.setParentComponent(this),this.eMenuPanelContainer.appendChild(r.getGui()),this.tabbedMenu=this.createBean(new fa(this.panels,this.chartMenuContext)),this.addManagedListener(this.tabbedMenu,fa.EVENT_CLOSED,()=>{this.hideMenu(!1)}),this.addManagedListener(r,qr.EVENT_DESTROYED,()=>this.destroyBean(this.tabbedMenu)),new Zi(a=>{window.setTimeout(()=>{r.setBodyComponent(this.tabbedMenu),this.tabbedMenu.showTab(e),a(r),this.legacyFormat&&this.addManagedListener(this.eChartContainer,"click",i=>{this.getGui().contains(i.target)||this.menuVisible&&this.hideMenu()})},100)})}showContainer(e,t){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses(),this.tabbedMenu.showMenu(e,t))}toggleMenu(){this.menuVisible?this.hideMenu(this.legacyFormat):this.showMenu({animate:this.legacyFormat})}showMenu(e){const{panel:t,animate:r=!0,eventSource:a,suppressFocus:i}=e;if(r||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!t)this.showContainer(a,i);else{const n=t||this.defaultPanel;let o=this.panels.indexOf(n);o<0&&(console.warn(`AG Grid: '${t}' is not a valid Chart Tool Panel name`),o=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(o),this.showContainer(a,i)):this.createMenuPanel(o).then(()=>this.showContainer(a,i))}r||setTimeout(()=>{this.isAlive()&&this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}hideMenu(e=!0){e||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.hideParent(),window.setTimeout(()=>{this.menuVisible=!1,this.refreshMenuClasses(),e||this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}refreshMenuClasses(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.legacyFormat&&!this.gos.get("suppressChartToolPanelsButton")&&(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))}showParent(e){this.eMenuPanelContainer.style.minWidth=`${e}px`}hideParent(){this.eMenuPanelContainer.style.minWidth="0"}showMenuList(e){this.chartMenuListFactory.showMenuList({eventSource:e,showMenu:()=>this.showMenu({animate:!1,eventSource:e}),chartMenuContext:this.chartMenuContext})}destroy(){super.destroy(),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)}};st.TEMPLATE="<div></div>",p([jr("chartMenuService")],st.prototype,"chartMenuService",2),p([jr("chartMenuListFactory")],st.prototype,"chartMenuListFactory",2),p([Qi],st.prototype,"postConstruct",1);var bh=st;import{Autowired as Sa,Component as Ah,PostConstruct as xh}from"@ag-grid-community/core";var at=class Mi extends Ah{constructor(e){super(Mi.TEMPLATE),this.chartMenu=e,this.destroyableChartListeners=[],this.editing=!1}init(){this.addManagedListener(this.getGui(),"keydown",e=>{this.editing&&e.key==="Enter"&&!e.shiftKey&&(this.handleEndEditing(),e.preventDefault())}),this.addManagedListener(this.getGui(),"input",()=>{this.editing&&this.updateHeight()}),this.addManagedListener(this.getGui(),"blur",()=>this.endEditing())}refreshTitle(e){this.chartController=e.chartController,this.chartOptionsService=e.chartOptionsService,this.chartMenuUtils=e.chartMenuParamsFactory.getChartOptions();for(const l of this.destroyableChartListeners)l();this.destroyableChartListeners=[];const r=this.chartController.getChartProxy().getChart(),a=r.canvasElement,i=this.addManagedListener(a,"dblclick",l=>{const{title:c}=r;if(c&&c.node.containsPoint(l.offsetX,l.offsetY)){const h=c.node.computeBBox(),d=c.node.inverseTransformPoint(h.x,h.y);this.startEditing(T(T({},h),d),a.width)}});let n=!1;const o=this.addManagedListener(a,"mousemove",l=>{const{title:c}=r,h=!!(c&&c.enabled&&c.node.containsPoint(l.offsetX,l.offsetY));n!==h&&(a.style.cursor=h?"pointer":""),n=h});this.destroyableChartListeners=[i,o]}startEditing(e,t){if(this.chartMenuService.isLegacyFormat()&&this.chartMenu&&this.chartMenu.isVisible()||this.editing)return;this.editing=!0;const a=Math.max(Math.min(e.width+20,t),300),i=this.getGui();i.classList.add("currently-editing");const n=i.style;n.fontFamily=this.chartMenuUtils.getValue("title.fontFamily"),n.fontWeight=this.chartMenuUtils.getValue("title.fontWeight"),n.fontStyle=this.chartMenuUtils.getValue("title.fontStyle"),n.fontSize=this.chartMenuUtils.getValue("title.fontSize")+"px",n.color=this.chartMenuUtils.getValue("title.color");const o=this.chartMenuUtils.getValue("title.text"),l=o===this.chartTranslationService.translate("titlePlaceholder");i.value=l?"":o;const c=o.split(/\r?\n/g).length;n.left=Math.round(e.x+e.width/2-a/2-1)+"px",n.top=Math.round(e.y+e.height/2-c*this.getLineHeight()/2-2)+"px",n.width=Math.round(a)+"px",n.lineHeight=this.getLineHeight()+"px",this.updateHeight(),i.focus()}updateHeight(){const e=this.getGui(),t=this.chartMenuUtils.getValue("title.text").split(/\r?\n/g).length,r=e.value.split(/\r?\n/g).length;e.style.height=Math.round(Math.max(t,r)*this.getLineHeight())+4+"px"}getLineHeight(){const e=this.chartMenuUtils.getValue("title.lineHeight");return e?parseInt(e):Math.round(parseInt(this.chartMenuUtils.getValue("title.fontSize"))*1.2)}handleEndEditing(){const e=this.chartMenuUtils.getValue("title.color");this.chartMenuUtils.setValue("title.color","rgba(0, 0, 0, 0)"),this.chartOptionsService.awaitChartOptionUpdate(()=>this.endEditing()),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.chartMenuUtils.setValue("title.color",e)})}endEditing(){if(!this.editing)return;this.editing=!1;const e=this.getGui().value;e&&e.trim()!==""?(this.chartMenuUtils.setValue("title.text",e),this.chartMenuUtils.setValue("title.enabled",!0)):(this.chartMenuUtils.setValue("title.text",""),this.chartMenuUtils.setValue("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.eventService.dispatchEvent({type:"chartTitleEdit"})})}};at.TEMPLATE=`<textarea
             class="ag-chart-title-edit"
             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />
        `,p([Sa("chartTranslationService")],at.prototype,"chartTranslationService",2),p([Sa("chartMenuService")],at.prototype,"chartMenuService",2),p([xh],at.prototype,"init",1);var Mh=at;import{_ as Eh}from"@ag-grid-community/core";import{_Theme as wh,_ModuleSupport as Oh,AgCharts as it}from"ag-charts-community";function Ta(s){return s.chart!=null?s.chart:s}var nt=class{constructor(s){this.chartProxyParams=s,this.clearThemeOverrides=!1,this.isEnterpriseCharts=Oh.enterpriseModule.isEnterprise,this.chart=s.chartInstance,this.chartType=s.chartType,this.crossFiltering=s.crossFiltering,this.crossFilterCallback=s.crossFilterCallback,this.standaloneChartType=w(this.chartType),this.chart==null?this.chart=it.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}crossFilteringReset(){}update(s){it.update(this.getChartRef(),this.getUpdateOptions(s,this.getCommonChartOptions(s.updatedOverrides)))}updateThemeOverrides(s){it.updateDelta(this.getChartRef(),{theme:{overrides:s}})}getChart(){return Ta(this.chart)}getChartRef(){return this.chart}downloadChart(s,e,t){const{chart:r}=this,a=Ta(r),i=e||(a.title?a.title.text:"chart"),{width:n,height:o}=s||{};it.download(r,{width:n,height:o,fileName:i,fileFormat:t})}getChartImageDataURL(s){return this.getChart().getCanvasDataURL(s)}getChartOptions(){return this.chart.getOptions()}getChartThemeOverrides(){var s;return(s=this.getChartOptions().theme.overrides)!=null?s:{}}getChartPalette(){return wh.getChartTheme(this.getChartOptions().theme).palette}setPaired(s){const e=w(this.chartProxyParams.chartType);it.updateDelta(this.chart,{theme:{overrides:{[e]:{paired:s}}}})}isPaired(){const s=w(this.chartProxyParams.chartType);return Te(this.getChartThemeOverrides(),`${s}.paired`,!0)}lookupCustomChartTheme(s){return ps(this.chartProxyParams,s)}getSeriesGroupType(){}transformCategoryData(s,e){return s.map((t,r)=>{const a=t[e],i=a&&a.toString?a.toString():"",n=T({},t);return n[e]={id:r,value:a,toString:()=>i},n})}getCommonChartOptions(s){var e,t;const r=this.clearThemeOverrides?{}:(t=(e=this.chart)==null?void 0:e.getOptions())!=null?t:{},a=this.chart!=null?this.getActiveFormattingPanelOverrides():void 0;this.clearThemeOverrides=!1;const i=Kn(this.chartProxyParams,this,this.isEnterpriseCharts,this.getChartThemeDefaults(),s??a),n=A(T({},r),{mode:"integrated"});return n.theme=i,n.container=this.chartProxyParams.parentElement,n}getChartThemeDefaults(){const s=this.getSeriesChartThemeDefaults(),e=s?{[this.standaloneChartType]:s}:{},t={enabled:!0,snap:!0,label:{enabled:!1}};return T({common:{navigator:{enabled:!1},zoom:{enabled:!0},animation:{enabled:!0,duration:500},axes:{number:{crosshair:t},category:{crosshair:t},log:{crosshair:t},time:{crosshair:t}}}},e)}getSeriesChartThemeDefaults(){}getActiveFormattingPanelOverrides(){var s,e;if(this.clearThemeOverrides)return{};const t=(s=this.chart)==null?void 0:s.getOptions().theme;return(e=t?.overrides)!=null?e:{}}destroy({keepChartInstance:s=!1}={}){if(s)return this.chart.resetAnimations(),this.chart;this.destroyChart()}destroyChart(){this.chart&&(this.chart.destroy(),this.chart=void 0)}},ue=class extends nt{constructor(s){super(s),this.crossFilteringAllPoints=new Set,this.crossFilteringSelectedPoints=[]}getUpdateOptions(s,e){const t=this.getAxes(s,e);return A(T({},e),{data:this.getData(s,t),axes:t,series:this.getSeries(s)})}getData(s,e){const t=["area","line"].includes(this.standaloneChartType);return this.crossFiltering&&t?this.getCrossFilterData(s):this.getDataTransformedData(s,e)}getDataTransformedData(s,e){const t=e[0].type,{categories:r,data:a}=s,[i]=r;switch(t){case"category":return this.transformCategoryData(a,i.id);case"time":return this.transformTimeData(a,i.id);default:return a}}getXAxisType(s){return s.grouping?"grouped-category":this.isXAxisOfType(s,"time",e=>e instanceof Date)?"time":this.isXAxisOfType(s,"number")?"number":"category"}isXAxisOfType(s,e,t){const[r]=s.categories;if(r?.chartDataType)return r.chartDataType===e;if(!t)return!1;const a=s.data[0];return a?t(a[r.id]):!1}transformTimeData(s,e){var t;return((t=s[0])==null?void 0:t[e])instanceof Date?s:s.map(a=>{const i=a[e];return typeof i=="string"?A(T({},a),{[e]:new Date(i)}):a})}crossFilteringReset(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()}crossFilteringPointSelected(s){return this.crossFilteringSelectedPoints.length==0||this.crossFilteringSelectedPoints.includes(s)}crossFilteringDeselectedPoints(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length}extractLineAreaCrossFilterSeries(s,e){const[t]=e.categories,r=a=>this.standaloneChartType==="area"?e.getCrossFilteringContext().lastSelectedChartId===e.chartId?a+"-total":a:a+"-total";return s.map(a=>(a.yKey=r(a.yKey),a.listeners={nodeClick:i=>{const n=i.datum[a.xKey],o=i.event.metaKey||i.event.ctrlKey;this.crossFilteringAddSelectedPoint(o,n),this.crossFilterCallback(i)}},a.marker={formatter:i=>{const n=i.datum[t.id];return{fill:i.highlighted?"yellow":i.fill,size:i.highlighted?14:this.crossFilteringPointSelected(n)?8:0}}},this.standaloneChartType==="area"&&(a.fillOpacity=this.crossFilteringDeselectedPoints()?.3:1),this.standaloneChartType==="line"&&(a.strokeOpacity=this.crossFilteringDeselectedPoints()?.3:1),a))}getCrossFilterData(s){this.crossFilteringAllPoints.clear();const[e]=s.categories,t=s.fields[0].colId,r=`${t}-filtered-out`,a=s.getCrossFilteringContext().lastSelectedChartId;return s.data.map(i=>{const n=i[e.id];this.crossFilteringAllPoints.add(n);const o=this.crossFilteringPointSelected(n);return this.standaloneChartType==="area"&&a===s.chartId&&(i[`${t}-total`]=o?i[t]:i[t]+i[r]),this.standaloneChartType==="line"&&(i[`${t}-total`]=o?i[t]:i[t]+i[r]),i})}crossFilteringAddSelectedPoint(s,e){s?this.crossFilteringSelectedPoints.push(e):this.crossFilteringSelectedPoints=[e]}isHorizontal(s){const e=this.standaloneChartType;if(e!=="waterfall"&&e!=="box-plot"&&e!=="range-bar")return!1;const t=s.theme,r=a=>{var i,n,o;const l=(o=(n=(i=a?.overrides)==null?void 0:i[e])==null?void 0:n.series)==null?void 0:o.direction;return l!=null?l==="horizontal":typeof a?.baseTheme=="object"?r(a.baseTheme):!1};return r(t)}};import{_Util as Pa}from"ag-charts-community";function ba(s,e){const t=parseInt(s.slice(1,3),16),r=parseInt(s.slice(3,5),16),a=parseInt(s.slice(5,7),16);return e?`rgba(${t}, ${r}, ${a}, ${e})`:`rgba(${t}, ${r}, ${a})`}function Aa(s,e){return s.map(t=>{const r=Pa.Color.fromString(t);return new Pa.Color(r.r,r.g,r.b,e).toHexString()})}var Dh=new Set(["bar","groupedBar","stackedBar","normalizedBar"]),kh=class extends ue{constructor(s){super(s)}getAxes(s){const e=[{type:this.getXAxisType(s),position:this.isHorizontal()?"left":"bottom"},{type:"number",position:this.isHorizontal()?"bottom":"left"}];if(this.isNormalised()){const t=e[1];t.label=A(T({},t.label),{formatter:r=>Math.round(r.value)+"%"})}return e}getSeries(s){const[e]=s.categories,t=s.fields.map(r=>({type:this.standaloneChartType,direction:this.isHorizontal()?"horizontal":"vertical",stacked:this.crossFiltering||On(this.chartType),normalizedTo:this.isNormalised()?100:void 0,xKey:e.id,xName:e.name,yKey:r.colId,yName:r.displayName}));return this.crossFiltering?this.extractCrossFilterSeries(t):t}extractCrossFilterSeries(s){const e=this.getChartPalette(),t=(i,n)=>A(T({},i),{highlightStyle:{item:{fill:void 0}},fill:e?.fills[n],stroke:e?.strokes[n],listeners:{nodeClick:this.crossFilterCallback}}),r=i=>{const n=i.yKey+"-filtered-out";return A(T({},De({},i)),{yKey:n,fill:ba(i.fill,"0.3"),stroke:ba(i.stroke,"0.3"),showInLegend:!1})},a=[];for(let i=0;i<s.length;i++){const n=t(s[i],i);a.push(n),a.push(r(n))}return a}isNormalised(){const s=["normalizedColumn","normalizedBar"];return!this.crossFiltering&&Eh.includes(s,this.chartType)}isHorizontal(){return Dh.has(this.chartType)}},Ih=class extends ue{constructor(s){super(s)}getAxes(s){const e=[{type:this.getXAxisType(s),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){const t=e[1];t.label=A(T({},t.label),{formatter:r=>Math.round(r.value)+"%"})}return e}getSeries(s){const[e]=s.categories,t=s.fields.map(r=>({type:this.standaloneChartType,xKey:e.id,xName:e.name,yKey:r.colId,yName:r.displayName,normalizedTo:this.chartType==="normalizedArea"?100:void 0,stacked:["normalizedArea","stackedArea"].includes(this.chartType)}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(t,s):t}isNormalised(){return!this.crossFiltering&&this.chartType==="normalizedArea"}},Lh=class extends ue{constructor(s){super(s)}getAxes(s){return[{type:this.getXAxisType(s),position:"bottom"},{type:"number",position:"left"}]}getSeries(s){const[e]=s.categories,t=s.fields.map(r=>({type:this.standaloneChartType,xKey:e.id,xName:e.name,yKey:r.colId,yName:r.displayName}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(t,s):t}},Rh=class extends nt{constructor(s){super(s)}getAxes(s){const e=this.standaloneChartType==="radial-bar";return[{type:e?"angle-number":"angle-category"},{type:e?"radius-category":"radius-number"}]}getSeries(s){const{fields:e,categories:t,seriesGroupType:r}=s,[a]=t,i=this.standaloneChartType==="radial-bar",n=this.getSeriesGroupTypeOptions(r);return e.map(o=>{var l,c;return T({type:this.standaloneChartType,angleKey:i?o.colId:a.id,angleName:i?(l=o.displayName)!=null?l:void 0:a.name,radiusKey:i?a.id:o.colId,radiusName:i?a.name:(c=o.displayName)!=null?c:void 0},n)})}getSeriesGroupType(){var s,e;const t=this.standaloneChartType;if(!["nightingale","radial-bar","radial-column"].includes(t))return;const r=(e=(s=this.getChart().series)==null?void 0:s[0])==null?void 0:e.properties.toJson(),a=()=>r.normalizedTo?"normalized":"stacked";return t==="nightingale"?r.grouped?"grouped":a():r.stacked?a():"grouped"}getUpdateOptions(s,e){const t=this.getAxes(s);return A(T({},e),{data:this.getData(s,t),axes:t,series:this.getSeries(s)})}getData(s,e){if(e.some(r=>r.type==="angle-category"||r.type==="radius-category")){const[r]=s.categories;return this.transformCategoryData(s.data,r.id)}else return s.data}getSeriesGroupTypeOptions(s){return s?{grouped:s==="grouped"||void 0,stacked:s!=="grouped"||void 0,normalizedTo:s==="normalized"?100:void 0}:{}}},_h=class Ei extends nt{constructor(e){super(e)}getUpdateOptions(e,t){return A(T({},t),{data:this.crossFiltering?this.getCrossFilterData(e):e.data,series:this.getSeries(e)})}getSeries(e){const[t]=e.categories,r=e.fields.length,a={currentOffset:0,offsetAmount:r>1?20:40},i=this.getFields(e).map(n=>{var o;const l={type:this.standaloneChartType,angleKey:n.colId,angleName:n.displayName,sectorLabelKey:n.colId,calloutLabelName:t.name,calloutLabelKey:t.id};if(this.chartType==="donut"||this.chartType==="doughnut"){const{outerRadiusOffset:c,innerRadiusOffset:h}=Ei.calculateOffsets(a),d=n.displayName?{title:{text:n.displayName,showInLegend:r>1}}:void 0;return A(T(A(T({},l),{type:"donut",outerRadiusOffset:c,innerRadiusOffset:h}),d),{calloutLine:{colors:(o=this.getChartPalette())==null?void 0:o.strokes}})}return l});return this.crossFiltering?this.extractCrossFilterSeries(i):i}getCrossFilterData(e){const t=e.fields[0].colId,r=`${t}-filtered-out`;return e.data.map(a=>{const i=a[t]+a[r];return a[`${t}-total`]=i,a[r]=1,a[t]=a[t]/i,a})}extractCrossFilterSeries(e){const t=this.getChartPalette(),r=l=>A(T({},l),{legendItemKey:l.calloutLabelKey,calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:l.angleKey,angleKey:l.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:this.crossFilterCallback}}),a=(l,c)=>{var h,d;return A(T({},De({},o)),{radiusKey:c+"-filtered-out",fills:Aa((h=l.fills)!=null?h:t.fills,.3),strokes:Aa((d=l.strokes)!=null?d:t.strokes,.3),showInLegend:!1})},i=e[0],n=i.angleKey,o=r(i);return[a(i,n),o]}static calculateOffsets(e){const t=e.currentOffset;e.currentOffset-=e.offsetAmount;const r=e.currentOffset;return e.currentOffset-=e.offsetAmount,{outerRadiusOffset:t,innerRadiusOffset:r}}getFields(e){return this.chartType==="pie"?e.fields.slice(0,1):e.fields}},Gh=class extends ue{constructor(s){super(s)}getAxes(s){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}getSeries(s){const[e]=s.categories,t=this.isPaired(),r=this.getSeriesDefinitions(s.fields,t),a=e.id===q.DEFAULT_CATEGORY?void 0:e,i=r.map(n=>{var o,l,c,h,d;return n?.sizeField?{type:"bubble",xKey:n.xField.colId,xName:(o=n.xField.displayName)!=null?o:void 0,yKey:n.yField.colId,yName:(l=n.yField.displayName)!=null?l:void 0,title:`${n.yField.displayName} vs ${n.xField.displayName}`,sizeKey:n.sizeField.colId,sizeName:(c=n.sizeField.displayName)!=null?c:"",labelKey:a?a.id:n.yField.colId,labelName:a?a.name:void 0}:{type:"scatter",xKey:n.xField.colId,xName:(h=n.xField.displayName)!=null?h:void 0,yKey:n.yField.colId,yName:(d=n.yField.displayName)!=null?d:void 0,title:`${n.yField.displayName} vs ${n.xField.displayName}`,labelKey:a?a.id:n.yField.colId,labelName:a?a.name:void 0}});return this.crossFiltering?this.extractCrossFilterSeries(i,s):i}extractCrossFilterSeries(s,e){const{data:t}=e,r=this.getChartPalette(),a=c=>`${c}-filtered-out`,i=(c,h)=>{var d;const u=[1/0,-1/0];if(h!=null)for(const g of c){const m=(d=g[h])!=null?d:g[a(h)];m<u[0]&&(u[0]=m),m>u[1]&&(u[1]=m)}if(u[0]<=u[1])return u},n=(c,h)=>{const d=r?.fills[h],u=r?.strokes[h];let g;if(c.type==="bubble"){const{sizeKey:f}=c;g=i(t,f)}const m=A(T({},c.marker),{fill:d,stroke:u,domain:g});return A(T({},c),{marker:m,highlightStyle:{item:{fill:"yellow"}},listeners:A(T({},c.listeners),{nodeClick:this.crossFilterCallback})})},o=c=>{let{yKey:h,xKey:d}=c,u={};return c.type==="bubble"&&(u={sizeKey:a(c.sizeKey)}),A(T(T({},c),u),{yKey:a(h),xKey:a(d),marker:A(T({},c.marker),{fillOpacity:.3,strokeOpacity:.3}),showInLegend:!1,listeners:A(T({},c.listeners),{nodeClick:g=>{const m=g.datum[a(d)],f=A(T({},g),{xKey:d,datum:A(T({},g.datum),{[d]:m})});this.crossFilterCallback(f)}})})},l=s.map(n);return[...l,...l.map(o)]}getSeriesDefinitions(s,e){if(s.length<2)return[];const t=this.chartType==="bubble";if(e)return t?s.map((a,i)=>i%3===0?{xField:a,yField:s[i+1],sizeField:s[i+2]}:null).filter(a=>a&&a.yField&&a.sizeField):s.map((a,i)=>i%2===0?{xField:a,yField:s[i+1]}:null).filter(a=>a&&a.yField);const r=s[0];return t?s.map((a,i)=>i%2===1?{xField:r,yField:a,sizeField:s[i+1]}:null).filter(a=>a&&a.sizeField):s.filter((a,i)=>i>0).map(a=>({xField:r,yField:a}))}},xa=class extends ue{constructor(s){super(s)}getAxes(s,e){return[{type:this.getXAxisType(s),position:this.isHorizontal(e)?"left":"bottom"},{type:"number",position:this.isHorizontal(e)?"bottom":"left"}]}computeSeriesStatistics(s,e){const{data:t,fields:r}=s,[a]=s.categories,i=a.id||q.DEFAULT_CATEGORY,n=this.groupDataByCategory(i,t);return Array.from(n).map(([o,l])=>{const c={[a.id]:o};return r.forEach((h,d)=>{const u=l.map(g=>g[h.colId]).filter(g=>typeof g=="number"&&!isNaN(g));Object.entries(e(u)).forEach(([g,m])=>{const f=`${g}:${d}`;c[f]=u.length>0?m:null})}),c})}groupDataByCategory(s,e){const t=r=>{if(s===q.DEFAULT_CATEGORY)return 1;const a=r[s];return a==null?"":a instanceof Date?a.getTime():a};return e.reduce((r,a)=>{let i=t(a);const n=r.get(i);return n?n.push(a):r.set(i,[a]),r},new Map)}},Fh=class extends xa{constructor(s){super(s)}getSeries(s){const[e]=s.categories;return s.fields.map((t,r)=>{var a;return{type:this.standaloneChartType,xKey:e.id,xName:e.name,yName:(a=t.displayName)!=null?a:void 0,yLowName:"Min",yHighName:"Max",yLowKey:`min:${r}`,yHighKey:`max:${r}`}})}getData(s){return this.computeSeriesStatistics(s,e=>({min:Math.min(...e),max:Math.max(...e)}))}},Vh=class extends ue{constructor(s){super(s)}getSeries(s){const e=s.fields[0];return[{type:this.standaloneChartType,xKey:e.colId,xName:e.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]}getAxes(s){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}},Nh=class extends xa{constructor(s){super(s)}getSeries(s){const[e]=s.categories;return s.fields.map((t,r)=>{var a;return{type:this.standaloneChartType,xKey:e.id,xName:e.name,yName:(a=t.displayName)!=null?a:void 0,minName:"Min",q1Name:"Q1",medianName:"Median",q3Name:"Q3",maxName:"Max",minKey:`min:${r}`,q1Key:`q1:${r}`,medianKey:`median:${r}`,q3Key:`q3:${r}`,maxKey:`max:${r}`}})}getData(s){return this.computeSeriesStatistics(s,e=>{const t=e.sort((r,a)=>r-a);return{min:t[0],q1:this.quantile(t,.25),median:this.quantile(t,.5),q3:this.quantile(t,.75),max:t[t.length-1]}})}quantile(s,e){const t=(s.length-1)*e,r=Math.floor(t),a=t-r;return s[r+1]!==void 0?s[r]+a*(s[r+1]-s[r]):s[r]}};function Bh(s,e){return s.reduce((t,r,a,i)=>t.concat(e(r,a,i)),new Array)}var Uh="AG-GRID-DEFAULT-HEATMAP-CATEGORY-KEY",Hh="AG-GRID-DEFAULT-HEATMAP-SERIES-KEY",Wh="AG-GRID-DEFAULT-HEATMAP-VALUE-KEY",zh=class extends nt{constructor(s){super(s)}getUpdateOptions(s,e){const t=Hh,r=Wh,a=Uh;return A(T({},e),{series:this.getSeries(s,t,r,a),data:this.getData(s,t,r,a)})}getSeries(s,e,t,r){const[a]=s.categories;return[{type:this.standaloneChartType,yKey:r,xKey:e,colorKey:t,yName:a.name,xName:void 0,colorName:void 0}]}getData(s,e,t,r){const[a]=s.categories;return Bh(s.data,(i,n)=>{const o=i[a.id],l=o==null?"":String(o),c={id:n,value:o,toString:()=>l};return s.fields.map(({colId:h,displayName:d})=>A(T({},i),{[e]:d,[t]:i[h],[r]:c}))})}getSeriesChartThemeDefaults(){return{gradientLegend:{gradient:{preferredLength:200}},series:{tooltip:{renderer:Yh}}}}};function Yh(s){const{xKey:e,yKey:t,colorKey:r,yName:a,datum:i}=s;return{title:"",content:[{label:a,value:i[t]},{label:i[e],value:r&&i[r]}].map(({label:l,value:c})=>`<b>${Ma(String(l))}:</b> ${Ma(String(c))}`).join("<br>")}}function Ma(s){const e={"&":"&amp;","<":"&lt;",">":"&gt;"},t=`[${Object.keys(e).join("")}]`,r=new RegExp(t,"g");return s.replace(r,a=>e[a])}var Kh=class extends ue{constructor(s){super(s)}getAxes(s,e){return[{type:this.getXAxisType(s),position:this.isHorizontal(e)?"left":"bottom"},{type:"number",position:this.isHorizontal(e)?"bottom":"left"}]}getSeries(s){var e;const[t]=s.categories,[r]=s.fields;return[{type:this.standaloneChartType,xKey:t.id,xName:t.name,yKey:r.colId,yName:(e=r.displayName)!=null?e:void 0}]}};import{BeanStub as $h,Events as Xh}from"@ag-grid-community/core";import{AgCharts as jh}from"ag-charts-community";var Ea=["number","category","time","grouped-category"],qh=["angle-category","angle-number","radius-category","radius-number"],Zh=[...Ea,...qh],Jh=class wi extends $h{constructor(e){super(),this.chartController=e}getChartThemeOverridesProxy(){return{getValue:e=>this.getChartOption(e),setValue:(e,t)=>this.setChartThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setChartThemeOverrides(e)}}getAxisThemeOverridesProxy(){return{getValue:e=>this.getAxisProperty(e),setValue:(e,t)=>this.setAxisThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setAxisThemeOverrides(e)}}getCartesianAxisOptionsProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,r)=>this.setCartesianAxisOptions(e,[{expression:t,value:r}]),setValues:t=>this.setCartesianAxisOptions(e,t)}}getCartesianAxisThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,r)=>this.setCartesianAxisThemeOverrides(e,[{expression:t,value:r}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getCartesianAxisAppliedThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisThemeOverride(e,t==="*"?null:t),setValue:(t,r)=>this.setCartesianAxisThemeOverrides(e,[{expression:t==="*"?null:t,value:r}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getSeriesOptionsProxy(e){return{getValue:(t,r)=>this.getSeriesOption(e(),t,r),setValue:(t,r)=>this.setSeriesOptions(e(),[{expression:t,value:r}]),setValues:t=>this.setSeriesOptions(e(),t)}}getPersistedChartThemeOverrides(e,t,r,a){const i=this.getRetainedChartThemeOverrideKeys(r,a),n=this.getRetainedChartAxisThemeOverrideKeys(null,r,a),o=this.createChartOptions();for(const l of i){const c=this.retrieveChartOptionsThemeOverride(e,r,l);c!==void 0&&this.assignChartOptionsThemeOverride(o,a,l,c)}return t&&this.assignPersistedAxisOverrides({existingAxes:t,retainedChartAxisThemeOverrideKeys:n,existingChartOptions:e,targetChartOptions:o,existingChartType:r,targetChartType:a}),o.theme.overrides}assignPersistedAxisOverrides(e){const{existingAxes:t,retainedChartAxisThemeOverrideKeys:r,existingChartOptions:a,targetChartOptions:i,existingChartType:n,targetChartType:o}=e;for(const{expression:l,targetAxisTypes:c}of r)for(const h of t.map(d=>d.type)){const d=this.retrieveChartOptionsThemeOverride(a,n,["axes",h,l].join("."));if(d!==void 0)for(const u of c)this.assignChartOptionsThemeOverride(i,o,["axes",u,l].join("."),d)}}getRetainedChartThemeOverrideKeys(e,t){const r=["animation"],a=["zoom","navigator"],i=((n,o)=>{const l=new Array;return ye(w(n))&&ye(w(o))&&l.push(...a),l})(e,t);return[...r,...i]}getRetainedChartAxisThemeOverrideKeys(e,t,r){return ye(w(t))&&ye(w(r))?this.getRetainedCartesianAxisThemeOverrideKeys(e).map(i=>({expression:i,targetAxisTypes:Ea})):[]}getRetainedCartesianAxisThemeOverrideKeys(e){const t=e==="xAxis"?["",".top",".bottom"]:e==="yAxis"?["",".left",".right"]:["",".left",".right",".top",".bottom"],r=["crosshair"],a=new Array;for(const i of r)for(const n of t)a.push(`${i}${n}`);return a}getChartOption(e){return Te(this.getChart(),e,void 0)}setChartThemeOverrides(e){const t=this.getChartType(),r=this.createChartOptions();for(const{expression:a,value:i}of e)this.assignChartOptionsThemeOverride(r,t,a,i);this.applyChartOptions(r)}applyChartOptions(e,t){if(Object.keys(e).length===0)return;this.updateChart(e),!t?.silent&&this.raiseChartOptionsChangedEvent()}awaitChartOptionUpdate(e){this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>e()).catch(r=>console.error("AG Grid - chart update failed",r))}getAxisProperty(e){var t;return Te((t=this.getChart().axes)==null?void 0:t[0],e,void 0)}setAxisThemeOverrides(e){var t;const r=this.getChart(),a=this.getChartType();let i=this.createChartOptions();for(const{expression:n,value:o}of e){const l=(t=r.axes)==null?void 0:t.filter(c=>{const h=n.split(".");let d=c;for(const u of h){if(!(u in d))return!1;d=d[u]}return!0});if(l)for(const c of l)this.isValidAxisType(c)&&this.assignChartAxisThemeOverride(i,a,c.type,null,n,o)}this.applyChartOptions(i)}getCartesianAxisProperty(e,t){const r=this.getChartAxes(),a=this.getCartesianAxis(r,e);return Te(a,t,void 0)}getCartesianAxisThemeOverride(e,t){const r=this.getChartAxes(),a=this.getCartesianAxis(r,e);if(!a||!this.isValidAxisType(a))return;const i=this.getChartType(),n=this.getChart().getOptions();return this.retrieveChartAxisThemeOverride(n,i,a.type,e==="yAxis"?["left","right"]:["bottom","top"],t)}setCartesianAxisThemeOverrides(e,t){const r=this.getChartAxes(),a=this.getCartesianAxis(r,e);if(!a||!this.isValidAxisType(a))return;const i=this.getChartType();let n=this.createChartOptions();for(const{expression:o,value:l}of t)this.assignChartAxisThemeOverride(n,i,a.type,e==="yAxis"?["left","right"]:["bottom","top"],o,l);this.applyChartOptions(n)}setCartesianAxisOptions(e,t){this.updateCartesianAxisOptions(e,(r,a,i)=>{const n=a.indexOf(i);for(const{expression:o,value:l}of t)this.assignChartOption(r,`axes.${n}.${o}`,l)})}updateCartesianAxisOptions(e,t){const r=this.getChart().getOptions(),a="axes"in r?r.axes:void 0;if(!r||!a)return;const i=this.getChartAxes(),n=this.getCartesianAxis(i,e);if(!n)return;let o=this.createChartOptions();o.axes=a,t(o,i,n,r),this.applyChartOptions(o)}setCartesianCategoryAxisType(e,t){this.updateCartesianAxisOptions(e,(r,a,i,n)=>{const o=this.getChartType();this.assignPersistedAxisOverrides({existingAxes:[i],retainedChartAxisThemeOverrideKeys:this.getRetainedChartAxisThemeOverrideKeys(e,o,o),existingChartOptions:n,targetChartOptions:r,existingChartType:o,targetChartType:o}),this.assignChartOption(r,"axes.0.type",t),this.chartController.setCategoryAxisType(t)})}getCartesianAxis(e,t){if(!(e.length<2))switch(t){case"xAxis":return e[0].direction==="x"?e[0]:e[1];case"yAxis":return e[1].direction==="y"?e[1]:e[0]}}getSeriesOption(e,t,r){const a=this.getChart().series.find(i=>wi.isMatchingSeries(e,i));return Te(r?a:a?.properties.toJson(),t,void 0)}setSeriesOptions(e,t){let r=this.createChartOptions();for(const{expression:a,value:i}of t)this.assignChartOptionsSeriesThemeOverride(r,e,`series.${a}`,i);this.applyChartOptions(r)}getPairedMode(){return this.chartController.getChartProxy().isPaired()}setPairedMode(e){this.chartController.getChartProxy().setPaired(e)}getChartAxes(){var e;return(e=this.getChart().axes)!=null?e:[]}retrieveChartAxisThemeOverride(e,t,r,a,i){if(a)for(const n of a){const o=this.retrieveChartOptionsThemeOverride(e,t,["axes",r,n,...i?[i]:[]].join("."));if(o!==void 0)return o}else return this.retrieveChartOptionsThemeOverride(e,t,["axes",r,...i?[i]:[]].join("."))}assignChartAxisThemeOverride(e,t,r,a,i,n){if(a)for(const o of a)this.assignChartOptionsThemeOverride(e,t,["axes",r,o,...i?[i]:[]].join("."),n);else this.assignChartOptionsThemeOverride(e,t,["axes",r,...i?[i]:[]].join("."),n)}isValidAxisType(e){return Zh.includes(e.type)}getChartType(){return this.chartController.getChartType()}getChart(){return this.chartController.getChartProxy().getChart()}updateChart(e){const t=this.chartController.getChartProxy().getChartRef();t.skipAnimations(),jh.updateDelta(t,e)}createChartOptions(){return{theme:{overrides:{}}}}retrieveChartOptionsThemeOverride(e,t,r){const a=this.getChartThemeOverridesSeriesTypeKeys(t);for(const i of a){const n=this.retrieveChartOptionsSeriesThemeOverride(e,i,r);if(n!==void 0)return n}}assignChartOptionsThemeOverride(e,t,r,a){const i=this.getChartThemeOverridesSeriesTypeKeys(t);for(const n of i)this.assignChartOptionsSeriesThemeOverride(e,n,r,a)}retrieveChartOptionsSeriesThemeOverride(e,t,r){return this.retrieveChartOption(e,["theme","overrides",t,...r?[r]:[]].join("."))}assignChartOptionsSeriesThemeOverride(e,t,r,a){this.assignChartOption(e,["theme","overrides",t,...r?[r]:[]].join("."),a)}getChartThemeOverridesSeriesTypeKeys(e){const t=this.chartController.getChartSeriesTypes(e);return this.chartController.isComboChart()&&t.push("common"),t}retrieveChartOption(e,t){return Te(e,t,void 0)}assignChartOption(e,t,r){Yn(e,t,r)}raiseChartOptionsChangedEvent(){const e=this.chartController.getChartModel(),t={type:Xh.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions};this.eventService.dispatchEvent(t)}static isMatchingSeries(e,t){return Mn(e)&&t.type===e}destroy(){super.destroy()}},Qh=class extends ue{constructor(s){super(s)}getAxes(s){const e=s?s.fields:[],t=new Map(e.map(n=>[n.colId,n])),{primaryYKeys:r,secondaryYKeys:a}=this.getYKeys(e,s.seriesChartTypes),i=[{type:this.getXAxisType(s),position:"bottom"}];return r.length>0&&i.push({type:"number",keys:r,position:"left"}),a.length>0&&a.forEach(n=>{const o=t.get(n);if(!(o&&o.colId===n))return;const c={type:"number",keys:[n],position:"right"};i.push(c)}),i}getSeries(s){const{fields:e,seriesChartTypes:t}=s,[r]=s.categories;return e.map(a=>{const i=t.find(n=>n.colId===a.colId);if(i){const n=i.chartType,l=["groupedColumn","groupedBar"].includes(n)?{grouped:!0}:{};return T({type:w(n),xKey:r.id,yKey:a.colId,yName:a.displayName,stacked:["stackedArea","stackedColumn"].includes(n)},l)}})}getYKeys(s,e){const t=[],r=[];return s.forEach(a=>{const i=a.colId,n=e.find(o=>o.colId===i);n&&(n.secondaryAxis?r.push(i):t.push(i))}),{primaryYKeys:t,secondaryYKeys:r}}};import{Autowired as wa,Bean as ed,BeanStub as td,_ as Yt}from"@ag-grid-community/core";var Kt=["chartSettings","chartData","chartFormat"],ot=["chartUnlink","chartLink","chartDownload"],$t={settings:"chartSettings",data:"chartData",format:"chartFormat"},lt=class extends td{isLegacyFormat(){return!this.chartService.isEnterprise()}downloadChart(s,e,t,r){s.chartController.getChartProxy().downloadChart(e,t,r)}toggleLinked(s){s.chartController.detachChartRange()}openAdvancedSettings(s,e){this.advancedSettingsMenuFactory.showMenu(s,e)}hideAdvancedSettings(){this.advancedSettingsMenuFactory.hideMenu()}getToolbarOptionsAndPanels(s){var e,t,r;const a=this.isLegacyFormat(),i=!!this.gos.get("chartToolPanelsDef")||!a;let n,o,l;if(i){const c=a?[s.isChartLinked()?"chartLink":"chartUnlink","chartDownload"]:["chartMenu"],h=this.gos.getCallback("getChartToolbarItems");l=h?h({defaultItems:c}).filter(m=>{if(!(a?ot:[...ot,"chartMenu"]).includes(m)){let f;return Kt.includes(m)?f=`'${m}' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead`:m==="chartMenu"?f="'chartMenu' is only allowed as a Chart Toolbar Option when using AG Charts Enterprise":f=`'${m}' is not a valid Chart Toolbar Option`,Yt.warnOnce(f),!1}return!0}):c;const u=(t=(e=this.gos.get("chartToolPanelsDef"))==null?void 0:e.panels)==null?void 0:t.map(m=>{const f=$t[m];return f||Yt.warnOnce(`Invalid panel in chartToolPanelsDef.panels: '${m}'`),f}).filter(m=>!!m);n=u||Object.values($t),s.isPivotChart()&&(n=n.filter(m=>m!=="chartData"));const g=(r=this.gos.get("chartToolPanelsDef"))==null?void 0:r.defaultToolPanel;o=g&&$t[g]||n[0],a&&(l=n.length>0?[n[0],...l]:l)}else{let c=["chartSettings","chartData","chartFormat",s.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];const h=this.gos.getCallback("getChartToolbarItems");if(h){const u=this.gos.get("suppressChartToolPanelsButton");c=h({defaultItems:u?c:ot}).filter(m=>{if(!Kt.includes(m)&&!ot.includes(m))return Yt.warnOnce(`'${m}' is not a valid Chart Toolbar Option`),!1;if(!u&&Kt.includes(m)){const f=`'${m}' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead`;return Yt.warnOnce(f),!1}return!0}),u||(c=c.concat(Kt))}s.isPivotChart()&&(c=c.filter(u=>u!=="chartData"));const d=["chartUnlink","chartLink","chartDownload"];n=c.filter(u=>d.indexOf(u)===-1),o=n[0],l=c.filter(u=>d.indexOf(u)!==-1||n.length&&u===n[0])}return{panels:n,defaultPanel:o,chartToolbarOptions:l}}doesChartToolbarExist(s){const{chartToolbarOptions:e}=this.getToolbarOptionsAndPanels(s);return["chartMenu",...ot].some(t=>e.includes(t))}doChartToolPanelsExist(s){const{panels:e}=this.getToolbarOptionsAndPanels(s);return e.length>0}};p([wa("chartService")],lt.prototype,"chartService",2),p([wa("advancedSettingsMenuFactory")],lt.prototype,"advancedSettingsMenuFactory",2),lt=p([ed("chartMenuService")],lt);var Xt="AG-GRID-DEFAULT-LABEL-KEY";function rd(s,e){const t=Oa(s,r,a);return _r(t);function r(n){return e.length}function a(n,o){const l=e[o],c=n[l];return i(c)}function i(n){return n==null?null:String(n)}}function sd(s,e){const t=Oa(s,r,a);return _r(t);function r(i){var n,o;return(o=(n=e(i))==null?void 0:n.length)!=null?o:0}function a(i,n){const o=e(i);if(!o)return null;const l=o.length-1-n;return o[l]}}function _r(s,e=null,t){const{depth:r,rootValues:a,value:i,children:n}=s;if(a)return a.map(l=>T({[Xt]:e},l));if(r===0)return[T({[Xt]:e},i)];const o=[];for(const[l,c]of n.entries())o.push(..._r(c,l,!0));return t?[T({[Xt]:e,children:o},i??{})]:o}function Oa(s,e,t){const r={depth:0,children:new Map};return s.forEach(i=>{const n=e(i);a(i,n,t,0,r)}),r;function a(i,n,o,l,c){if(l===n)return l===0?(c.rootValues||(c.rootValues=[]),c.rootValues.push(i)):c.value=i,c;{const h=o(i,l),d=c.children.get(h),u=a(i,n,o,l+1,d||{depth:0,children:new Map});return c.children.set(h,u),c.depth=Math.max(1+u.depth,c.depth),c}}}import{GROUP_AUTO_COLUMN_ID as ad}from"@ag-grid-community/core";var id=class extends nt{constructor(s){super(s)}getUpdateOptions(s,e){const{fields:t}=s,[r,a]=t;return A(T({},e),{series:this.getSeries(r,a),data:this.getData(s,r,a)})}getSeriesChartThemeDefaults(){return{gradientLegend:{gradient:{preferredLength:200}}}}getSeries(s,e){var t,r;return[{type:this.standaloneChartType,labelKey:Xt,sizeKey:s?.colId,sizeName:(t=s?.displayName)!=null?t:void 0,colorKey:e?.colId,colorName:(r=e?.displayName)!=null?r:void 0}]}getData(s,e,t){var r;const{categories:a,data:i,groupData:n,grouping:o}=s;if(o){const l=t?i.concat((r=n?.map(c=>{const h=T({},c);return delete h[e.colId],h}))!=null?r:[]):i;return sd(l,c=>{var h,d;return(d=(h=c[ad])==null?void 0:h.labels)!=null?d:null})}else{const l=a.map(({id:c})=>c);return rd(i,l)}}},K=class Hr extends Xi{constructor(e){super(Hr.TEMPLATE),this.params=e}init(){const e=A(T({},this.params),{chartType:Fe(this.params.chartType),chartThemeName:this.getThemeName()}),t=this.gos.get("enableRtl");this.addCssClass(t?"ag-rtl":"ag-ltr");const r=this.createBean(new q(e));this.chartController=this.createManagedBean(new W(r)),this.chartOptionsService=this.createManagedBean(new Jh(this.chartController)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,W.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes"],this.reactivePropertyUpdate.bind(this)),this.update(),this.raiseChartCreatedEvent()}createChart(){var e;let t;this.chartProxy&&(t=this.chartProxy.destroy({keepChartInstance:!0}));const r=(o,l)=>{const c=this.params.crossFilteringContext;c.lastSelectedChartId=l?"":this.chartController.getChartId(),l&&this.params.crossFilteringResetCallback(),this.crossFilterService.filter(o,l)},a=this.chartController.getChartType(),i={chartType:a,chartInstance:t,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gos.get("customChartThemes"),getGridOptionsChartThemeOverrides:()=>this.getGridOptionsChartThemeOverrides(),getExtraPaddingDirections:()=>{var o,l;return(l=(o=this.chartMenu)==null?void 0:o.getExtraPaddingDirections())!=null?l:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:(e=this.params.crossFiltering)!=null?e:!1,crossFilterCallback:r,parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:o=>this.chartTranslationService.translate(o)};if(this.params.chartOptionsToRestore=void 0,this.chartType=a,this.chartProxy=Hr.createChartProxy(i),!this.chartProxy){console.warn("AG Grid: invalid chart type supplied: ",i.chartType);return}const n=this.eChart.querySelector("canvas");n&&n.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.createMenuContext(),this.titleEdit&&this.titleEdit.refreshTitle(this.chartMenuContext)}createMenuContext(){if(this.chartMenuContext)return;const e=this.createManagedBean(new be(this.chartOptionsService.getChartThemeOverridesProxy())),t=this.createManagedBean(new be(this.chartOptionsService.getAxisThemeOverridesProxy()));this.chartMenuContext={chartController:this.chartController,chartOptionsService:this.chartOptionsService,chartMenuParamsFactory:e,chartAxisMenuParamsFactory:t}}getChartThemeName(){return this.chartController.getChartThemeName()}getChartThemes(){return this.chartController.getThemeNames()}getGridOptionsChartThemeOverrides(){return this.gos.get("chartThemeOverrides")}static createChartProxy(e){switch(e.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new kh(e);case"pie":case"donut":case"doughnut":return new _h(e);case"area":case"stackedArea":case"normalizedArea":return new Ih(e);case"line":return new Lh(e);case"scatter":case"bubble":return new Gh(e);case"histogram":return new Vh(e);case"radarLine":case"radarArea":case"nightingale":case"radialColumn":case"radialBar":return new Rh(e);case"rangeBar":case"rangeArea":return new Fh(e);case"boxPlot":return new Nh(e);case"treemap":case"sunburst":return new id(e);case"heatmap":return new zh(e);case"waterfall":return new Kh(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new Qh(e);default:throw`AG Grid: Unable to create chart as an invalid chartType = '${e.chartType}' was supplied.`}}addDialog(){const e=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),{width:t,height:r}=this.getBestDialogSize();this.chartDialog=new $r({resizable:!0,movable:!0,maximizable:!0,title:e,width:t,height:r,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener($r.EVENT_DESTROYED,()=>{this.destroy(),this.chartMenuService.hideAdvancedSettings()})}getBestDialogSize(){const e=this.popupService.getPopupParent(),t=ie.getAbsoluteWidth(e)*.75,r=ie.getAbsoluteHeight(e)*.75,a=.553,i=this.chartProxy.getChart();let n=this.params.insideDialog?850:i.width,o=this.params.insideDialog?470:i.height;return(n>t||o>r)&&(n=Math.min(n,t),o=Math.round(n*a),o>r&&(o=r,n=Math.min(n,Math.round(o/a)))),{width:n,height:o}}addMenu(){this.params.crossFiltering||(this.chartMenu=this.createBean(new bh(this.eChartContainer,this.eMenuContainer,this.chartMenuContext)),this.eChartContainer.appendChild(this.chartMenu.getGui()))}addTitleEditComp(){this.titleEdit=this.createBean(new Mh(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartMenuContext)}update(e){if(e?.chartId&&!this.chartController.update(e))return;const t=this.chartTypeChanged(e),r=t||this.chartEmpty?(i=>{const n=this.chartType,o=i,l=this.chartProxy.getChart(),c=l?.getOptions(),h=l?.axes;return this.chartOptionsService.getPersistedChartThemeOverrides(c,h,n,o??n)})(t):void 0;t&&this.createChart();const a=r&&e?.chartThemeOverrides?De(r,e.chartThemeOverrides):r||e?.chartThemeOverrides;this.updateChart(a),e?.chartId&&this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartApiUpdateEvent()})}updateChart(e){const{chartProxy:t}=this,r=this.chartController.getSelectedValueColState(),a=this.chartController.getChartData(),i=this.handleEmptyChart(a,r.length);if(this.chartEmpty=i,i){e&&this.chartController.updateThemeOverrides(e);return}let n=this.chartController.getChartUpdateParams(e);t.update(n),this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartUpdatedEvent()}),this.titleEdit.refreshTitle(this.chartMenuContext)}chartTypeChanged(e){const[t,r]=[this.chartController.getChartType(),e?.chartType],a=r?Fe(r):void 0;return this.chartType!==t?a??t:a&&t!==a?a:null}getChartModel(){return this.chartController.getChartModel()}getChartImageDataURL(e){return this.chartProxy.getChartImageDataURL(e)}handleEmptyChart(e,t){const r=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),a=this.chartController.getChartType();let i=1;this.chartController.isActiveXYChart()?i=a==="bubble"?3:2:Se(w(a))&&(i=0);const n=t<i||e.length===0;if(this.eChart){const o=r||n;ie.setDisplayed(this.eChart,!o),ie.setDisplayed(this.eEmpty,o)}return r?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):n?(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0):!1}downloadChart(e,t,r){this.chartProxy.downloadChart(e,t,r)}openChartToolPanel(e){const t=e&&$t[e];this.chartMenu.showMenu({panel:t})}closeChartToolPanel(){this.chartMenu.hideMenu()}getChartId(){return this.chartController.getChartId()}getUnderlyingChart(){return this.chartProxy.getChartRef()}crossFilteringReset(){this.chartProxy.crossFilteringReset()}setActiveChartCellRange(e){this.getGui().contains(e.relatedTarget)||(this.chartController.setChartRange(!0),this.focusService.clearFocusedCell())}getThemeName(){const e=this.gos.get("chartThemes")||vs;if(e.length===0)throw new Error("Cannot create chart: no chart themes available.");const{chartThemeName:t}=this.params;return ie.includes(e,t)?t:e[0]}getAllKeysInObjects(e){const t={};return e.filter(r=>r!=null).forEach(r=>{Object.keys(r).forEach(a=>t[a]=null)}),Object.keys(t)}validateCustomThemes(){const e=this.getChartThemes(),t=this.gos.get("customChartThemes");t&&this.getAllKeysInObjects([t]).forEach(r=>{ie.includes(e,r)||console.warn("AG Grid: a custom chart theme with the name '"+r+"' has been supplied but not added to the 'chartThemes' list")})}reactivePropertyUpdate(){this.chartController.setChartThemeName(this.getThemeName(),!0);const e=this.getChartId(),t=this.chartController.isCrossFilterChart()?"crossFilter":this.getChartModel().modelType,r=this.gos.get("chartThemeOverrides")||{};this.update({type:`${t}ChartUpdate`,chartId:e,chartThemeOverrides:r})}raiseChartCreatedEvent(){const e={type:Xr.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then(()=>{this.eventService.dispatchEvent(e)})}raiseChartDestroyedEvent(){const e={type:Xr.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(e)}destroy(){var e;super.destroy(),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog),(e=this.onDestroyColorSchemeChangeListener)==null||e.call(this);const t=this.getGui();ie.clearElement(t),ie.removeFromParent(t),this.raiseChartDestroyedEvent()}};K.TEMPLATE=`<div class="ag-chart" tabindex="-1">
            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">
                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>
                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>
            </div>
            <div ref="eTitleEditContainer"></div>
            <div ref="eMenuContainer" class="ag-chart-docked-container" style="min-width: 0px;"></div>
        </div>`,p([Re("eChart")],K.prototype,"eChart",2),p([Re("eChartContainer")],K.prototype,"eChartContainer",2),p([Re("eMenuContainer")],K.prototype,"eMenuContainer",2),p([Re("eEmpty")],K.prototype,"eEmpty",2),p([Re("eTitleEditContainer")],K.prototype,"eTitleEditContainer",2),p([Le("chartCrossFilterService")],K.prototype,"crossFilterService",2),p([Le("chartTranslationService")],K.prototype,"chartTranslationService",2),p([Le("chartMenuService")],K.prototype,"chartMenuService",2),p([Le("focusService")],K.prototype,"focusService",2),p([Le("popupService")],K.prototype,"popupService",2),p([ji],K.prototype,"init",1);var Da=K,ct="31.3.2",ht=!1;function nd(s){const e=s.version;return s.version==null&&(s.version=yd(s)),s=U("23.0.0",s,od),s=U("24.0.0",s,ld),s=U("25.1.0",s,cd),s=U("26.0.0",s,hd),s=U("26.1.0",s,dd),s=U("26.2.0",s,ud),s=U("28.0.0",s,pd),s=U("28.2.0",s,gd),s=U("29.0.0",s,md),s=U("29.1.0",s,ka),s=U("29.2.0",s,Ia),s=U("30.0.0",s,Cd),s=U("31.0.0",s,fd),s=vd(s),s=U(ct,s,t=>t),ht&&e!==s.version&&console.log("AG Grid: ChartModel migration complete",{model:s}),s}function od(s){return s=B("chartOptions.legend.item.marker.type","shape",s),s=B("chartOptions.seriesDefaults.marker.type","shape",s),s=B("chartOptions.legend.padding","spacing",s),s}function ld(s){var e;s=N("chartOptions.seriesDefaults.marker.minSize",s);const t=s,{chartType:r,chartPalette:a,chartOptions:i}=t,n=i,{xAxis:o,yAxis:l}=n,c=ae(n,["xAxis","yAxis"]),h=ae(t,["chartType","chartPalette","chartOptions"]),d=_n(r),u=d?.map((m,f)=>T({type:m},f===0?o:l));return T({chartType:r,chartThemeName:(e={borneo:"ag-default",material:"ag-material",bright:"ag-vivid"}[a])!=null?e:"ag-default",chartOptions:A(T({},c),{axes:u,xAxis:o,yAxis:l})},h)}function cd(s){return s=B("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",s),s}function hd(s){return s=re("chartOptions.seriesDefaults.highlightStyle",s,t=>{var r=t,{dimOpacity:a}=r,i=ae(r,["dimOpacity"]);return T(T({},i),a!=null?{series:{dimOpacity:a}}:{})}),s=N("chart",s),s=N("chartOptions.seriesDefaults.tooltipClass",s),s=N("chartOptions.seriesDefaults.tooltipTracking",s),s=Ra("chartOptions.axes[].label.rotation",0,s),s=Ra("chartOptions.axes[].label.rotation",335,s),s}function dd(s){const e=t=>{var r=t,{item:a,series:i}=r,n=ae(r,["item","series"]);return T({item:T(T({},n),a)},i?{series:i}:{})};return s=re("chartOptions.seriesDefaults.highlightStyle",s,e),s=re("chartOptions.series[].highlightStyle",s,e),s}function ud(s){s=jt("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",s),s=jt("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",s),s=jt("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",s),s=N("chartOptions.seriesDefaults.fill",s),s=N("chartOptions.seriesDefaults.stroke",s),s=N("chartOptions.seriesDefaults.callout.colors",s),s=N("chartOptions.xAxis",s),s=N("chartOptions.yAxis",s);const e=s,{chartType:t,chartOptions:r}=e,a=r,{axes:i,series:n,seriesDefaults:o}=a,l=ae(a,["axes","series","seriesDefaults"]),c=ae(e,["chartType","chartOptions"]),h=Fe(t),d=w(h),u=[d],g={};if(!ns(d)){const f={top:{},bottom:{},left:{},right:{}},C=i.map(y=>{var v=y,{type:S}=v,P=ae(v,["type"]);return{[S]:T(T({},f),P)}}).reduce(Ga,{});hs.filter(y=>C[y]==null).forEach(y=>{C[y]=T({},f)}),g.axes=C}const m=u.map(f=>({[f]:T(A(T({},g),{series:o}),l)})).reduce(Ga,{});return s=A(T({},c),{chartType:h,chartOptions:m}),s}function pd(s){return s=N("chartOptions.*.title.padding",s),s=N("chartOptions.*.subtitle.padding",s),s=N("chartOptions.*.axes.*.title.padding",s),s=Gr("chartOptions.*.axes.*.title.enabled",!1,s),s}function gd(s){return s=B("chartOptions.pie.series.callout","calloutLine",s),s=B("chartOptions.pie.series.label","calloutLabel",s),s=B("chartOptions.pie.series.labelKey","sectorLabelKey",s),s=B("chartOptions.pie.series.labelName","sectorLabelName",s),s=B("chartOptions.donut.series.callout","calloutLine",s),s=B("chartOptions.donut.series.label","calloutLabel",s),s=B("chartOptions.donut.series.labelKey","sectorLabelKey",s),s=B("chartOptions.donut.series.labelName","sectorLabelName",s),s}function md(s){return s=dt("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",s),s=dt("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",s),s=dt("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",s),s=dt("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",s),s=dt("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",s),s=jt("chartOptions.scatter.series.paired","chartOptions.scatter.paired",s),s}function ka(s){return s=N("chartOptions.axes[].tick.count",s),s}function Ia(s){return s=re("chartOptions.*.tooltip",s,t=>{var r=t,{tracking:a}=r,i=ae(r,["tracking"]),n,o,l,c;const h=T({},i);return a===!1?((n=h.position)!=null||(h.position={type:"pointer"}),(o=h.range)!=null||(h.range="nearest")):a===!0&&((l=h.position)!=null||(h.position={type:"node"}),(c=h.range)!=null||(h.range="nearest")),h}),s}function Cd(s){return s=B("chartOptions.pie.series.labelKey","sectorLabelKey",s),s=B("chartOptions.pie.series.labelName","sectorLabelName",s),s=ka(s),s=Ia(s),s=N("chartOptions.*.series.flipXY",s),s=_a("chartOptions.common.legend.enabled",!0,s),s=Gr("chartOptions.common.legend.position","right",s),s}function fd(s){const e={"ag-pastel":"ag-sheets","ag-solar":"ag-polychroma"},t=B("chartOptions.column","bar",s),r=e[t.chartThemeName]||t.chartThemeName;return A(T({},t),{chartThemeName:r})}function vd(s){return s=N("chartOptions.*.width",s),s=N("chartOptions.*.height",s),s=Gr("chartOptions.*.axes.category.label.autoRotate",!0,s),s}function yd(s){var e,t;const r=s;if(s.version!=null)return s.version;const a=(d,...u)=>Object.keys(d||{}).some(g=>u.includes(g)),i=r.chartOptions,n=a(i,"seriesDefaults")?i?.seriesDefaults:i?.[Object.keys(i)[0]],o={"27.0.0":a(r,"seriesChartTypes"),"26.2.0":!a(i,"seriesDefaults"),"26.1.0":a(n?.highlightStyle,"item"),"26.0.0":a(n?.highlightStyle,"series"),"25.1.0":a(n?.label,"minAngle"),"25.0.0":a(r,"modelType","aggFunc","unlinkChart","suppressChartRanges")||a(n,"lineDash","lineDashOffset"),"24.0.0":a(r,"chartThemeName","chart")||a(i,"series"),"23.2.0":a(i,"navigator"),"23.0.0":a((t=(e=i?.legend)==null?void 0:e.item)==null?void 0:t.marker,"shape"),"22.1.0":a(r,"chartPalette","chartType")},l="27.1.0",c=Object.entries(o).filter(([d,u])=>u);ht&&console.log("AG Grid: ChartModel migration",{heuristicVersionCandidates:c});const[h=l]=c[0];return ht&&console.log("AG Grid: ChartModel migration",{heuristicVersion:h}),h}function U(s,e,t){if(La(s)>La(e.version)){ht&&console.log("AG Grid: ChartModel migration",{migratingTo:s});const r=t(e);return r.version=s,ht&&console.log("AG Grid: ChartModel migration",{migratedTo:s,result:r}),r}return e}function Sd(s){const e=typeof s=="string"?s.split(".").map(t=>Number(t)):[];if(e.length!==3||e.some(t=>isNaN(t)))throw new Error("AG Grid - Illegal version string: "+s);return{major:e[0],minor:e[1],patch:e[2]}}function La(s){const{major:e,minor:t,patch:r}=Sd(s);return e*1e4+t*100+r}function Ra(s,e,t){return pe(s,!0,t,(r,a)=>{r[a]===e&&delete r[a]})}function Gr(s,e,t){return pe(s,!1,t,(r,a)=>{r[a]==null&&(r[a]=e)})}function _a(s,e,t){var r;typeof s=="string"&&(s=s.split("."));const a=s[0];return s.length>1&&(t[a]=_a(s.slice(1),e,(r=t[a])!=null?r:{})),Object.keys(t).includes(a)||(t[a]=e),t}function jt(s,e,t){let r,a=!1;return t=pe(s,!0,t,(i,n)=>{a=!0,r=i[n],delete i[n]}),a?pe(e,!1,t,(i,n)=>{i[n]=r}):t}function dt(s,e,t){let r,a=!1;return t=pe(s,!0,t,(i,n)=>{a=!0,r=i[n],delete i[n]}),a?pe(e,!1,t,(i,n)=>{i[n]===void 0&&(i[n]=r)}):t}function B(s,e,t){return pe(s,!0,t,(r,a)=>{r[e]=r[a],delete r[a]})}function N(s,e){return pe(s,!0,e,(t,r)=>delete t[r])}function pe(s,e,t,r){const a=s instanceof Array?s:s.split("."),i=a.slice(0,a.length-1),n=a[a.length-1];return re(i,t,o=>{const l=Object.keys(o).includes(n);if(e&&!l)return o;const c=T({},o);return r(c,n),c})}function re(s,e,t){const r=s instanceof Array?s:s.split(".");if(e=T({},e),r.length===0)return t(e);if(r[0].startsWith("{")){const a=r[0].substring(1,r[0].lastIndexOf("}")).split(",");for(const i of a)e[i]!=null&&(e[i]=re(r.slice(1),e[i],t))}else if(r[0].endsWith("[]")){const a=r[0].substring(0,s[0].indexOf("["));e[a]instanceof Array&&(e[a]=e[a].map(i=>re(r.slice(1),i,t)))}else if(r[0]==="*")for(const a in e)e[a]=re(r.slice(1),e[a],t);else e[r[0]]!=null&&(e[r[0]]=re(r.slice(1),e[r[0]],t));return e}var Ga=(s,e)=>T(T({},s),e),ge=class extends Wi{constructor(){super(...arguments),this.activeCharts=new Set,this.activeChartComps=new Set,this.crossFilteringContext={lastSelectedChartId:""},this.isEnterprise=()=>$i.enterpriseModule.isEnterprise}updateChart(s){if(this.activeChartComps.size===0){console.warn("AG Grid - No active charts to update.");return}const e=[...this.activeChartComps].find(t=>t.getChartId()===s.chartId);if(!e){console.warn(`AG Grid - Unable to update chart. No active chart found with ID: ${s.chartId}.`);return}e.update(s)}getChartModels(){const s=[],e=t=>A(T({},t),{version:ct});return this.activeChartComps.forEach(t=>s.push(e(t.getChartModel()))),s}getChartRef(s){let e;return this.activeCharts.forEach(t=>{t.chartId===s&&(e=t)}),e}getChartComp(s){let e;return this.activeChartComps.forEach(t=>{t.getChartId()===s&&(e=t)}),e}getChartImageDataURL(s){let e;return this.activeChartComps.forEach(t=>{t.getChartId()===s.chartId&&(e=t.getChartImageDataURL(s.fileFormat))}),e}downloadChart(s){const e=Array.from(this.activeChartComps).find(t=>t.getChartId()===s.chartId);e?.downloadChart(s.dimensions,s.fileName,s.fileFormat)}openChartToolPanel(s){const e=Array.from(this.activeChartComps).find(t=>t.getChartId()===s.chartId);e?.openChartToolPanel(s.panel)}closeChartToolPanel(s){const e=Array.from(this.activeChartComps).find(t=>t.getChartId()===s);e?.closeChartToolPanel()}createChartFromCurrentRange(s="groupedColumn"){const e=this.getSelectedRange();return this.createChart({cellRange:e,chartType:s})}restoreChart(s,e){if(!s){console.warn("AG Grid - unable to restore chart as no chart model is provided");return}s.version!==ct&&(s=nd(s));let t,r,a,i;if(s.modelType==="pivot"?(this.gos.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"}),t=this.createCellRange(void 0,!0),r=!0,a=!0):(t=this.createCellRange(s.cellRange),i=s.chartPalette),!!t)return this.createChart(A(T({},s),{cellRange:t,pivotChart:r,suppressChartRanges:a,chartContainer:e,chartOptionsToRestore:s.chartOptions,chartPaletteToRestore:i}))}createRangeChart(s){const e=this.createCellRange(s.cellRange);if(e)return this.createChart(A(T({},s),{cellRange:e}))}createPivotChart(s){this.gos.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"});const e=this.createCellRange(void 0,!0);if(e)return this.createChart(A(T({},s),{cellRange:e,pivotChart:!0,suppressChartRanges:!0}))}createCrossFilterChart(s){const e=this.createCellRange(s.cellRange);if(!e)return;const r=typeof s.suppressChartRanges<"u"&&s.suppressChartRanges!==null?s.suppressChartRanges:!0;return this.createChart(A(T({},s),{cellRange:e,suppressChartRanges:r,crossFiltering:!0}))}createChart(s){const e=fs.validateCreateParams(s);if(!e)return;s=e===!0?s:e;const{chartType:t,chartContainer:r}=s,a=this.gos.getCallback("createChartContainer"),i=A(T({},s),{chartId:this.generateId(),chartType:Fe(t),insideDialog:!(r||a),crossFilteringContext:this.crossFilteringContext,crossFilteringResetCallback:()=>this.activeChartComps.forEach(l=>l.crossFilteringReset())}),n=new Da(i);this.context.createBean(n);const o=this.createChartRef(n);if(r){r.appendChild(n.getGui());const l=this.environment.getTheme();l.el&&!l.el.contains(r)&&r.classList.add(l.theme)}else a?a(o):n.addEventListener(Da.EVENT_DESTROYED,()=>{this.activeChartComps.delete(n),this.activeCharts.delete(o)});return o}createChartRef(s){const e={destroyChart:()=>{this.activeCharts.has(e)&&(this.context.destroyBean(s),this.activeChartComps.delete(s),this.activeCharts.delete(e))},chartElement:s.getGui(),chart:s.getUnderlyingChart(),chartId:s.getChartModel().chartId};return this.activeCharts.add(e),this.activeChartComps.add(s),e}getSelectedRange(){var s,e;const t=(e=(s=this.rangeService)==null?void 0:s.getCellRanges())!=null?e:[];return t.length>0?t[0]:{columns:[]}}generateId(){return`id-${Math.random().toString(36).substring(2,18)}`}createCellRange(s,e){var t;const r=e?{rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(i=>i.getColId())}:s,a=r&&((t=this.rangeService)==null?void 0:t.createPartialCellRangeFromRangeParams(r,!0));return a||console.warn(`AG Grid - unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`),a}destroyAllActiveCharts(){this.activeCharts.forEach(s=>s.destroyChart())}};ge.CHARTS_VERSION=Ki,p([Ui("columnModel")],ge.prototype,"columnModel",2),p([zi("rangeService")],ge.prototype,"rangeService",2),p([Yi],ge.prototype,"destroyAllActiveCharts",1),ge=p([Hi("chartService")],ge);import{Bean as Td,BeanStub as Pd}from"@ag-grid-community/core";var ut=class extends Pd{translate(s){const e=this.localeService.getLocaleTextFunc(),t=ut.DEFAULT_TRANSLATIONS[s];return e(s,t)}};ut.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Chart",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",switchCategorySeries:"Switch Category / Series",categoryValues:"Category Values",seriesLabels:"Series Labels",aggregate:"Aggregate",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",xAxis:"Horizontal Axis",yAxis:"Vertical Axis",polarAxis:"Polar Axis",radiusAxis:"Radius Axis",navigator:"Navigator",zoom:"Zoom",animation:"Animation",crosshair:"Crosshair",color:"Color",thickness:"Thickness",preferredLength:"Preferred Length",xType:"X Type",axisType:"Axis Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",timeFormat:"Time Format",autoRotate:"Auto Rotate",labelRotation:"Rotation",circle:"Circle",orientation:"Orientation",polygon:"Polygon",fixed:"Fixed",parallel:"Parallel",perpendicular:"Perpendicular",radiusAxisPosition:"Position",ticks:"Ticks",gridLines:"Grid Lines",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",lineDashOffset:"Dash Offset",scrollingZoom:"Scrolling",scrollingStep:"Scrolling Step",selectingZoom:"Selecting",durationMillis:"Duration (ms)",crosshairLabel:"Label",crosshairSnap:"Snap to Node",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeColor:"Line Color",strokeOpacity:"Line Opacity",miniChart:"Mini-Chart",histogramBinCount:"Bin count",connectorLine:"Connector Line",seriesItems:"Series Items",seriesItemType:"Item Type",seriesItemPositive:"Positive",seriesItemNegative:"Negative",seriesItemLabels:"Item Labels",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",polarGroup:"Polar",statisticalGroup:"Statistical",hierarchicalGroup:"Hierarchical",specializedGroup:"Specialized",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",donutTooltip:"Donut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",radialColumnTooltip:"Radial Column",radialBarTooltip:"Radial Bar",radarLineTooltip:"Radar Line",radarAreaTooltip:"Radar Area",nightingaleTooltip:"Nightingale",rangeBarTooltip:"Range Bar",rangeAreaTooltip:"Range Area",boxPlotTooltip:"Box Plot",treemapTooltip:"Treemap",sunburstTooltip:"Sunburst",heatmapTooltip:"Heatmap",waterfallTooltip:"Waterfall",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",innerRadius:"Inner Radius",startAngle:"Start Angle",endAngle:"End Angle",reverseDirection:"Reverse Direction",groupPadding:"Group Padding",seriesPadding:"Series Padding",group:"Group",tile:"Tile",whisker:"Whisker",cap:"Cap",capLengthRatio:"Length Ratio",labelPlacement:"Placement",inside:"Inside",outside:"Outside",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",chartMenuToolbarTooltip:"Menu",chartEdit:"Edit Chart",chartAdvancedSettings:"Advanced Settings",chartLink:"Link to Grid",chartUnlink:"Unlink from Grid",chartDownload:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis",seriesAdd:"Add a series",categoryAdd:"Add a category",area:"Area",bar:"Bar",column:"Column",line:"Line",scatter:"Scatter",histogram:"Histogram",radialColumn:"Radial Column",radialBar:"Radial Bar",radarLine:"Radar Line",radarArea:"Radar Area",nightingale:"Nightingale",rangeBar:"Range Bar",rangeArea:"Range Area",treemap:"Treemap",sunburst:"Sunburst",waterfall:"Waterfall",boxPlot:"Box Plot",pie:"Pie",donut:"Donut",stackedArea:"StackedArea",groupedColumn:"Grouped Column",stackedColumn:"Stacked Column",advancedSettings:"Advanced Settings",ariaChartMenuClose:"Close Chart Edit Menu",timeFormatSlashesDDMMYYYY:"DD/MM/YYYY",timeFormatSlashesMMDDYYYY:"MM/DD/YYYY",timeFormatSlashesDDMMYY:"DD/MM/YY",timeFormatSlashesMMDDYY:"MM/DD/YY",timeFormatDotsDDMYY:"DD.M.YY",timeFormatDotsMDDYY:"M.DD.YY",timeFormatDashesYYYYMMDD:"YYYY-MM-DD",timeFormatSpacesDDMMMMYYYY:"DD MMMM YYYY",timeFormatHHMMSS:"HH:MM:SS",timeFormatHHMMSSAmPm:"HH:MM:SS AM/PM",sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average",direction:"Direction",horizontal:"Horizontal",vertical:"Vertical",seriesGroupType:"Group Type",groupedSeriesGroupType:"Grouped",stackedSeriesGroupType:"Stacked",normalizedSeriesGroupType:"100% Stacked"},ut=p([Td("chartTranslationService")],ut);import{_ as Fa,Autowired as Fr,Bean as bd,BeanStub as Ad}from"@ag-grid-community/core";var me=class extends Ad{filter(s,e=!1){const t=this.gridApi.getFilterModel();if(e){this.resetFilters(t);return}let r=me.extractFilterColId(s);this.isValidColumnFilter(r)?this.updateFilters(t,s,r):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+r+"'")}resetFilters(s){Object.keys(s).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())}updateFilters(s,e,t){let r=me.extractFilterColId(e),a=e.datum[r];if(a===void 0)return;let i=a.toString();if(e.event.metaKey||e.event.ctrlKey){const n=this.getCurrentGridValuesForCategory(t),o=Fa.includes(n,i);let l;o?l=n.filter(c=>c!==i):(l=n,l.push(i)),s[t]=this.getUpdatedFilterModel(t,l)}else{const n=[i];s={[t]:this.getUpdatedFilterModel(t,n)}}this.gridApi.setFilterModel(s)}getUpdatedFilterModel(s,e){return this.getColumnFilterType(s)==="agMultiColumnFilter"?{filterType:"multi",filterModels:[null,{filterType:"set",values:e}]}:{filterType:"set",values:e}}getCurrentGridValuesForCategory(s){let e=[];const t=this.getColumnById(s);return this.gridApi.forEachNodeAfterFilter(r=>{if(t&&!r.group){const a=this.valueService.getValue(t,r)+"";e.includes(a)||e.push(a)}}),e}static extractFilterColId(s){return s.xKey||s.calloutLabelKey}isValidColumnFilter(s){s.indexOf("-filtered-out")&&(s=s.replace("-filtered-out",""));let e=this.getColumnFilterType(s);return typeof e=="boolean"?e:Fa.includes(["agSetColumnFilter","agMultiColumnFilter"],e)}getColumnFilterType(s){let e=this.getColumnById(s);if(e)return e.getColDef().filter}getColumnById(s){return this.columnModel.getGridColumn(s)}};p([Fr("gridApi")],me.prototype,"gridApi",2),p([Fr("columnModel")],me.prototype,"columnModel",2),p([Fr("valueService")],me.prototype,"valueService",2),me=p([bd("chartCrossFilterService")],me);var Va=28,Na=6;function Vr(s){return s&&s.match(/\d+\.\d+\.\d+/)}function xd({gridMajorVersion:s,chartsMajorVersion:e}){const t=parseInt(s,10),r=parseInt(e,10),a=t-Va,i=r-Na,n=a>=0;return a===i&&n}function Md(s){if(!s||!Vr(s))return;const[e,t]=s.split(".")||[],r=`${e}.${t}.x`,i=parseInt(e,10)-Va+Na;if(i<0)return;const o=`${i}.${t}.x`;return{gridMajorMinor:r,chartsMajorMinor:o}}function qt({type:s,gridVersion:e,chartsVersion:t}){const r="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!e)return r;const a=Md(e);if(!a)return r;const{gridMajorMinor:i,chartsMajorMinor:n}=a;return s==="incompatible"?`AG Grid version ${e} and AG Charts version ${t} is not supported. AG Grid version ${i} should be used with AG Chart ${n}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:s==="invalidCharts"?`AG Grid version ${i} should be used with AG Chart ${n}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:r}function Ed({gridVersion:s,chartsVersion:e}){if(!Vr(e))return{isValid:!1,message:qt({type:"invalidCharts",gridVersion:s,chartsVersion:e})};if(!Vr(s))return{isValid:!1,message:qt({type:"invalidGrid",gridVersion:s,chartsVersion:e})};const[t,r]=s.split(".")||[],[a,i,n]=e.split(".")||[],o=xd({gridMajorVersion:t,chartsMajorVersion:a});return o&&r===i||n.includes("beta")?{isValid:!0}:!o||r!==i?{isValid:!1,message:qt({type:"incompatible",gridVersion:s,chartsVersion:e})}:{isValid:!1,message:qt({type:"invalid",gridVersion:s,chartsVersion:e})}}import{AgMenuItemComponent as wd,AgMenuList as Od,Autowired as Zt,Bean as Dd,BeanStub as kd,Component as Id,PostConstruct as Ld,RefSelector as Rd,_ as _d}from"@ag-grid-community/core";var Ie=class extends kd{showMenuList(s){const{eventSource:e,showMenu:t,chartMenuContext:r}=s,a=this.chartMenuService.doChartToolPanelsExist(r.chartController),i=this.mapWithStockItems(this.getMenuItems(r.chartController,a),r,t,e,a);if(!i.length)return;const n=this.createBean(new Jt(i));this.activeChartMenuList=n;let o=-1,l="left";this.gos.get("enableRtl")&&(o=1,l="right");const c=n.getGui();this.popupService.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:()=>{this.destroyBean(n),this.activeChartMenuList=void 0;const h=this.gos.getDocument(),d=this.gos.getActiveDomElement();(!d||d===h.body)&&e.focus({preventScroll:!0})},afterGuiAttached:h=>n.afterGuiAttached(h),positionCallback:()=>{this.popupService.positionPopupByComponent({type:"chartMenu",eventSource:e,ePopup:c,alignSide:l,nudgeX:4*o,nudgeY:4,position:"under",keepWithinBounds:!0})},ariaLabel:"Chart Menu"})}getMenuItems(s,e){const t=[...e?["chartEdit"]:[],...s.isEnterprise()?["chartAdvancedSettings"]:[],s.isChartLinked()?"chartUnlink":"chartLink","chartDownload"],r=this.gos.get("chartMenuItems");return r?Array.isArray(r)?r:r(this.gos.addGridCommonParams({defaultItems:t})):t}mapWithStockItems(s,e,t,r,a){if(!s)return[];const i=[];return s.forEach(n=>{let o;if(typeof n=="string"?o=this.getStockMenuItem(n,e,t,r,a):o=T({},n),!o)return;const{subMenu:l}=o;Array.isArray(l)&&(o.subMenu=this.mapWithStockItems(l,e,t,r,a)),i.push(o)}),i}getStockMenuItem(s,e,t,r,a){switch(s){case"chartEdit":return a?this.createMenuItem(this.chartTranslationService.translate("chartEdit"),"chartsMenuEdit",t):null;case"chartAdvancedSettings":return this.createMenuItem(this.chartTranslationService.translate("chartAdvancedSettings"),"chartsMenuAdvancedSettings",()=>this.chartMenuService.openAdvancedSettings(e,r));case"chartUnlink":return e.chartController.isChartLinked()?this.createMenuItem(this.chartTranslationService.translate("chartUnlink"),"unlinked",()=>this.chartMenuService.toggleLinked(e)):null;case"chartLink":return e.chartController.isChartLinked()?null:this.createMenuItem(this.chartTranslationService.translate("chartLink"),"linked",()=>this.chartMenuService.toggleLinked(e));case"chartDownload":return this.createMenuItem(this.chartTranslationService.translate("chartDownload"),"save",()=>this.chartMenuService.downloadChart(e))}return null}createMenuItem(s,e,t){return{name:s,icon:_d.createIconNoSpan(e,this.gos,null),action:t}}destroy(){this.destroyBean(this.activeChartMenuList),super.destroy()}};p([Zt("popupService")],Ie.prototype,"popupService",2),p([Zt("chartMenuService")],Ie.prototype,"chartMenuService",2),p([Zt("chartTranslationService")],Ie.prototype,"chartTranslationService",2),Ie=p([Dd("chartMenuListFactory")],Ie);var Jt=class extends Id{constructor(s){super(`
            <div ref="eChartsMenu" role="presentation" class="ag-menu ag-chart-menu-popup"></div>
        `),this.menuItems=s}init(){this.mainMenuList=this.createManagedBean(new Od(0)),this.mainMenuList.addMenuItems(this.menuItems),this.mainMenuList.addEventListener(wd.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.eChartsMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(){var s;(s=this.hidePopupFunc)==null||s.call(this)}afterGuiAttached({hidePopup:s}){s&&(this.hidePopupFunc=s,this.addDestroyFunc(s)),this.focusService.focusInto(this.mainMenuList.getGui())}};p([Zt("focusService")],Jt.prototype,"focusService",2),p([Rd("eChartsMenu")],Jt.prototype,"eChartsMenu",2),p([Ld],Jt.prototype,"init",1);import{AgDialog as Gd,Autowired as Nr,Bean as Fd,BeanStub as Vd,PostConstruct as Nd,TabGuardComp as Bd}from"@ag-grid-community/core";import{Component as Ud,PostConstruct as Hd}from"@ag-grid-community/core";import{Autowired as Wd,Component as zd,PostConstruct as Yd}from"@ag-grid-community/core";var Qt=class Oi extends zd{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("animation.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("animation"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultNumberInputParams("animation.duration","durationMillis",{min:0});this.setTemplate(Oi.TEMPLATE,{animationGroup:e,animationHeightInput:t})}};Qt.TEMPLATE=`<div>
            <ag-group-component ref="animationGroup">
                <ag-input-number-field ref="animationHeightInput"></ag-input>
            </ag-group-component>
        </div>`,p([Wd("chartTranslationService")],Qt.prototype,"chartTranslationService",2),p([Yd],Qt.prototype,"init",1);var Kd=Qt;import{Autowired as $d,Component as Xd,PostConstruct as jd}from"@ag-grid-community/core";var er=class Di extends Xd{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("crosshair.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("crosshair"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.label.enabled","crosshairLabel"),r=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.snap","crosshairSnap"),a=this.chartMenuParamsFactory.getDefaultColorPickerParams("crosshair.stroke","color");this.setTemplate(Di.TEMPLATE,{crosshairGroup:e,crosshairLabelCheckbox:t,crosshairSnapCheckbox:r,crosshairStrokeColorPicker:a})}};er.TEMPLATE=`<div>
            <ag-group-component ref="crosshairGroup">
                <ag-checkbox ref="crosshairLabelCheckbox"></ag-checkbox>
                <ag-checkbox ref="crosshairSnapCheckbox"></ag-checkbox>
                <ag-color-picker ref="crosshairStrokeColorPicker"></ag-color-picker>
            </ag-group-component>
        </div>`,p([$d("chartTranslationService")],er.prototype,"chartTranslationService",2),p([jd],er.prototype,"init",1);var qd=er;import{Autowired as Zd,Component as Jd,PostConstruct as Qd}from"@ag-grid-community/core";var tr=class ki extends Jd{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("navigator.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("navigator"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultSliderParams("navigator.height","height",60);t.minValue=10;const r=this.chartMenuParamsFactory.getDefaultCheckboxParams("navigator.miniChart.enabled","miniChart");this.setTemplate(ki.TEMPLATE,{navigatorGroup:e,navigatorHeightSlider:t,navigatorMiniChartCheckbox:r})}};tr.TEMPLATE=`<div>
            <ag-group-component ref="navigatorGroup">
                <ag-slider ref="navigatorHeightSlider"></ag-slider>
                <ag-checkbox ref="navigatorMiniChartCheckbox"></ag-checkbox>
            </ag-group-component>
        </div>`,p([Zd("chartTranslationService")],tr.prototype,"chartTranslationService",2),p([Qd],tr.prototype,"init",1);var eu=tr;import{Autowired as tu,Component as ru,PostConstruct as su,RefSelector as au}from"@ag-grid-community/core";var pt=class Ii extends ru{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("zoom.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("zoom"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableScrolling","scrollingZoom"),r=this.chartMenuParamsFactory.getDefaultSliderParams("zoom.scrollingStep","scrollingStep",1);r.step=.01,r.minValue=r.step;const a=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableSelecting","selectingZoom");t.onValueChange=(i=>n=>{i&&(i(n),this.zoomScrollingStepInput.setDisabled(!n))})(t.onValueChange),this.setTemplate(Ii.TEMPLATE,{zoomGroup:e,zoomScrollingCheckbox:t,zoomScrollingStepInput:r,zoomSelectingCheckbox:a}),this.zoomScrollingStepInput.setDisabled(!t.value)}};pt.TEMPLATE=`<div>
            <ag-group-component ref="zoomGroup">
                <ag-checkbox ref="zoomSelectingCheckbox"></ag-checkbox>
                <ag-checkbox ref="zoomScrollingCheckbox"></ag-checkbox>
                <ag-slider ref="zoomScrollingStepInput"></ag-slider>
            </ag-group-component>
        </div>`,p([tu("chartTranslationService")],pt.prototype,"chartTranslationService",2),p([au("zoomScrollingStepInput")],pt.prototype,"zoomScrollingStepInput",2),p([su],pt.prototype,"init",1);var iu=pt,nu=["navigator","zoom","animation","crosshair"],Br=class Li extends Ud{constructor(e){super(Li.TEMPLATE),this.chartMenuContext=e}postConstruct(){this.chartPanelFeature=this.createManagedBean(new gr(this.chartMenuContext.chartController,this.getGui(),"ag-chart-advanced-settings-section",(e,t)=>this.createPanels(e,t))),this.chartPanelFeature.refreshPanels()}createPanels(e,t){nu.forEach(r=>{if(!this.isGroupPanelShownForSeries(r,t))return;const a=this.createPanel(r);this.chartPanelFeature.addComponent(a)})}isGroupPanelShownForSeries(e,t){return e==="animation"||ye(t)}createPanel(e){const{chartMenuParamsFactory:t,chartAxisMenuParamsFactory:r}=this.chartMenuContext;switch(e){case"navigator":return new eu(t);case"zoom":return new iu(t);case"animation":return new Kd(t);case"crosshair":return new qd(r)}}};Br.TEMPLATE='<div class="ag-chart-advanced-settings-wrapper"></div>',p([Hd],Br.prototype,"postConstruct",1);var ou=Br,gt=class extends Vd{showMenu(s,e){this.hideMenu();const t=this.createBean(new lu(s));this.activeDialog=this.createBean(new Gd({title:this.chartTranslationService.translate("advancedSettings"),component:t,width:300,height:400,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var r;(r=this.focusService.findFocusableElements(t.getGui())[0])==null||r.focus()},closedCallback:()=>{this.activeMenu=this.destroyBean(this.activeMenu),this.activeDialog=void 0,e?.focus({preventScroll:!0})}})),this.activeMenu=t}hideMenu(){this.activeDialog&&this.destroyBean(this.activeDialog)}destroy(){this.activeMenu=this.destroyBean(this.activeMenu),this.activeDialog=this.destroyBean(this.activeDialog),super.destroy()}};p([Nr("focusService")],gt.prototype,"focusService",2),p([Nr("chartTranslationService")],gt.prototype,"chartTranslationService",2),gt=p([Fd("advancedSettingsMenuFactory")],gt);var rr=class Ri extends Bd{constructor(e){super(Ri.TEMPLATE),this.chartMenuContext=e}postConstruct(){this.advancedSettingsPanel=this.createManagedBean(new ou(this.chartMenuContext)),this.getGui().appendChild(this.advancedSettingsPanel.getGui()),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),focusTrapActive:!0})}onTabKeyDown(e){if(e.defaultPrevented)return;e.preventDefault();const t=e.shiftKey,r=this.advancedSettingsPanel.getGui(),a=this.focusService.findNextFocusableElement(r,!1,t);if(a)a.focus();else{const i=this.focusService.findFocusableElements(r);i.length&&i[t?i.length-1:0].focus()}}};rr.TEMPLATE='<div class="ag-chart-advanced-settings"></div>',p([Nr("focusService")],rr.prototype,"focusService",2),p([Nd],rr.prototype,"postConstruct",1);var lu=rr,cu={version:ct,validate:()=>Ed({gridVersion:ct,chartsVersion:ge.CHARTS_VERSION}),moduleName:Vi.GridChartsModule,beans:[ge,ut,me,Ie,lt,gt],agStackComponents:[{componentName:"AgColorPicker",componentClass:Rs},{componentName:"AgAngleSelect",componentClass:ks},{componentName:"AgPillSelect",componentClass:xs}],dependantModules:[Bi,Ni]},hu=0;import{time as du,AgChart as uu}from"ag-charts-community";export*from"ag-charts-community";var pu={time:du,AgChart:uu};export{cu as GridChartsModule,hu as __FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT,pu as agCharts};
