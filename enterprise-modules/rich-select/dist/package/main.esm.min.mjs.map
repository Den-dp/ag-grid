{
  "version": 3,
  "sources": ["<stdin>"],
  "sourcesContent": ["// enterprise-modules/rich-select/src/richSelectModule.ts\nimport { ModuleNames } from \"@ag-grid-community/core\";\nimport { EnterpriseCoreModule } from \"@ag-grid-enterprise/core\";\n\n// enterprise-modules/rich-select/src/richSelect/richSelectCellEditor.ts\nimport {\n  AgRichSelect,\n  Events,\n  PopupComponent,\n  _\n} from \"@ag-grid-community/core\";\nvar RichSelectCellEditor = class extends PopupComponent {\n  constructor() {\n    super(\n      /* html */\n      `<div class=\"ag-cell-edit-wrapper\"></div>`\n    );\n  }\n  init(params) {\n    this.params = params;\n    const { cellStartedEdit, cellHeight, values } = params;\n    if (_.missing(values)) {\n      console.warn(\"AG Grid: agRichSelectCellEditor requires cellEditorParams.values to be set\");\n    }\n    const { params: richSelectParams, valuesPromise } = this.buildRichSelectParams();\n    this.richSelect = this.createManagedBean(new AgRichSelect(richSelectParams));\n    this.richSelect.addCssClass(\"ag-cell-editor\");\n    this.appendChild(this.richSelect);\n    if (valuesPromise) {\n      valuesPromise.then((values2) => {\n        this.richSelect.setValueList({ valueList: values2, refresh: true });\n        const searchStringCallback = this.getSearchStringCallback(values2);\n        if (searchStringCallback) {\n          this.richSelect.setSearchStringCreator(searchStringCallback);\n        }\n      });\n    }\n    this.addManagedListener(this.richSelect, Events.EVENT_FIELD_PICKER_VALUE_SELECTED, this.onEditorPickerValueSelected.bind(this));\n    this.addManagedListener(this.richSelect.getGui(), \"focusout\", this.onEditorFocusOut.bind(this));\n    this.focusAfterAttached = cellStartedEdit;\n    if (_.exists(cellHeight)) {\n      this.richSelect.setRowHeight(cellHeight);\n    }\n  }\n  onEditorPickerValueSelected(e) {\n    this.params.stopEditing(!e.fromEnterKey);\n  }\n  onEditorFocusOut(e) {\n    if (this.richSelect.getGui().contains(e.relatedTarget)) {\n      return;\n    }\n    this.params.stopEditing(true);\n  }\n  buildRichSelectParams() {\n    const {\n      cellRenderer,\n      value,\n      values,\n      formatValue,\n      searchDebounceDelay,\n      valueListGap,\n      valueListMaxHeight,\n      valueListMaxWidth,\n      allowTyping,\n      filterList,\n      searchType,\n      highlightMatch,\n      valuePlaceholder,\n      eventKey\n    } = this.params;\n    const ret = {\n      value,\n      cellRenderer,\n      searchDebounceDelay,\n      valueFormatter: formatValue,\n      pickerAriaLabelKey: \"ariaLabelRichSelectField\",\n      pickerAriaLabelValue: \"Rich Select Field\",\n      pickerType: \"virtual-list\",\n      pickerGap: valueListGap,\n      allowTyping,\n      filterList,\n      searchType,\n      highlightMatch,\n      maxPickerHeight: valueListMaxHeight,\n      maxPickerWidth: valueListMaxWidth,\n      placeholder: valuePlaceholder,\n      initialInputValue: (eventKey == null ? void 0 : eventKey.length) === 1 ? eventKey : void 0\n    };\n    let valuesResult;\n    let valuesPromise;\n    if (typeof values === \"function\") {\n      valuesResult = values(this.params);\n    } else {\n      valuesResult = values != null ? values : [];\n    }\n    if (Array.isArray(valuesResult)) {\n      ret.valueList = valuesResult;\n      ret.searchStringCreator = this.getSearchStringCallback(valuesResult);\n    } else {\n      valuesPromise = valuesResult;\n    }\n    return { params: ret, valuesPromise };\n  }\n  getSearchStringCallback(values) {\n    const { colDef } = this.params;\n    if (typeof values[0] !== \"object\" || !colDef.keyCreator) {\n      return;\n    }\n    return (values2) => values2.map((value) => {\n      const keyParams = this.gos.addGridCommonParams({\n        value,\n        colDef: this.params.colDef,\n        column: this.params.column,\n        node: this.params.node,\n        data: this.params.data\n      });\n      return colDef.keyCreator(keyParams);\n    });\n  }\n  // we need to have the gui attached before we can draw the virtual rows, as the\n  // virtual row logic needs info about the gui state\n  afterGuiAttached() {\n    const { focusAfterAttached, params } = this;\n    setTimeout(() => {\n      if (!this.isAlive()) {\n        return;\n      }\n      if (focusAfterAttached) {\n        const focusableEl = this.richSelect.getFocusableElement();\n        focusableEl.focus();\n        const { allowTyping, eventKey: eventKey2 } = this.params;\n        if (allowTyping && (!eventKey2 || eventKey2.length !== 1)) {\n          focusableEl.select();\n        }\n      }\n      this.richSelect.showPicker();\n      const { eventKey } = params;\n      if (eventKey) {\n        if ((eventKey == null ? void 0 : eventKey.length) === 1) {\n          this.richSelect.searchTextFromString(eventKey);\n        }\n      }\n    });\n  }\n  getValue() {\n    return this.richSelect.getValue();\n  }\n  isPopup() {\n    return false;\n  }\n};\n\n// enterprise-modules/rich-select/src/version.ts\nvar VERSION = \"31.3.4\";\n\n// enterprise-modules/rich-select/src/richSelectModule.ts\nvar RichSelectModule = {\n  version: VERSION,\n  moduleName: ModuleNames.RichSelectModule,\n  beans: [],\n  userComponents: [\n    { componentName: \"agRichSelect\", componentClass: RichSelectCellEditor },\n    { componentName: \"agRichSelectCellEditor\", componentClass: RichSelectCellEditor }\n  ],\n  dependantModules: [\n    EnterpriseCoreModule\n  ]\n};\nexport {\n  RichSelectModule\n};\n"],
  "mappings": "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",
  "names": ["ModuleNames", "EnterpriseCoreModule", "AgRichSelect", "Events", "PopupComponent", "_", "RichSelectCellEditor", "params", "cellStartedEdit", "cellHeight", "values", "richSelectParams", "valuesPromise", "values2", "searchStringCallback", "e", "cellRenderer", "value", "formatValue", "searchDebounceDelay", "valueListGap", "valueListMaxHeight", "valueListMaxWidth", "allowTyping", "filterList", "searchType", "highlightMatch", "valuePlaceholder", "eventKey", "ret", "valuesResult", "colDef", "keyParams", "focusAfterAttached", "focusableEl", "eventKey2", "VERSION", "RichSelectModule"]
}
