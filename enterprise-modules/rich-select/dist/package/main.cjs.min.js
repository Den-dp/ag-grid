var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(e,r)=>{for(var t in r)__defProp(e,t,{get:r[t],enumerable:!0})},__copyProps=(e,r,t,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of __getOwnPropNames(r))!__hasOwnProp.call(e,i)&&i!==t&&__defProp(e,i,{get:()=>r[i],enumerable:!(a=__getOwnPropDesc(r,i))||a.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),main_exports={};__export(main_exports,{RichSelectModule:()=>RichSelectModule}),module.exports=__toCommonJS(main_exports);var import_core2=require("@ag-grid-community/core"),import_core3=require("@ag-grid-enterprise/core"),import_core=require("@ag-grid-community/core"),RichSelectCellEditor=class extends import_core.PopupComponent{constructor(){super('<div class="ag-cell-edit-wrapper"></div>')}init(e){this.params=e;const{cellStartedEdit:r,cellHeight:t,values:a}=e;import_core._.missing(a)&&console.warn("AG Grid: agRichSelectCellEditor requires cellEditorParams.values to be set");const{params:i,valuesPromise:s}=this.buildRichSelectParams();this.richSelect=this.createManagedBean(new import_core.AgRichSelect(i)),this.richSelect.addCssClass("ag-cell-editor"),this.appendChild(this.richSelect),s&&s.then(l=>{this.richSelect.setValueList({valueList:l,refresh:!0});const o=this.getSearchStringCallback(l);o&&this.richSelect.setSearchStringCreator(o)}),this.addManagedListener(this.richSelect,import_core.Events.EVENT_FIELD_PICKER_VALUE_SELECTED,this.onEditorPickerValueSelected.bind(this)),this.addManagedListener(this.richSelect.getGui(),"focusout",this.onEditorFocusOut.bind(this)),this.focusAfterAttached=r,import_core._.exists(t)&&this.richSelect.setRowHeight(t)}onEditorPickerValueSelected(e){this.params.stopEditing(!e.fromEnterKey)}onEditorFocusOut(e){this.richSelect.getGui().contains(e.relatedTarget)||this.params.stopEditing(!0)}buildRichSelectParams(){const{cellRenderer:e,value:r,values:t,formatValue:a,searchDebounceDelay:i,valueListGap:s,valueListMaxHeight:l,valueListMaxWidth:o,allowTyping:d,filterList:p,searchType:m,highlightMatch:g,valuePlaceholder:S,eventKey:n}=this.params,h={value:r,cellRenderer:e,searchDebounceDelay:i,valueFormatter:a,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:s,allowTyping:d,filterList:p,searchType:m,highlightMatch:g,maxPickerHeight:l,maxPickerWidth:o,placeholder:S,initialInputValue:n?.length===1?n:void 0};let c,u;return typeof t=="function"?c=t(this.params):c=t??[],Array.isArray(c)?(h.valueList=c,h.searchStringCreator=this.getSearchStringCallback(c)):u=c,{params:h,valuesPromise:u}}getSearchStringCallback(e){const{colDef:r}=this.params;if(!(typeof e[0]!="object"||!r.keyCreator))return t=>t.map(a=>{const i=this.gos.addGridCommonParams({value:a,colDef:this.params.colDef,column:this.params.column,node:this.params.node,data:this.params.data});return r.keyCreator(i)})}afterGuiAttached(){const{focusAfterAttached:e,params:r}=this;setTimeout(()=>{if(!this.isAlive())return;if(e){const a=this.richSelect.getFocusableElement();a.focus();const{allowTyping:i,eventKey:s}=this.params;i&&(!s||s.length!==1)&&a.select()}this.richSelect.showPicker();const{eventKey:t}=r;t&&t?.length===1&&this.richSelect.searchTextFromString(t)})}getValue(){return this.richSelect.getValue()}isPopup(){return!1}},VERSION="31.3.2",RichSelectModule={version:VERSION,moduleName:import_core2.ModuleNames.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:RichSelectCellEditor},{componentName:"agRichSelectCellEditor",componentClass:RichSelectCellEditor}],dependantModules:[import_core3.EnterpriseCoreModule]};
