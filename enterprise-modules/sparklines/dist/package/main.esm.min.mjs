var it=Object.defineProperty,Mt=Object.getOwnPropertyDescriptor,st=Object.getOwnPropertySymbols,Tt=Object.prototype.hasOwnProperty,At=Object.prototype.propertyIsEnumerable,nt=(i,t,e)=>t in i?it(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,Ot=(i,t)=>{for(var e in t||(t={}))Tt.call(t,e)&&nt(i,e,t[e]);if(st)for(var e of st(t))At.call(t,e)&&nt(i,e,t[e]);return i},R=(i,t,e,n)=>{for(var s=n>1?void 0:n?Mt(t,e):t,a=i.length-1,r;a>=0;a--)(r=i[a])&&(s=(n?r(t,e,s):r(s))||s);return n&&s&&it(t,e,s),s};import{ModuleNames as Ft}from"@ag-grid-community/core";import{EnterpriseCoreModule as Rt}from"@ag-grid-enterprise/core";import{Autowired as at,Component as Pt,RefSelector as It}from"@ag-grid-community/core";import{_Scale as Xt,_Scene as A,_Util as Et}from"ag-charts-community";import{_Scale as Gt,_Scene as rt,_Util as Bt}from"ag-charts-community";var Yt=`
.ag-sparkline-tooltip-wrapper {
    position: absolute;
    user-select: none;
    pointer-events: none;
}

.ag-sparkline-tooltip {
    position: relative;
    font: 12px arial,sans-serif;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);
    line-height: 1.7em;
    overflow: hidden;
    white-space: nowrap;
    z-index: 99999;
    background-color: rgb(255, 255, 255);
    color: rgba(0,0,0, 0.67);
}

.ag-sparkline-tooltip-content {
    padding: 0 7px;
    opacity: 1;
}

.ag-sparkline-tooltip-title {
    padding-left: 7px;
    opacity: 1;
}

.ag-sparkline-tooltip-wrapper-hidden {
    top: -10000px !important;
}

.ag-sparkline-wrapper {
    box-sizing: border-box;
    overflow: hidden;
}
`,{extent:Vt,isNumber:G,isString:$t,isStringObject:Ht,isDate:ot,createId:Ut,Padding:jt}=Bt,{LinearScale:Q,BandScale:qt,TimeScale:lt}=Gt,Kt=class{constructor(){this.type="category",this.stroke="rgb(204, 214, 235)",this.strokeWidth=1}},ht=class et{constructor(){this.id=Ut(this),this.seriesRect={x:0,y:0,width:0,height:0},this._context=void 0,this._container=void 0,this._data=void 0,this.padding=new jt(3),this.xKey="x",this.yKey="y",this.dataType=void 0,this.xData=[],this.yData=[],this.min=void 0,this.max=void 0,this.yScale=new Q,this.axis=new Kt,this.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},this._width=100,this._height=100,this.smallestInterval=void 0,this.layoutId=0,this.defaultDateFormatter=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),this._onMouseMove=this.onMouseMove.bind(this),this._onMouseOut=this.onMouseOut.bind(this);const t=new rt.Group;this.rootGroup=t;const e=document.createElement("div");e.setAttribute("class","ag-sparkline-wrapper");const n=new rt.Scene({});this.scene=n,this.canvasElement=n.canvas.element,n.setRoot(t),n.setContainer(e),this.resizeAndSetDimensions(this.width,this.height),et.tooltipDocuments.includes(document)||this.initialiseTooltipStyles(),this.setupDomEventListeners(this.canvasElement)}set context(t){this._context!==t&&(this._context=t)}get context(){return this._context}set container(t){if(this._container!==t){const{parentNode:e}=this.canvasElement;e?.removeChild(this.canvasElement),t&&t.appendChild(this.canvasElement),this._container=t}}get container(){return this._container}set data(t){this._data!==t&&(this._data=t,this.processData(),this.mouseMoveEvent&&this.highlightedDatum&&this.updateHitPoint(this.mouseMoveEvent))}get data(){return this._data}resizeAndSetDimensions(t,e){this.scene.resize(t,e),this.seriesRect.width=t,this.seriesRect.height=e}initialiseTooltipStyles(){const t=document.createElement("style");t.innerHTML=Yt,document.head.insertBefore(t,document.head.querySelector("style")),et.tooltipDocuments.push(document)}set width(t){this._width!==t&&(this._width=t,this.scene.resize(t,this.height),this.scheduleLayout())}get width(){return this._width}set height(t){this._height!==t&&(this._height=t,this.scene.resize(this.width,t),this.scheduleLayout())}get height(){return this._height}update(){}updateYScale(){this.updateYScaleRange(),this.updateYScaleDomain()}updateYScaleDomain(){}updateYScaleRange(){const{yScale:t,seriesRect:e}=this;t.range=[e.height,0]}updateXScale(){const{type:t}=this.axis;this.xScale=this.getXScale(t),this.updateXScaleRange(),this.updateXScaleDomain()}updateXScaleRange(){this.xScale.range=[0,this.seriesRect.width]}updateXScaleDomain(){const{xData:t,xScale:e}=this;let n;(e instanceof Q||e instanceof lt)&&(n=Vt(t)),this.xScale.domain=n?n.slice():t}getXScale(t="category"){switch(t){case"number":return new Q;case"time":return new lt;case"category":default:return new qt}}updateAxisLine(){}updateAxes(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()}updateCrosshairs(){this.updateXCrosshairLine(),this.updateYCrosshairLine()}generateNodeData(){return[]}getNodeData(){return[]}updateNodes(){}updateXCrosshairLine(){}updateYCrosshairLine(){}highlightDatum(t){this.updateNodes()}dehighlightDatum(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()}onMouseMove(t){this.mouseMoveEvent=t,this.updateHitPoint(t)}updateHitPoint(t){var e,n,s;const a=this.pickClosestSeriesNodeDatum(t.offsetX,t.offsetY);if(!a)return;const r=this.highlightedDatum;this.highlightedDatum=a,(this.highlightedDatum&&!r||this.highlightedDatum&&r&&this.highlightedDatum!==r)&&(this.highlightDatum(a),this.updateCrosshairs(),this.scene.render().catch(o=>console.error("AG Grid - chart rendering failed",o))),((s=(n=(e=this.processedOptions)==null?void 0:e.tooltip)==null?void 0:n.enabled)!=null?s:!0)&&this.handleTooltip(t,a)}onMouseOut(t){this.dehighlightDatum(),this.tooltip.toggle(!1),this.scene.render().catch(e=>console.error("AG Grid - chart rendering failed",e))}processData(){const{data:t,yData:e,xData:n}=this;if(!t||this.invalidData(this.data))return;e.length=0,n.length=0;const s=t.length,a=this.getDataType(t);this.dataType=a;const{type:r}=this.axis,h=r!=="number"&&r!=="time"?"category":r,o=h==="number"||h==="time",l=(d,p)=>{this.smallestInterval==null&&(this.smallestInterval={x:1/0,y:1/0});const{x:y}=this.smallestInterval,f=Math.abs(d-p);f>0&&f<y&&(this.smallestInterval.x=f)};let c;if(a==="number")for(let d=0;d<s;d++){const p=d,y=t[d],f=this.getDatum(p,h),g=this.getDatum(y,"number");o&&l(f,c),n.push(f),e.push(g),c=f}else if(a==="array")for(let d=0;d<s;d++){const p=t[d];if(Array.isArray(p)){const y=p[0],f=p[1],g=this.getDatum(y,h),m=this.getDatum(f,"number");if(g==null)continue;o&&l(g,c),n.push(g),e.push(m),c=g}}else if(a==="object"){const{yKey:d,xKey:p}=this;for(let y=0;y<s;y++){const f=t[y];if(typeof f=="object"&&!Array.isArray(f)){const g=f[p],m=f[d],x=this.getDatum(g,h),v=this.getDatum(m,"number");if(x==null)continue;o&&l(x,c),n.push(x),e.push(v),c=x}}}this.updateAxes(),this.immediateLayout()}getDataType(t){for(const e of t)if(e!=null){if(G(e))return"number";if(Array.isArray(e))return"array";if(typeof e=="object")return"object"}}getDatum(t,e){if(e==="number"&&G(t)||e==="time"&&(G(t)||ot(t)))return t;if(e==="category"){if($t(t)||ot(t)||G(t))return{toString:()=>String(t)};if(Ht(t))return t}}get layoutScheduled(){return!!this.layoutId}scheduleLayout(){this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame(()=>{this.immediateLayout(),this.layoutId=0})}immediateLayout(){this.setSparklineDimensions(),!this.invalidData(this.data)&&(this.updateXScaleRange(),this.updateYScaleRange(),this.updateAxisLine(),this.update(),this.scene.render().catch(t=>console.error("AG Grid - chart rendering failed",t)))}setSparklineDimensions(){const{width:t,height:e,padding:n,seriesRect:s,rootGroup:a}=this,r=t-n.left-n.right,h=e-n.top-n.bottom;s.width=r,s.height=h,s.x=n.left,s.y=n.top,a.translationX=s.x,a.translationY=s.y}pickClosestSeriesNodeDatum(t,e){let n=1/0,s;const a=this.rootGroup.transformPoint(t,e),r=this.getNodeData();for(let h=0;h<r.length;h++){const o=r[h];if(!o.point)return;const l=this.getDistance(a,o.point);l<=n&&(n=l,s=o)}return s}getDistance(t,e){return Math.abs(t.x-e.x)}handleTooltip(t,e){var n,s;const{seriesDatum:a}=e,{canvasElement:r}=this,{clientX:h,clientY:o}=t,l=(n=this.processedOptions)==null?void 0:n.tooltip,c={pageX:h,pageY:o,position:{xOffset:l?.xOffset,yOffset:l?.yOffset},container:l?.container};c.container==null&&(c.container=r);const d=a.y,p=a.x;let y=(s=l?.enabled)!=null?s:!0;const f=l?.renderer;if(f){const m=f({context:this.context,datum:a,yValue:d,xValue:p});y=typeof m!="string"&&m.enabled!==void 0?m.enabled:y}const g=y&&a.y!==void 0&&this.getTooltipHtml(e);g&&this.tooltip.show(c,g)}formatNumericDatum(t){return String(Math.round(t*10)/10)}formatDatum(t){const e=this.axis.type||"category";return e==="number"&&typeof t=="number"?this.formatNumericDatum(t):e==="time"&&(t instanceof Date||G(t))?this.defaultDateFormatter.format(t):String(t)}setupDomEventListeners(t){t.addEventListener("mousemove",this._onMouseMove),t.addEventListener("mouseout",this._onMouseOut)}cleanupDomEventListeners(t){t.removeEventListener("mousemove",this._onMouseMove),t.removeEventListener("mouseout",this._onMouseOut)}invalidData(t){return!t||!Array.isArray(t)}destroy(){this.cleanupDomEventListeners(this.canvasElement),this.scene.destroy(),this.container=void 0}};ht.tooltipDocuments=[];var tt=ht;function P(i,t){var e,n,s;if(typeof i=="string")return i;t=t??{};const{content:a=(e=t.content)!=null?e:"",title:r=(n=t.title)!=null?n:void 0,color:h=t.color,backgroundColor:o=t.backgroundColor,opacity:l=(s=t.opacity)!=null?s:1}=i;let c,d;h?(c=r?`<span class="${I.class}-title"; style="color: ${h}">${r}</span>`:"",d=`<span class="${I.class}-content" style="color: ${h}">${a}</span>`):(c=r?`<span class="${I.class}-title">${r}</span>`:"",d=`<span class="${I.class}-content">${a}</span>`);let p=`opacity: ${l}`;return o&&(p+=`; background-color: ${o.toLowerCase()}`),`<div class="${I.class}" style="${p}">
                ${c}
                ${d}
            </div>`}var ct=class V{constructor(){this.element=document.createElement("div"),document.body.appendChild(this.element)}isVisible(){const{element:t}=this;if(t.classList)return!t.classList.contains(`${V.class}-wrapper-hidden`);const e=t.getAttribute("class");return e?e.split(" ").indexOf(`${V.class}-wrapper-hidden`)<0:!1}updateClass(t){const e=[`${V.class}-wrapper`];t!==!0&&e.push(`${V.class}-wrapper-hidden`),this.element.setAttribute("class",e.join(" "))}show(t,e){var n,s,a,r;this.toggle(!1);const{element:h}=this;if(e!==void 0)h.innerHTML=e;else if(!h.innerHTML)return;const o=(s=(n=t.position)==null?void 0:n.xOffset)!=null?s:10,l=(r=(a=t.position)==null?void 0:a.yOffset)!=null?r:0;let c=t.pageX+o,d=t.pageY+l;const p=h.getBoundingClientRect();let y=window.innerWidth-p.width;if(t.container){const f=t.container.getBoundingClientRect();y=f.left+(f.width-p.width)}c>y&&(c=t.pageX-h.clientWidth-o),typeof scrollX<"u"&&(c+=scrollX),typeof scrollY<"u"&&(d+=scrollY),h.style.left=`${Math.round(c)}px`,h.style.top=`${Math.round(d)}px`,this.toggle(!0)}toggle(t){this.updateClass(t)}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element)}};ct.class="ag-sparkline-tooltip";var I=ct;import{_Scene as $}from"ag-charts-community";function dt(i){switch(i){case"circle":return $.Circle;case"square":return $.Square;case"diamond":return $.Diamond;default:return $.Circle}}function H(i,t="solid"){const e={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},n={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return i==="round"||i==="square"?n[t]==null?(console.warn(`'${t}' is not a valid 'lineDash' option.`),n.solid):n[t]:e[t]==null?(console.warn(`'${t}' is not a valid 'lineDash' option.`),e.solid):e[t]}var{extent:Zt}=Et,{BandScale:Jt}=Xt,Qt=class{constructor(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}},te=class{constructor(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}},ee=class{constructor(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}},ut=class extends tt{constructor(){super(),this.fill="rgba(124, 181, 236, 0.25)",this.strokePath=new A.Path,this.fillPath=new A.Path,this.xCrosshairLine=new A.Line,this.yCrosshairLine=new A.Line,this.areaSparklineGroup=new A.Group,this.xAxisLine=new A.Line,this.markers=new A.Group,this.markerSelection=A.Selection.select(this.markers,()=>this.markerFactory()),this.markerSelectionData=[],this.marker=new Qt,this.line=new te,this.crosshairs=new ee,this.rootGroup.append(this.areaSparklineGroup),this.xAxisLine.zIndex=500,this.fillPath.zIndex=50,this.strokePath.zIndex=1e3,this.xCrosshairLine.zIndex=2e3,this.yCrosshairLine.zIndex=2e3,this.markers.zIndex=2500,this.areaSparklineGroup.append([this.fillPath,this.xAxisLine,this.strokePath,this.xCrosshairLine,this.yCrosshairLine,this.markers])}markerFactory(){const{shape:i}=this.marker,t=dt(i);return new t}getNodeData(){return this.markerSelectionData}update(){const i=this.generateNodeData();if(!i)return;const{nodeData:t,fillData:e,strokeData:n}=i;this.markerSelectionData=t,this.updateSelection(t),this.updateNodes(),this.updateStroke(n),this.updateFill(e)}updateYScaleDomain(){const{yData:i,yScale:t}=this,e=Zt(i);let n=0,s=1;e!==void 0&&(n=this.min=e[0],s=this.max=e[1]),n=n<0?n:0,s=s<0?0:s,t.domain=[n,s]}generateNodeData(){const{data:i,yData:t,xData:e,xScale:n,yScale:s}=this;if(!i)return;const a=!(n instanceof Jt),r=a?0:n.bandwidth/2,h=t.length,o=[],l=[],c=[];let d,p,y,f;const g=s.convert(0);for(let m=0;m<h;m++){const x=t[m],v=e[m],k=n.convert(a?n.toDomain(v):v)+r,L=x===void 0?NaN:s.convert(x);m+1<h&&(f=n.convert(a?n.toDomain(e[m+1]):e[m+1])+r),c.push({seriesDatum:{x:v,y:x},point:{x:k,y:L}}),x===void 0&&y!==void 0?(l.push({seriesDatum:void 0,point:{x:y,y:g}}),f!==void 0&&l.push({seriesDatum:void 0,point:{x:f,y:g}})):x!==void 0&&(l.push({seriesDatum:{x:v,y:x},point:{x:k,y:L}}),o.push({seriesDatum:{x:v,y:x},point:{x:k,y:L}}),d=d!==void 0?d:k,p=k),y=k}return l.push({seriesDatum:void 0,point:{x:p,y:g}},{seriesDatum:void 0,point:{x:d,y:g}}),{nodeData:o,fillData:l,strokeData:c}}updateAxisLine(){const{xScale:i,yScale:t,axis:e,xAxisLine:n}=this;n.x1=i.range[0],n.x2=i.range[1],n.y1=n.y2=0,n.stroke=e.stroke,n.strokeWidth=e.strokeWidth;const s=t.convert(0);n.translationY=s}updateSelection(i){this.markerSelection.update(i)}updateNodes(){const{highlightedDatum:i,highlightStyle:t,marker:e}=this,{size:n,fill:s,stroke:a,strokeWidth:r}=t,h=e.formatter;this.markerSelection.each((o,l,c)=>{const{point:d,seriesDatum:p}=l;if(!d)return;const y=l===i,f=y&&s!==void 0?s:e.fill,g=y&&a!==void 0?a:e.stroke,m=y&&r!==void 0?r:e.strokeWidth,x=y&&n!==void 0?n:e.size;let v;if(h){const k=c===0,L=c===this.markerSelectionData.length-1,S=p.y===this.min,w=p.y===this.max;v=h({datum:l,xValue:p.x,yValue:p.y,min:S,max:w,first:k,last:L,fill:f,stroke:g,strokeWidth:m,size:x,highlighted:y})}o.size=v&&v.size!=null?v.size:x,o.fill=v&&v.fill!=null?v.fill:f,o.stroke=v&&v.stroke!=null?v.stroke:g,o.strokeWidth=v&&v.strokeWidth!=null?v.strokeWidth:m,o.translationX=d.x,o.translationY=d.y,o.visible=v&&v.enabled!=null?v.enabled:e.enabled&&o.size>0})}updateStroke(i){const{strokePath:t,yData:e,line:n}=this,s=t.path;if(s.clear(),e.length<2)return;const a=i.length;let r=!0;for(let h=0;h<a;h++){const{point:o,seriesDatum:l}=i[h],c=o.x,d=o.y;l.y==null?r=!0:r?(s.moveTo(c,d),r=!1):s.lineTo(c,d)}t.lineJoin=t.lineCap="round",t.fill=void 0,t.stroke=n.stroke,t.strokeWidth=n.strokeWidth}updateFill(i){const{fillPath:t,yData:e,fill:n}=this,s=t.path,a=i.length;if(s.clear(),!(e.length<2)){for(let r=0;r<a;r++){const{point:h}=i[r],o=h.x,l=h.y;r>0?s.lineTo(o,l):s.moveTo(o,l)}s.closePath(),t.lineJoin="round",t.stroke=void 0,t.fill=n}}updateXCrosshairLine(){var i;const{yScale:t,xCrosshairLine:e,highlightedDatum:n,crosshairs:{xLine:s}}=this;if(!s.enabled||n==null){e.strokeWidth=0;return}e.y1=t.range[0],e.y2=t.range[1],e.x1=e.x2=0,e.stroke=s.stroke,e.strokeWidth=(i=s.strokeWidth)!=null?i:1,e.lineCap=s.lineCap==="round"||s.lineCap==="square"?s.lineCap:void 0;const{lineDash:a}=s;e.lineDash=Array.isArray(a)?a:H(e.lineCap,s.lineDash),e.translationX=n.point.x}updateYCrosshairLine(){var i;const{xScale:t,yCrosshairLine:e,highlightedDatum:n,crosshairs:{yLine:s}}=this;if(!s.enabled||n==null){e.strokeWidth=0;return}e.x1=t.range[0],e.x2=t.range[1],e.y1=e.y2=0,e.stroke=s.stroke,e.strokeWidth=(i=s.strokeWidth)!=null?i:1,e.lineCap=s.lineCap==="round"||s.lineCap==="square"?s.lineCap:void 0;const{lineDash:a}=s;e.lineDash=Array.isArray(a)?a:H(e.lineCap,s.lineDash),e.translationY=n.point.y}getTooltipHtml(i){var t,e;const{dataType:n}=this,{seriesDatum:s}=i,a=s.y,r=s.x,h=this.formatNumericDatum(a),o=n==="array"||n==="object"?this.formatDatum(r):void 0,l={content:h,title:o},c=(e=(t=this.processedOptions)==null?void 0:t.tooltip)==null?void 0:e.renderer;return c?P(c({context:this.context,datum:s,yValue:a,xValue:r}),l):P(l)}};ut.className="AreaSparkline";import{_Scale as ie,_Scene as X,_Util as se}from"ag-charts-community";var{extent:ne}=se,{BandScale:mt}=ie,ae=class{constructor(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}},re=class{constructor(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}},oe=class{constructor(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}},pt=class extends tt{constructor(){super(),this.linePath=new X.Path,this.xCrosshairLine=new X.Line,this.yCrosshairLine=new X.Line,this.lineSparklineGroup=new X.Group,this.markers=new X.Group,this.markerSelection=X.Selection.select(this.markers,()=>this.markerFactory()),this.markerSelectionData=[],this.marker=new ae,this.line=new re,this.crosshairs=new oe,this.rootGroup.append(this.lineSparklineGroup),this.linePath.zIndex=1e3,this.xCrosshairLine.zIndex=2e3,this.yCrosshairLine.zIndex=2e3,this.markers.zIndex=2500,this.lineSparklineGroup.append([this.linePath,this.xCrosshairLine,this.yCrosshairLine,this.markers])}getNodeData(){return this.markerSelectionData}markerFactory(){const{shape:i}=this.marker,t=dt(i);return new t}onMarkerShapeChange(){this.markerSelection=this.markerSelection.clear(),this.scheduleLayout()}update(){const i=this.generateNodeData();i&&(this.markerSelectionData=i,this.updateSelection(i),this.updateNodes(),this.updateLine())}updateYScaleDomain(){const{yData:i,yScale:t}=this,e=ne(i);let n=0,s=1;if(e!==void 0&&(n=this.min=e[0],s=this.max=e[1]),n===s){const a=Math.abs(n*.01);n-=a,s+=a}t.domain=[n,s]}generateNodeData(){const{data:i,yData:t,xData:e,xScale:n,yScale:s}=this;if(!i)return;const a=!(n instanceof mt),r=a?0:n.bandwidth/2,h=[];for(let o=0;o<t.length;o++){const l=t[o],c=e[o];if(l==null)continue;const d=n.convert(a?n.toDomain(c):c)+r,p=l===void 0?NaN:s.convert(l);h.push({seriesDatum:{x:c,y:l},point:{x:d,y:p}})}return h}updateSelection(i){this.markerSelection.update(i)}updateNodes(){const{highlightedDatum:i,highlightStyle:t,marker:e}=this,{size:n,fill:s,stroke:a,strokeWidth:r}=t,h=e.formatter;this.markerSelection.each((o,l,c)=>{const d=l===i,p=d&&s!==void 0?s:e.fill,y=d&&a!==void 0?a:e.stroke,f=d&&r!==void 0?r:e.strokeWidth,g=d&&n!==void 0?n:e.size;let m;const{seriesDatum:x,point:v}=l;if(h){const k=c===0,L=c===this.markerSelectionData.length-1,S=x.y===this.min,w=x.y===this.max;m=h({datum:l,xValue:x.x,yValue:x.y,min:S,max:w,first:k,last:L,fill:p,stroke:y,strokeWidth:f,size:g,highlighted:d})}o.size=m&&m.size!=null?m.size:g,o.fill=m&&m.fill!=null?m.fill:p,o.stroke=m&&m.stroke!=null?m.stroke:y,o.strokeWidth=m&&m.strokeWidth!=null?m.strokeWidth:f,o.translationX=v.x,o.translationY=v.y,o.visible=m&&m.enabled!=null?m.enabled:e.enabled&&o.size>0})}updateLine(){const{linePath:i,yData:t,xData:e,xScale:n,yScale:s,line:a}=this,r=i.path;if(r.clear(),t.length<2)return;const h=!(n instanceof mt),o=t.length,l=h?0:n.bandwidth/2;let c=!0;for(let d=0;d<o;d++){const p=e[d],y=t[d],f=n.convert(h?n.toDomain(p):p)+l,g=y===void 0?NaN:s.convert(y);y==null?c=!0:c?(r.moveTo(f,g),c=!1):r.lineTo(f,g)}i.fill=void 0,i.stroke=a.stroke,i.strokeWidth=a.strokeWidth}updateXCrosshairLine(){var i;const{yScale:t,xCrosshairLine:e,highlightedDatum:n,crosshairs:{xLine:s}}=this;if(!s.enabled||n==null){e.strokeWidth=0;return}e.y1=t.range[0],e.y2=t.range[1],e.x1=e.x2=0,e.stroke=s.stroke,e.strokeWidth=(i=s.strokeWidth)!=null?i:1,e.lineCap=s.lineCap==="round"||s.lineCap==="square"?s.lineCap:void 0;const{lineDash:a}=s;e.lineDash=Array.isArray(a)?a:H(e.lineCap,s.lineDash),e.translationX=n.point.x}updateYCrosshairLine(){var i;const{xScale:t,yCrosshairLine:e,highlightedDatum:n,crosshairs:{yLine:s}}=this;if(!s.enabled||n==null){e.strokeWidth=0;return}e.x1=t.range[0],e.x2=t.range[1],e.y1=e.y2=0,e.stroke=s.stroke,e.strokeWidth=(i=s.strokeWidth)!=null?i:1,e.lineCap=s.lineCap==="round"||s.lineCap==="square"?s.lineCap:void 0;const{lineDash:a}=s;e.lineDash=Array.isArray(a)?a:H(e.lineCap,s.lineDash),e.translationY=n.point.y}getTooltipHtml(i){var t,e;const{dataType:n}=this,{seriesDatum:s}=i,a=s.y,r=s.x,h=this.formatNumericDatum(a),o=n==="array"||n==="object"?this.formatDatum(r):void 0,l={content:h,title:o},c=(e=(t=this.processedOptions)==null?void 0:t.tooltip)==null?void 0:e.renderer;return c?P(c({context:this.context,datum:s,yValue:a,xValue:r}),l):P(l)}};pt.className="LineSparkline";import{_Scale as le,_Scene as he,_Util as ce}from"ag-charts-community";import{_Scene as T,_Util as de}from"ag-charts-community";var ue=class{constructor(){this.enabled=!0,this.fontSize=8,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}},{extent:me}=de,pe=class extends ue{constructor(){super(...arguments),this.formatter=void 0,this.placement="insideEnd"}},ft=class extends tt{constructor(){super(),this.fill="rgb(124, 181, 236)",this.stroke="silver",this.strokeWidth=0,this.paddingInner=.1,this.paddingOuter=.2,this.valueAxisDomain=void 0,this.formatter=void 0,this.axisLine=new T.Line,this.bandWidth=0,this.sparklineGroup=new T.Group,this.rectGroup=new T.Group,this.labelGroup=new T.Group,this.rectSelection=T.Selection.select(this.rectGroup,T.Rect),this.labelSelection=T.Selection.select(this.labelGroup,T.Text),this.nodeSelectionData=[],this.label=new pe,this.rootGroup.append(this.sparklineGroup),this.rectGroup.zIndex=50,this.axisLine.zIndex=500,this.labelGroup.zIndex=1500,this.sparklineGroup.append([this.rectGroup,this.axisLine,this.labelGroup]),this.axisLine.lineCap="round",this.label.enabled=!1}getNodeData(){return this.nodeSelectionData}update(){this.updateSelections(),this.updateNodes()}updateSelections(){const i=this.generateNodeData();i&&(this.nodeSelectionData=i,this.updateRectSelection(i),this.updateLabelSelection(i))}updateNodes(){this.updateRectNodes(),this.updateLabelNodes()}calculateStep(i){var t;const{xScale:e,paddingInner:n,paddingOuter:s,smallestInterval:a}=this;let h=(e.domain[1]-e.domain[0])/((t=a?.x)!=null?t:1)+1;const l=Math.min(h,50),c=l-1;return i/Math.max(1,2*s+c*n+l)}updateYScaleDomain(){const{yScale:i,yData:t,valueAxisDomain:e}=this,n=me(t);let s=0,a=1;n!==void 0&&(s=this.min=n[0],a=this.max=n[1]),s=s<0?s:0,a=a<0?0:a,e&&(e[1]<a&&(e[1]=a),e[0]>s&&(e[0]=s)),i.domain=e||[s,a]}updateRectSelection(i){this.rectSelection.update(i)}updateRectNodes(){const{highlightedDatum:i,formatter:t,fill:e,stroke:n,strokeWidth:s}=this,{fill:a,stroke:r,strokeWidth:h}=this.highlightStyle;this.rectSelection.each((o,l,c)=>{const d=l===i,p=d&&a!==void 0?a:e,y=d&&r!==void 0?r:n,f=d&&h!==void 0?h:s;let g;const{x:m,y:x,width:v,height:k,seriesDatum:L}=l;if(t){const S=c===0,w=c===this.nodeSelectionData.length-1,O=L.y===this.min,W=L.y===this.max;g=t({datum:l,xValue:L.x,yValue:L.y,width:v,height:k,min:O,max:W,first:S,last:w,fill:p,stroke:y,strokeWidth:f,highlighted:d})}o.fill=g&&g.fill||p,o.stroke=g&&g.stroke||y,o.strokeWidth=g&&g.strokeWidth||f,o.x=o.y=0,o.width=v,o.height=k,o.visible=o.height>0,o.translationX=m,o.translationY=x})}updateLabelSelection(i){this.labelSelection.update(i,t=>{t.tag=1,t.pointerEvents=T.PointerEvents.None})}updateLabelNodes(){const{label:{enabled:i,fontStyle:t,fontWeight:e,fontSize:n,fontFamily:s,color:a}}=this;this.labelSelection.each((r,h)=>{const o=h.label;o&&i?(r.fontStyle=t,r.fontWeight=e,r.fontSize=n,r.fontFamily=s,r.textAlign=o.textAlign,r.textBaseline=o.textBaseline,r.text=o.text,r.x=o.x,r.y=o.y,r.fill=a,r.visible=!0):r.visible=!1})}getTooltipHtml(i){var t,e;const{dataType:n}=this,{seriesDatum:s}=i,a=s.y,r=s.x,h=this.formatNumericDatum(a),o=n==="array"||n==="object"?this.formatDatum(r):void 0,l={content:h,title:o},c=(e=(t=this.processedOptions)==null?void 0:t.tooltip)==null?void 0:e.renderer;return c?P(c({context:this.context,datum:s,yValue:a,xValue:r}),l):P(l)}formatLabelValue(i){return i%1!==0?i.toFixed(1):i.toFixed(0)}},{isNumber:fe}=ce,{BandScale:gt}=le,yt=class extends ft{updateYScaleRange(){const{seriesRect:i,yScale:t}=this;t.range=[0,i.width]}updateXScaleRange(){const{xScale:i,seriesRect:t,paddingOuter:e,paddingInner:n}=this;if(i instanceof gt)i.range=[0,t.height],i.paddingInner=n,i.paddingOuter=e;else{const s=this.calculateStep(t.height),a=s*e;this.bandWidth=s*(1-n),i.range=[a,t.height-a-this.bandWidth]}}updateAxisLine(){const{yScale:i,axis:t,axisLine:e,seriesRect:n}=this,{strokeWidth:s}=t;e.x1=0,e.x2=0,e.y1=0,e.y2=n.height,e.stroke=t.stroke,e.strokeWidth=s+(s%2===1?1:0);const a=i.convert(0);e.translationX=a}generateNodeData(){const{data:i,yData:t,xData:e,xScale:n,yScale:s,fill:a,stroke:r,strokeWidth:h,label:o}=this;if(!i)return;const{fontStyle:l,fontWeight:c,fontSize:d,fontFamily:p,color:y,formatter:f,placement:g}=o,m=[],x=s.convert(0),v=!(n instanceof gt);for(let k=0,L=t.length;k<L;k++){let S=t[k];const w=e[k],O=S===void 0;O&&(S=0);const W=n.convert(v?n.toDomain(w):w),z=Math.min(S===void 0?NaN:s.convert(S),x),U=Math.max(S===void 0?NaN:s.convert(S),x),F=v?this.bandWidth:n.bandwidth,N=U-z,j={x,y:W};let M;f?M=f({value:S}):M=S!==void 0&&fe(S)?this.formatLabelValue(S):"";const q=W+F/2;let b;const K="middle";let C;const D=S!==void 0&&S>=0,_=4;if(g==="center")b=z+N/2,C="center";else if(g==="outsideEnd")b=z+(D?N+_:-_),C=D?"start":"end";else if(g==="insideEnd"){b=z+(D?N-_:_),C=D?"end":"start";const E=he.Text.getTextSize(M,p).width||20,Z=x+E,J=x-E;(D&&b<Z||!D&&b>J)&&(b=x+_*(D?1:-1),C=D?"start":"end")}else b=x+_*(D?1:-1),C=D?"start":"end";m.push({x:z,y:W,width:N,height:F,fill:a,stroke:r,strokeWidth:h,seriesDatum:{x:w,y:O?void 0:S},point:j,label:{x:b,y:q,text:M,fontStyle:l,fontWeight:c,fontSize:d,fontFamily:p,textAlign:C,textBaseline:K,fill:y}})}return m}getDistance(i,t){return Math.abs(i.y-t.y)}};yt.className="BarSparkline";import{_Scale as ge,_Scene as ye,_Util as xe}from"ag-charts-community";var{isNumber:ve}=xe,{BandScale:xt}=ge,vt=class extends ft{updateYScaleRange(){const{seriesRect:i,yScale:t}=this;t.range=[i.height,0]}updateXScaleRange(){const{xScale:i,seriesRect:t,paddingOuter:e,paddingInner:n}=this;if(i instanceof xt)i.range=[0,t.width],i.paddingInner=n,i.paddingOuter=e;else{const s=this.calculateStep(t.width),a=s*e;this.bandWidth=s*(1-n),i.range=[a,t.width-a-this.bandWidth]}}updateAxisLine(){const{yScale:i,axis:t,axisLine:e,seriesRect:n}=this,{strokeWidth:s}=t;e.x1=0,e.x2=n.width,e.y1=0,e.y2=0,e.stroke=t.stroke,e.strokeWidth=s+(s%2===1?1:0);const a=i.convert(0);e.translationY=a}generateNodeData(){const{data:i,yData:t,xData:e,xScale:n,yScale:s,fill:a,stroke:r,strokeWidth:h,label:o}=this;if(!i)return;const{fontStyle:l,fontWeight:c,fontSize:d,fontFamily:p,color:y,formatter:f,placement:g}=o,m=[],x=s.convert(0),v=!(n instanceof xt);for(let k=0,L=t.length;k<L;k++){let S=t[k];const w=e[k],O=S===void 0;O&&(S=0);const W=Math.min(S===void 0?NaN:s.convert(S),x),z=n.convert(v?n.toDomain(w):w),U=Math.max(S===void 0?NaN:s.convert(S),x),F=v?this.bandWidth:n.bandwidth,N=U-W,j={x:z+F/2,y:x};let M;f?M=f({value:S}):M=S!==void 0&&ve(S)?this.formatLabelValue(S):"";const q=z+F/2;let b;const K="center";let C;const D=S!==void 0&&S>=0,_=2;if(g==="center")b=W+N/2,C="middle";else if(g==="outsideEnd")b=W+(D?-_:N+_),C=D?"bottom":"top";else if(g==="insideEnd"){b=W+(D?_:N-_),C=D?"top":"bottom";const E=ye.Text.getTextSize(M,p).height||10,Z=x-E,J=x+E;(D&&b>Z||!D&&b<J)&&(b=x+_*(D?-1:1),C=D?"bottom":"top")}else b=x+_*(D?-1:1),C=D?"bottom":"top";m.push({x:z,y:W,width:F,height:N,fill:a,stroke:r,strokeWidth:h,seriesDatum:{x:w,y:O?void 0:S},point:j,label:{x:q,y:b,text:M,fontStyle:l,fontWeight:c,fontSize:d,fontFamily:p,textAlign:K,textBaseline:C,fill:y}})}return m}};vt.className="ColumnSparkline";import{_Util as St}from"ag-charts-community";var{isNumber:Se}=St,ke=class{static create(i,t){i=St.deepClone(i);const e=De(i.type);return t&&(e.tooltip=t),Le(e,i),be(e,i),i.data&&(e.data=i.data),e.processedOptions=i,e}};function De(i="line"){switch(i){case"column":return new vt;case"bar":return new yt;case"area":return new ut;case"line":default:return new pt}}function be(i,t){switch(t.type){case"bar":kt(i,t);break;case"column":kt(i,t);break;case"area":Ce(i,t);break;case"line":default:we(i,t);break}}function Le(i,t){u(i,"context",t.context,t),u(i,"width",t.width,t),u(i,"height",t.height,t),u(i,"container",t.container,t),u(i,"xKey",t.xKey,t),u(i,"yKey",t.yKey,t),t.padding&&_e(i.padding,t.padding),t.axis&&ze(i.axis,t.axis),t.highlightStyle&&Ne(i.highlightStyle,t.highlightStyle)}function we(i,t){t.marker&&Dt(i.marker,t.marker),t.line&&bt(i.line,t.line),t.crosshairs&&Lt(i.crosshairs,t.crosshairs)}function Ce(i,t){u(i,"fill",t.fill,t),t.marker&&Dt(i.marker,t.marker),t.line&&bt(i.line,t.line),t.crosshairs&&Lt(i.crosshairs,t.crosshairs)}function kt(i,t){u(i,"valueAxisDomain",t.valueAxisDomain,t),u(i,"fill",t.fill,t),u(i,"stroke",t.stroke,t),u(i,"strokeWidth",t.strokeWidth,t),u(i,"paddingInner",t.paddingInner,t),u(i,"paddingOuter",t.paddingOuter,t),u(i,"formatter",t.formatter,t),t.label&&We(i.label,t.label)}function _e(i,t){u(i,"top",t.top,t),u(i,"right",t.right,t),u(i,"bottom",t.bottom,t),u(i,"left",t.left,t)}function Dt(i,t){u(i,"enabled",t.enabled,t),u(i,"size",t.size,t),u(i,"shape",t.shape,t),u(i,"fill",t.fill,t),u(i,"stroke",t.stroke,t),u(i,"strokeWidth",t.strokeWidth,t),u(i,"formatter",t.formatter,t)}function We(i,t){u(i,"enabled",t.enabled,t),u(i,"fontStyle",t.fontStyle,t),u(i,"fontWeight",t.fontWeight,t),u(i,"fontSize",t.fontSize,t),u(i,"fontFamily",t.fontFamily,t),u(i,"textAlign",t.textAlign,t),u(i,"textBaseline",t.textBaseline,t),u(i,"color",t.color,t),u(i,"formatter",t.formatter,t),u(i,"placement",t.placement,t)}function bt(i,t){u(i,"stroke",t.stroke,t),u(i,"strokeWidth",t.strokeWidth,t)}function ze(i,t){u(i,"type",t.type,t),u(i,"stroke",t.stroke,t),u(i,"strokeWidth",t.strokeWidth,t)}function Ne(i,t){u(i,"fill",t.fill,t),u(i,"size",t.size,t),u(i,"stroke",t.stroke,t),u(i,"strokeWidth",t.strokeWidth,t)}function Lt(i,t){i.xLine&&t.xLine&&wt(i.xLine,t.xLine),i.yLine&&t.yLine&&wt(i.yLine,t.yLine)}function wt(i,t){u(i,"enabled",t.enabled,t),u(i,"stroke",t.stroke,t),u(i,"strokeWidth",t.strokeWidth,t),u(i,"lineDash",t.lineDash,t),u(i,"lineCap",t.lineCap,t)}var Ct={};function Me(i,t){Ct[t]||(i(),Ct[t]=!0)}var _t=(i,t,e)=>{if(Se(t))return!0;const n=`AG Charts: ${i} must be a number, the value you provided is not a valid number. Using the default of ${e}px.`;return Me(()=>console.warn(n),`${i} not a number`),!1},Te={xOffset:_t,yOffset:_t};function u(i,t,e,n){if(t in n)if(t in i){const s=Te[t];(s?s(t,e,i[t]):!0)&&i[t]!==e&&(i[t]=e)}else console.warn(`Property ${t} does not exist on the target object.`)}var B=class Wt extends Pt{constructor(){super(Wt.TEMPLATE)}init(t){let e=!0;const n=()=>{const{clientWidth:a,clientHeight:r}=this.getGui();if(!(a===0||r===0))if(e){const h=Ot({data:t.value,width:a,height:r,context:{data:t.data}},t.sparklineOptions);this.sparkline=ke.create(h,this.sparklineTooltipSingleton.getSparklineTooltip()),this.eSparkline.appendChild(this.sparkline.canvasElement),e=!1}else this.sparkline.width=a,this.sparkline.height=r},s=this.resizeObserverService.observeResize(this.getGui(),n);this.addDestroyFunc(()=>s())}refresh(t){return this.sparkline?(this.sparkline.data=t.value,!0):!1}destroy(){this.sparkline&&this.sparkline.destroy(),super.destroy()}};B.TEMPLATE=`<div class="ag-sparkline-wrapper">
            <span ref="eSparkline"></span>
        </div>`,R([It("eSparkline")],B.prototype,"eSparkline",2),R([at("resizeObserverService")],B.prototype,"resizeObserverService",2),R([at("sparklineTooltipSingleton")],B.prototype,"sparklineTooltipSingleton",2);var Ae=B;import{Bean as Oe,BeanStub as Fe,PostConstruct as Re,PreDestroy as Pe}from"@ag-grid-community/core";var Y=class extends Fe{postConstruct(){this.tooltip=new I}getSparklineTooltip(){return this.tooltip}destroyTooltip(){this.tooltip&&this.tooltip.destroy()}};R([Re],Y.prototype,"postConstruct",1),R([Pe],Y.prototype,"destroyTooltip",1),Y=R([Oe("sparklineTooltipSingleton")],Y);var Ie="31.3.2",Xe={version:Ie,moduleName:Ft.SparklinesModule,beans:[Y],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:Ae}],dependantModules:[Rt]};export{Xe as SparklinesModule};
